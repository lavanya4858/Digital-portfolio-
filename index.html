<!-- Branch: main --><!-- Revision: e0a6de3af9bdff9a4f34aa4ee6c1d191c9ef2162 --><!-- Created at: 12 of March 2025 12:45:00 GMT+00:00 --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no,viewport-fit=auto"><meta name="description" content="View Master Template"><title>View Master Template</title><style>:where(:not(:-webkit-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:-moz-any(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}:where(:not(:is(html,iframe,canvas,img,svg,video,audio,svg *,symbol *))){all:unset;display:revert}button{background:0 0;border:none}*,:before,:after{box-sizing:border-box}a,button{cursor:revert}ol,ul,menu{list-style:none}img{max-width:100%;max-height:100%}table{border-collapse:collapse}input,textarea{-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}textarea{white-space:revert}meter{-webkit-appearance:revert;-moz-appearance:revert;appearance:revert}pre{all:revert}::placeholder{color:unset}::marker{content:""}:where([hidden]){display:none}:where([contenteditable]:not([contenteditable=false])){-moz-user-modify:read-write;-webkit-user-modify:read-write;overflow-wrap:break-word;-webkit-user-select:auto;-moz-user-select:auto;user-select:auto}:where([draggable=true]){-webkit-user-drag:element}body{background-color:#000;margin:0;padding:0}button{padding:0}#dynamic{height:100vh;overflow:hidden}</style><style>.wnLcbW_fallback{text-align:right;background:rgba(0,0,0,.8);width:100vw;height:100vh;padding:20px;position:absolute;top:0;left:0}.wnLcbW_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{color:#fff;background-color:#555fff;padding:0}.C4yOdG_primaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.C4yOdG_primaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{flex:1}}.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.C4yOdG_secondaryButton button,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.C4yOdG_secondaryButton,.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{flex:1}}.C4yOdG_gdpr{text-align:center;z-index:2147483647;background-color:#fff;flex-direction:column;justify-content:space-between;width:100%;height:100%;display:flex;position:absolute;top:0;left:0;overflow:hidden}.C4yOdG_gdpr .C4yOdG_icon{color:#fff;background:#007aff url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%22%20height%3D%22100%22%3E%3Cpath%20fill%3D%22%23FFF%22%20d%3D%22M46.2%201.238v12.1c-17.7%201-31.9%2015.2-32.9%2032.9H1.2v4h12.1c1%2017.7%2015.2%2031.9%2032.9%2032.9v12.1h4v-12.1c17.7-1%2031.9-15.2%2032.9-32.9h12.1v-4h-12c-1-17.7-15.2-31.9-32.9-32.9v-12.1h-4.1zm0%2016.1v14.1c-7.8.9-14%207.1-14.9%2014.9h-14c1-15.6%2013.4-28%2028.9-29zm4%200c15.5%201%2027.9%2013.4%2028.9%2028.9h-14c-.9-7.8-7.1-14-14.9-14.9v-14zm-9.3%2023.6c10.8-8.1%2022.8%203.9%2014.7%2014.7-10.8%208.1-22.8-3.9-14.7-14.7zm-23.6%209.3h14.1c.9%207.8%207.1%2014%2014.9%2014.9v14.1c-15.6-1-28-13.4-29-29zm47.8%200h14.1c-1%2015.5-13.4%2028-28.9%2028.9v-14.1c7.7-.8%2013.9-7%2014.8-14.8z%22%2F%3E%3C%2Fsvg%3E) 50%/85% no-repeat;border-radius:50%;width:17vw;max-width:6em;height:17vw;max-height:6em;padding:.5em;display:inline-block}.C4yOdG_gdpr .C4yOdG_content{flex-direction:column;flex:1;justify-content:center;display:flex}.C4yOdG_gdpr .C4yOdG_header{padding:0;line-height:1}.C4yOdG_gdpr .C4yOdG_title{word-wrap:break-word;margin:.5em 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:5.5vw;font-weight:600;line-height:1.5}.C4yOdG_gdpr .C4yOdG_bodyText{text-align:center;word-wrap:break-word;padding:0 12.5%;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:4.5vw;font-weight:400;line-height:1.5;overflow:hidden}.C4yOdG_gdpr .C4yOdG_buttons{width:100%;height:15vw;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:15vw}.C4yOdG_gdpr .C4yOdG_buttons button{float:right;width:50%;height:100%;display:block}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{font-size:7.5vw}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{color:#007aff;border-top:1px solid #e8e8e8;font-size:4.5vw}@media screen and (orientation:landscape){.C4yOdG_gdpr{flex-direction:row}.C4yOdG_gdpr .C4yOdG_content{width:75%}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_title{font-size:5vh}.C4yOdG_gdpr .C4yOdG_content .C4yOdG_bodyText{font-size:4vh}.C4yOdG_gdpr .C4yOdG_buttons{flex-direction:column;justify-content:center;width:25%;min-width:116px;height:100%;padding-right:4.5vh;display:flex;right:0}.C4yOdG_gdpr .C4yOdG_buttons button{float:none;width:100%;height:auto;line-height:12vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_primaryButton{border-radius:10vh;margin-bottom:2vh;font-size:3.5vh}.C4yOdG_gdpr .C4yOdG_buttons button.C4yOdG_secondaryButton{border-top:none;font-size:2.5vh}}._7pzQ5q_overlayCta{content:"";z-index:2147483347;background:0 0;width:100%;height:100%;position:absolute;top:0;bottom:0;left:0;right:0}._7pzQ5q_hidden{display:none}.NQnIja_countdown{text-align:center;color:#fff;background:rgba(51,51,51,.5);border-radius:50%;min-width:35px;min-height:35px;margin:-10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:400;line-height:35px;display:block}.NQnIja_countdown:before,.NQnIja_countdown:after{content:"";line-height:0;display:inline-flex}.mqB7Ka_closeIcon{background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22525.4%22%20height%3D%22525.5%22%3E%3Cpath%20fill%3D%22%23fff%22%20stroke%3D%22%23000%22%20stroke-width%3D%2226%22%20stroke-miterlimit%3D%2210%22%20d%3D%22M452.6%208.9%20262.9%20198.6%2073.1%208.9%209%2073l189.8%20189.7L9%20452l64.1%2064.1%20189.8-189.3%20189.7%20189.3%2064.1-64.1-189.8-189.3L516.7%2073z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:18px;height:18px}.mqB7Ka_skipIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2294.7%22%20height%3D%2294.9%22%3E%3Cg%20fill%3D%22%23FFF%22%20stroke%3D%22%23000%22%20stroke-width%3D%223.417%22%20stroke-miterlimit%3D%2210%22%3E%3Cpath%20d%3D%22m37%2075.5%2022.4-22.4H1.9V41.7h57.5L37%2019.3l8.1-8.1%2036.2%2036.2-36.2%2036.2z%22%2F%3E%3Cpath%20d%3D%22M92.733%2011.138v72.4h-11.5v-72.4z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E) 50%/100% no-repeat;width:18px;height:18px}.LJWyoG_nextButton{color:#fff;text-align:center;z-index:2147483448;justify-content:center;align-items:center;margin:20px 20px 0 0;padding:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:0;display:flex;position:absolute;top:0;right:0}.poFP6W_overlay{z-index:2147483448;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);background:linear-gradient(rgba(0,15,35,.59) 0%,rgba(0,15,35,.8) 45%,rgba(0,15,35,.8) 100%);width:100%;height:100%;position:fixed;top:0;left:0}.poFP6W_opaque{background:#000}.poFP6W_lastChanceEndCard{flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;top:0;left:0}.poFP6W_backgroundNone{background:0 0}.poFP6W_name{color:#fff;text-align:center;z-index:2147483447;margin:11px 40px 22px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:20px;font-weight:700}.poFP6W_icon{z-index:2147483447;border-radius:10px;width:80px;height:80px;display:block}.poFP6W_button{color:#fff;letter-spacing:.9px;z-index:2147483447;background-color:#007aff;border:none;border-radius:50px;padding:7px 18px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700;position:relative}.poFP6W_button:focus{outline:none}.poFP6W_button:before,.poFP6W_button:after{content:"";z-index:-1000;background-repeat:no-repeat;width:140%;height:100%;transition:all .5s ease-out;display:block;position:absolute;left:-20%}.poFP6W_button:before{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 20%,#007aff 20%,transparent 30%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:10% 10%,20% 20%,15% 15%,20% 20%,18% 18%,10% 10%,15% 15%,10% 10%,18% 18%;display:none;top:-75%}.poFP6W_button:after{background-image:radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,transparent 10%,#007aff 15%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%),radial-gradient(circle,#007aff 20%,transparent 20%);background-size:15% 15%,20% 20%,18% 18%,20% 20%,15% 15%,10% 10%,20% 20%;display:none;bottom:-75%}.poFP6W_button.poFP6W_animate:before{animation:2s infinite forwards poFP6W_topBubbles;display:block}.poFP6W_button.poFP6W_animate:after{animation:2.3s infinite forwards poFP6W_bottomBubbles;display:block}@keyframes poFP6W_topBubbles{0%{background-position:5% 90%,10% 90%,10% 90%,15% 90%,25% 90%,25% 90%,40% 90%,55% 90%,70% 90%}50%{background-position:0 80%,0 20%,10% 40%,20% 0,30% 30%,22%,50%,65% 20%,90% 30%}to{background-position:0 70%,0 10%,10% 30%,20% -10%,30% 20%,22% 40%,50% 40%,65% 10%,90% 20%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}@keyframes poFP6W_bottomBubbles{0%{background-position:10% -10%,30% 10%,55% -10%,70% -10%,85% -10%,70% -10%,70% 0}50%{background-position:0 80%,20% 80%,45% 60%,60% 100%,75% 70%,95% 60%,105% 0}to{background-position:0 90%,20% 90%,45% 70%,60% 110%,75% 80%,95% 70%,110% 10%;background-size:0 0,0 0,0 0,0 0,0 0,0 0}}.J2DrKG_staticImageEndcard{justify-content:center;align-items:center;width:100vw;height:100vh;display:flex}.J2DrKG_staticImageEndcard img{max-height:100%;margin:0 auto}.S2LOeW_icon{font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif}.S2LOeW_muted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_muted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath display='none' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.S2LOeW_unmuted{z-index:2147483447;padding:10px 30px 30px 10px;position:absolute;top:0;left:0}.S2LOeW_unmuted span{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='500px' height='500px' %3E%3Ccircle opacity='0.8' cx='249.9' cy='249.9' r='247'/%3E%3Cpath display='none' fill='%23fff' d='M418.9 195.8c-3.2-3.2-8.2-3.2-11.4 0l-45.6 45.6-45.6-45.6c-3.2-3.2-8.2-3.2-11.4 0-3.2 3.2-3.2 8.2 0 11.4l45.6 45.6-45.6 45.6c-3.2 3.2-3.2 8.2 0 11.4 1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3l45.6-45.6 45.6 45.6c1.8 1.8 4.1 2.3 5.9 2.3s4.1-.9 5.9-2.3c3.2-3.2 3.2-8.2 0-11.4l-45.6-45.6 45.6-45.6c2.9-2.3 2.9-8.2-.8-11.4zM268.2 89.2c-2.3-1.7-6.8-.9-9.1.9l-106.7 79.5H95.2c-5 0-8.2 2.9-8.2 7.6v144c0 4.6 3.2 7.6 8.2 7.6h57.2l106.7 80c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.5c.9-1.7-.9-4.6-4.1-6.3zM148.2 314h-44.8V186.1h44.8V314zm108.5 72.9l-92.1-69v-136l91.7-69v274h.4z'/%3E%3Cpath fill='%23fff' d='M268.5 89c-2.3-1.7-6.8-.9-9.2.9l-107 79.9H94.9c-5 0-8.2 3-8.2 7.7V322c0 4.6 3.2 7.7 8.2 7.7h57.4L259.4 410c1.8.9 3.2 1.7 5 1.7.9 0 2.3 0 3.2-.9 2.3-1.7 5-3.8 5-6.8V95.3c1-1.7-.8-4.6-4.1-6.3zM148.2 314.6h-44.9V186.2h44.9v128.4zm108.9 73.1l-92.4-69.3V182l92-69.2v274.9h.4zm149-127.2h-90.5c-4.2 0-7.7-3.5-7.7-7.9s3.4-7.9 7.7-7.9h90.5c4.2 0 7.7 3.5 7.7 7.9s-3.4 7.9-7.7 7.9zm.9-94.6l-88.6 37.6c-3.9 1.6-8.4-.3-10-4.3-1.6-4 .3-8.6 4.1-10.2l88.6-37.6c3.9-1.6 8.4.3 10 4.3 1.6 3.9-.2 8.6-4.1 10.2zm4.7 182.9c-1.6 4-6.1 5.9-10 4.3l-88.6-37.6c-3.9-1.6-5.8-6.2-4.1-10.2 1.6-4 6.1-5.9 10-4.3l88.6 37.6c3.9 1.6 5.8 6.2 4.1 10.2z'/%3E%3C/svg%3E");background-size:100%;width:22px;height:22px;display:block}.OaF7uW_videoProgress{z-index:2147483447;background:rgba(0,0,0,.2);width:100%;height:.1875rem;position:absolute;bottom:0;left:0;right:0;overflow:hidden}.OaF7uW_videoProgress span{width:0%;height:100%;animation-name:OaF7uW_progress-animation;animation-timing-function:cubic-bezier(0,.79,.5,1);animation-iteration-count:infinite;animation-delay:1ms;animation-fill-mode:forwards;position:absolute;top:0;left:0}.OaF7uW_videoProgress span.OaF7uW_paused{animation-play-state:paused}@keyframes OaF7uW_progress-animation{0%{width:20%}to{width:100%}}.ok_seq_videoPlayerWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute}.ok_seq_videoPlayer,.ok_seq_videoPlayer video{width:100%;height:100%}.RypQCq_videoBlurWrap{justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;overflow:hidden}.RypQCq_videoBlurWrap>canvas{filter:blur(6px)brightness(.25);width:100%;height:100%}.dDtiqq_tapToPlayMask{z-index:2147483547;background-color:rgba(0,0,0,.6);position:fixed;top:0;bottom:0;left:0;right:0}.dDtiqq_tapToPlayContainer{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.dDtiqq_tapToPlayIcon{filter:invert();background-image:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M9%2011.24V7.5a2.5%202.5%200%200%201%205%200v3.74c1.21-.81%202-2.18%202-3.74C16%205.01%2013.99%203%2011.5%203S7%205.01%207%207.5c0%201.56.79%202.93%202%203.74zm9.84%204.63-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10%206.67%2010%207.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31%200-.59.13-.79.33l-.79.8%204.94%204.94c.27.27.65.44%201.06.44h6.79c.75%200%201.33-.55%201.44-1.28l.75-5.27c.01-.07.02-.14.02-.2%200-.62-.38-1.16-.91-1.38z%22%2F%3E%3C%2Fsvg%3E);background-position:50%;background-repeat:no-repeat;background-size:100%;width:50px;max-width:120px;max-height:120px;margin:0 auto}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{width:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{width:120px}}.dDtiqq_tapToPlayIcon{height:50px}@media screen and (min-width:320px){.dDtiqq_tapToPlayIcon{height:calc(7.95455vw + 24.5455px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayIcon{height:120px}}.dDtiqq_tapToPlayText{color:#fff;text-align:center;margin:.3em 0;font-size:15px;font-weight:400}@media screen and (min-width:320px){.dDtiqq_tapToPlayText{font-size:calc(1.13636vw + 11.3636px)}}@media screen and (min-width:1200px){.dDtiqq_tapToPlayText{font-size:25px}}.Zz6y0G_download{z-index:2147483447;float:right;cursor:pointer;width:50px;height:50px;padding:20px 10px 10px 20px;line-height:1em;position:fixed;bottom:4px;right:0}.Zz6y0G_download .Zz6y0G_downloadIcon{cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48px'%20height='48px'%20%3E%3Cpath%20fill='white'%20d='M11%2040q-1.2%200-2.1-.9Q8%2038.2%208%2037v-7.15h3V37h26v-7.15h3V37q0%201.2-.9%202.1-.9.9-2.1.9Zm13-7.65-9.65-9.65%202.15-2.15%206%206V8h3v18.55l6-6%202.15%202.15Z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-size:23px;width:19px;height:19px;display:inline-block;bottom:10px}@media only screen and (max-height:249px){.Zz6y0G_download{display:none}}.UUyEIq_persistentSimpleCta{z-index:2147483446;background:rgba(0,0,0,.5);border-radius:8px 0 0 8px;padding:8px;transition:transform .5s ease-in-out;display:flex;position:absolute;bottom:8px;right:0;transform:translate(100%)}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCta{padding:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCta{background:linear-gradient(transparent 0%,rgba(0,0,0,.8) 80%);justify-content:center;align-items:center;width:100%;padding:25px;bottom:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCta{border-radius:4px 0 0 4px;padding:4px}}.UUyEIq_slideIn{transform:translate(0)}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_slideIn{left:50%;transform:translate(-50%)}}.UUyEIq_appIcon{cursor:pointer;border-radius:8px;width:52px;height:52px;left:0}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon{width:70px;height:70px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon{width:100px;height:100px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon{border-radius:4px;width:26px;height:26px}}.UUyEIq_persistentSimpleCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background-color:#179e2d;border:none;border-radius:8px;min-width:99px;height:52px;padding:0 10px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:21px;font-weight:400}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_persistentSimpleCtaBtn{height:70px;font-size:30px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_persistentSimpleCtaBtn{min-width:200px;height:70px;font-size:30px}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_persistentSimpleCtaBtn{border-radius:4px;min-width:80px;height:26px;font-size:14px}}.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:8px}@media screen and (min-width:768px) and (min-height:450px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:12px}}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:0}}@media screen and (max-width:302px),screen and (max-height:300px){.UUyEIq_appIcon~.UUyEIq_persistentSimpleCtaBtn{margin-left:4px}}.UUyEIq_appDetail{color:#fff;min-width:40%;padding:10px 50px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:400;display:none}.UUyEIq_appDetail h1{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:34px;line-height:40px;overflow:hidden}.UUyEIq_appDetail h2{white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:100%;margin:0;font-size:20px;line-height:30px;overflow:hidden}@media screen and (min-width:1024px) and (min-height:301px){.UUyEIq_appDetail{flex-direction:column;align-items:flex-start;display:flex}}.DwKKSa_persistentRichCta{z-index:2147483348;background:#333;align-items:center;width:100%;height:120px;padding:10px;display:flex;position:absolute;top:0;left:0}.DwKKSa_persistentRichCta .DwKKSa_appIcon{cursor:pointer;border-radius:10px;width:90px;height:90px;display:block}.DwKKSa_persistentRichCta .DwKKSa_appInfo{flex-direction:column;flex:1;justify-content:space-around;height:100px;padding:0 15px;display:flex;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo h1{color:#fff;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;width:90%;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:17px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_appInfo p{color:#fff;white-space:nowrap;text-overflow:ellipsis;margin:0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:600;overflow:hidden}.DwKKSa_persistentRichCta .DwKKSa_persistentRichCtaBtn{cursor:pointer;text-align:center;color:#fff;white-space:nowrap;background:#179e2d;border:none;border-radius:24px;width:100%;height:36px;padding:8px 0;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600;box-shadow:0 4px 4px rgba(0,0,0,.25)}.dalDea_persistentRichCtaScreenshots{z-index:2147483348;white-space:nowrap;background:#333;width:100%;min-height:190px;padding:17px 0;position:absolute;bottom:0;left:0;overflow-x:scroll;overflow-y:hidden;box-shadow:inset 0 3px 7px 2px rgba(0,0,0,.4)}.dalDea_persistentRichCtaScreenshots .dalDea_slide{height:100%;margin-left:.75em;display:inline-block}.dalDea_persistentRichCtaScreenshots img{cursor:pointer;object-fit:cover;border-radius:.75em;height:100%}.W6zMza_dialogBox{visibility:hidden;text-align:center;color:#565656;z-index:2147483647;background-color:rgba(0,0,0,.8);width:100%;height:100%;position:absolute;top:0;left:0}.W6zMza_dialog{text-align:center;width:288px;margin-top:0;padding:0;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}@media only screen and (max-height:20em){.W6zMza_dialog{width:200px}}.W6zMza_dialogContent{border-top-width:7px;border-top-color:#555fff;border-radius:15px;width:100%;position:relative;overflow:hidden}.W6zMza_dialogTitle{color:#fff;background-color:#555fff;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:16px;font-weight:600}@media only screen and (max-height:20em){.W6zMza_dialogTitle{font-size:1em}}.W6zMza_dialogBody{background-color:#fff;padding:0;overflow:hidden}.W6zMza_dialogText{text-align:center;margin:0 auto;padding:18px 15px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;line-height:1.35em}@media only screen and (max-height:20em){.W6zMza_dialogText{padding:10px;font-size:.8em;line-height:1.25}}.W6zMza_dialogActions{background-color:#fff;width:100%;padding:0}.W6zMza_dialogActions button{text-align:center;background:0 0;border:none;width:100%;padding:8px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;font-weight:400;text-decoration:none}@media only screen and (max-height:20em){.W6zMza_dialogActions button{font-size:.75rem}}@media screen and (orientation:landscape){.W6zMza_dialogActions{display:flex}}.eDiOmG_primaryButton{color:#fff;background-color:#555fff;padding:0}.eDiOmG_primaryButton button{text-transform:uppercase;color:#fff}@media screen and (orientation:landscape){.eDiOmG_primaryButton{flex:1}}.eDiOmG_secondaryButton{color:#555fff;background-color:#fff;padding:0}.eDiOmG_secondaryButton button{color:#555fff}@media screen and (orientation:landscape){.eDiOmG_secondaryButton{flex:1}}.eDiOmG_primaryButton button{justify-content:center;align-items:center;display:flex}.eDiOmG_continueIcon{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2236%22%20height%3D%2246%22%20style%3D%22shape-rendering%3Ageometricprecision%3Btext-rendering%3Ageometricprecision%3Bimage-rendering%3Aoptimizequality%3Bfill-rule%3Aevenodd%3Bclip-rule%3Aevenodd%22%3E%3Cpath%20style%3D%22opacity%3A.849%22%20fill%3D%22%23fefffe%22%20d%3D%22M35.5%2014.5v7c-3.399%2011.06-11.065%2016.227-23%2015.5%203.026%202.298%203.692%205.13%202%208.5h-5c-3-3.667-6.333-7-10-10v-5a133.238%20133.238%200%200%200%2010-9.5c5.167-1.5%207%20.333%205.5%205.5L12.5%2029c8.637%201.53%2013.97-1.97%2016-10.5-1.08-7.537-5.414-11.37-13-11.5-2.101-1.733-2.435-3.733-1-6%2010.787-1.378%2017.787%203.122%2021%2013.5Z%22%2F%3E%3C%2Fsvg%3E) 50%/contain no-repeat;width:12px;height:12px;margin-left:6px;display:inline-block}._0zGmtq_watermark{z-index:200;background-color:#000;width:100vw;min-height:1px;font-size:1px;display:flex;position:absolute}._0zGmtq_watermark ._0zGmtq_leading._0zGmtq_bit{width:4vw}._0zGmtq_watermark ._0zGmtq_bit{flex-grow:0;width:1vw;height:1px}._0zGmtq_watermark ._0zGmtq_zero{height:1px}._0zGmtq_watermark ._0zGmtq_one{background-color:#050505;height:1px}.m2_mMq_privacyButton{cursor:pointer;z-index:2147483497;background:0 0;width:16px;padding:0;line-height:0;position:absolute;bottom:4px;left:4px}@media (min-width:48em){.m2_mMq_privacyButton{bottom:.8rem;left:.8rem}}.m2_mMq_privacyButton svg{width:100%;height:100%}@media only screen and (max-height:300px){.m2_mMq_privacyButton{width:13px;height:13px;left:2px}}@media only screen and (max-height:200px){.m2_mMq_privacyButton{width:12px;height:12px}}._0LRN8a_container{text-align:center;flex-direction:column;justify-content:center;width:100%;height:145px;display:flex;position:relative;overflow:hidden}._0LRN8a_completeContainer{justify-content:center;align-items:center}._0LRN8a_popup{background-color:#fff;flex-direction:column;justify-content:center;height:100%;padding:0;display:flex;position:absolute;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){._0LRN8a_popup{color:#fff;background:#121212}}._0LRN8a_complete{background-image:url(data:image/svg+xml,%3Csvg%20width%3D%2272%22%20height%3D%2272%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Crect%20x%3D%22.5%22%20y%3D%22.5%22%20width%3D%2271%22%20height%3D%2271%22%20rx%3D%2235.5%22%20fill%3D%22%2300AEFF%22%2F%3E%3Cpath%20stroke%3D%22%23fff%22%20stroke-width%3D%226%22%20stroke-linecap%3D%22round%22%20d%3D%22M20.743%2036.375%2031.5%2047.132M31.5%2047.132%2053.882%2024.75%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-size:100%;width:71px;height:71px;margin-top:5px;display:inline-block}@media (max-width:335px){._0LRN8a_complete{background-repeat:no-repeat;background-size:100%;width:60px;height:60px;margin-top:3px;display:inline-block}}._0LRN8a_title{color:#000;margin-top:15px;margin-bottom:18px;padding:0 30px;font-weight:700}@media (prefers-color-scheme:dark){._0LRN8a_title{color:#fff}}._0LRN8a_title._0LRN8a_question{font-size:17px}@media (max-width:335px){._0LRN8a_title._0LRN8a_question{margin-top:3px;font-size:15px}}._0LRN8a_title._0LRN8a_thanks{font-size:22px}@media (max-width:335px){._0LRN8a_title._0LRN8a_thanks{margin-top:8px;margin-bottom:8px;font-size:18px}}._0LRN8a_options{justify-content:center;gap:15px;max-width:303px;margin-bottom:0;margin-left:auto;margin-right:auto;padding:0 16px;display:flex}@media (max-width:335px){._0LRN8a_options{gap:10px;max-width:245px;padding:0 12px 12px}}._0LRN8a_option{cursor:pointer;background-color:#fff;border:1px solid #e0e0e0;border-radius:10px;flex-direction:column;flex:none;justify-content:center;align-items:center;width:91px;height:88px;padding-top:10px;transition:background-color .2s ease-in-out;display:flex;box-shadow:0 1px 3px rgba(0,0,0,.1)}@media (prefers-color-scheme:dark){._0LRN8a_option{color:#fff;background:#121212}}@media (max-width:335px){._0LRN8a_option{border-radius:10px;width:75px;height:75px}}._0LRN8a_option:hover{background-color:#f8f8f8}._0LRN8a_emoji{margin-bottom:4px;font-size:40px}@media (max-width:335px){._0LRN8a_emoji{margin-bottom:2px;font-size:32px}}._0LRN8a_optionText{color:#000;padding-bottom:5px;font-size:14px;font-weight:500}@media (prefers-color-scheme:dark){._0LRN8a_optionText{color:#fff}}@media (max-width:335px){._0LRN8a_optionText{padding-bottom:3px;font-size:12px}}.FbTWOG_popupContainer.FbTWOG_popupContainerDisplay{z-index:2147483647;position:fixed;top:0;bottom:0;left:0;right:0}.FbTWOG_privacyPopup{z-index:2147483647;background:#fff;border-radius:9px 9px 0 0;padding-top:12px;font-family:Roboto,-apple-system,Segoe UI,Droid Sans,Helvetica Neue,Helvetica,Arial,sans-serif;transition:transform .2s ease-in-out;position:fixed;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_privacyPopup{color:#fff;background:#121212}}@media (max-width:335px){.FbTWOG_privacyPopup{border-radius:7px 7px 0 0;padding-top:10px}}.FbTWOG_popupHeader{justify-content:space-between;height:24px;margin-bottom:-30px;display:flex;position:relative}.FbTWOG_popupHeader button{z-index:1;cursor:pointer;background:0 0;border:none;position:absolute;top:-3px;right:3.44%}.FbTWOG_closeIcon{background-color:#333;background-repeat:no-repeat;background-size:100%;width:11px;height:11px;display:inline-block;-webkit-mask-image:url(data:image/svg+xml,%3Csvg%20width%3D%2210%22%20height%3D%2210%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M9%201%201%209M1%201l8%208%22%20stroke%3D%22currentColor%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fsvg%3E);mask-image:url(data:image/svg+xml,%3Csvg%20width%3D%2210%22%20height%3D%2210%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M9%201%201%209M1%201l8%208%22%20stroke%3D%22currentColor%22%20stroke-width%3D%221.5%22%20stroke-linecap%3D%22round%22%2F%3E%3C%2Fsvg%3E);-webkit-mask-size:contain;mask-size:contain;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat}@media (max-width:335px){.FbTWOG_closeIcon{background-repeat:no-repeat;background-size:100%;width:9px;height:9px;display:inline-block}}@media (prefers-color-scheme:dark){.FbTWOG_closeIcon{background-color:#fff}}.FbTWOG_readMore{color:#0376d9;padding:16px 0;font-size:16px;font-weight:400}@media (prefers-color-scheme:dark){.FbTWOG_readMore{color:#4a9eff}}@media (max-width:335px){.FbTWOG_readMore{padding:12px 0;font-size:12px}}.FbTWOG_privacyPolicy{text-align:center}.FbTWOG_popupFooter{color:#000;background-color:#f1f1f1;width:100%;margin-top:5px;padding:15px;font-size:12px}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter{color:#fff;background-color:#1e1e1e}}@media (max-width:335px){.FbTWOG_popupFooter{margin-top:3px;padding:12px 10px;font-size:10px}}.FbTWOG_popupFooter .FbTWOG_adInfoTitle{font-weight:700}.FbTWOG_popupFooter .FbTWOG_adInfoRow{margin-bottom:3px;line-height:1.4;display:flex}.FbTWOG_popupFooter .FbTWOG_adInfoLabel{color:#000;width:80px;font-weight:400}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter .FbTWOG_adInfoLabel{color:#fff}}@media (max-width:335px){.FbTWOG_popupFooter .FbTWOG_adInfoLabel{width:70px}}.FbTWOG_popupFooter .FbTWOG_adInfoValue{color:#9f9f9f;letter-spacing:0;flex:auto}@media (prefers-color-scheme:dark){.FbTWOG_popupFooter .FbTWOG_adInfoValue{color:silver}}@media (max-width:335px){.FbTWOG_popupFooter .FbTWOG_adInfoValue{font-size:10px}}.FbTWOG_popupBody{padding-top:0;font-size:14px}@media (max-width:335px){.FbTWOG_popupBody{padding-top:0;font-size:13px}}.FbTWOG_show{transform:translateY(0);box-shadow:0 -10px 20px -5px rgba(115,115,115,.75)}@media (prefers-color-scheme:dark){.FbTWOG_show{box-shadow:0 -10px 20px -5px rgba(0,0,0,.75)}}.FbTWOG_hide{transform:translateY(100%)}.FbTWOG_displayNone{display:none}.FbTWOG_mask{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:rgba(255,255,255,.2);transition:all .5s;position:fixed;top:0;bottom:0;left:0;right:0}@media (prefers-color-scheme:dark){.FbTWOG_mask{background:rgba(0,0,0,.5)}}.FbTWOG_debug{color:#bfbfbf;height:200px;font-size:11px;overflow-x:hidden;overflow-y:auto}@media (prefers-color-scheme:dark){.FbTWOG_debug{color:#a0a0a0}}@media (max-width:335px){.FbTWOG_debug{height:150px;font-size:9px}}.oAV7cW_endcardIframe{border:0;width:100%;height:100%;position:absolute;top:0;left:0}.oAV7cW_endcard{text-align:center;background-color:#000;width:100vw;height:100vh;position:relative}._37VDnG_composite{width:100vw;height:100vh}._37VDnG_component{width:100%;height:100%;position:relative}._37VDnG_compositeImage{background-position:50%;background-repeat:no-repeat;background-size:contain;justify-content:center;align-items:center;width:100%;height:100%;display:flex}._37VDnG_compositeImage img{display:none}._37VDnG_compositeHtml{width:100%;height:100%}@keyframes i0Mp0G_shrinkToTopLeft{0%{transform:translate(0)scale(1)}to{transform-origin:0 0;transform:translate(10px,10px)scale(.3)}}.i0Mp0G_pictureInPictureContainer{z-index:2147483548;box-sizing:border-box;width:100%;height:100%;margin:0;padding:0;display:block;position:fixed;top:0;left:0}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animationEnded{transform-origin:0 0;transition:transform 1s ease-in-out;transform:translate(10px,10px)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_animatingVideo{animation:.5s ease-in-out forwards i0Mp0G_shrinkToTopLeft}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideUp{transform:translateY(-100%)scale(.3)}.i0Mp0G_pictureInPictureContainer.i0Mp0G_slideLeft{transform:translate(-100%)scale(.3)}#gRz7DW_ad{width:100%;height:100%}</style><script type="module">window.appVersion="5.62.0";</script><script type="module">window.Hls={isSupported:()=>!1,DefaultConfig:{loader:class{constructor(){}}}};</script><script src="mraid.js"></script><script type="module">function n(r,e){var s=t();return(n=function(r,n){return s[r-=143]})(r,e)}var r=n;function t(){var r=["undefined","303444inYQJd",'ipt src="replacements.js"></sc',"7213chHhdp","7mBWnvg","<scr","897366rgVoCQ","44iJuGgH","41079UpxDFu","2247664yxnDpZ","write","mraidExt","ript>","77OMQXem","584010DyCTIj","421595CqDrDG",'ipt src="vungle_mraid.js"></sc',"10njnkdM","8TySzmr"];return(t=function(){return r})()}!function(r){for(var t=n,e=r();;)try{if(parseInt(t(154))/1*(parseInt(t(158))/2)+-parseInt(t(159))/3*(-parseInt(t(150))/4)+parseInt(t(147))/5+parseInt(t(157))/6*(-parseInt(t(155))/7)+parseInt(t(160))/8+parseInt(t(146))/9*(-parseInt(t(149))/10)+parseInt(t(145))/11*(-parseInt(t(152))/12)==159889)break;e.push(e.shift())}catch(r){e.push(e.shift())}}(t),("undefined"==typeof vungle||typeof vungle[r(143)]===r(151))&&(document[r(161)](r(156)+r(148)+r(144)),document.write(r(156)+'ipt src="tokenmap.js"><\/script>'),document[r(161)](r(156)+r(153)+r(144)));</script><script type="module">var e=t;function n(){var e=["233320xaKEXL","1519032JREVyj","notifyPropertiesChange","10490PSChOO","270063ynCtMs","295981bVKbOX","Accept","hasOwnProperty","vungle","1263420fuAVmE","consentDenyButtonText","118nnSbiu","notifyReadyEvent","INCENTIVIZED","mraidBridge","consentTitleText","545USnEPa","osVersion","consentBodyText","1.0","fullscreen","forEach","keys"];return(n=function(){return e})()}function t(e,o){var r=n();return(t=function(e,n){return r[e-=234]})(e,o)}if(function(e){for(var n=t,o=e();;)try{if(parseInt(n(239))/1*(parseInt(n(234))/2)+parseInt(n(250))/3+parseInt(n(246))/4+parseInt(n(249))/5+-parseInt(n(255))/6+-parseInt(n(251))/7+parseInt(n(247))/8==119630)break;o.push(o.shift())}catch(e){o.push(o.shift())}}(n),"function"==typeof getVungleReplacementTokens){var o,r={OS:"os",OS_VERSION:e(240),SDK_VERSION:"sdkVersion",CONSENT_TITLE_TEXT:e(238),CONSENT_BODY_TEXT:e(241),CONSENT_ACCEPT_BUTTON_TEXT:"consentAcceptButtonText",CONSENT_DENY_BUTTON_TEXT:e(256)},s=getVungleReplacementTokens(),i=(o={},Object[e(245)](s).forEach((function(e){o[vungleTokenMap[e]]=s[e]})),o);window[e(254)][e(237)][e(235)](i);let n={isViewable:!0,placementType:e(243),version:e(242),consentAcceptButtonText:e(252),consentDenyButtonText:"Deny",consentBodyText:"Ads are personalized. Denying would disable it",consentTitleText:"Personalized Ads",supports:{sms:!1,storePicture:!1,inlineVideo:!1,calendar:!1,tel:!1},incentivized:i[e(253)]("INCENTIVIZED")&&"true"===i[e(236)].toLowerCase()};Object[e(245)](r)[e(244)]((function(t){i[e(253)](t)&&(n[r[t]]=i[t])})),window[e(254)][e(237)][e(248)](n)}</script></head><body>  <div id="dynamic"></div> <script type="module">let e,t;var n=class extends Error{};class i{static getInstance(e){return this.instance||(this.instance=new i(e)),this.instance}bind(e,t){return this.bindings.set(e,t),this}get(e){if(!this.bindings.has(e))throw new n(`Could not find anything for key ${e}`);return this.bindings.get(e)}has(e){return this.bindings.has(e)}reset(){this.bindings.clear()}constructor(e=Date.now()){this.startTimestamp=e,this.bindings=new Map}}var r=i,a=class{},o=class extends a{get(e){return this.replacementTokens[e]}has(...e){return e.every((e=>e in this.replacementTokens))}some(...e){return e.some((e=>e in this.replacementTokens))}static getServiceIdentifier(){return"TokenServiceInterface"}getSeriesValues(e){var t,n,i,r;let a=this.getSeriesTokens(e),o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{};return a.map((e=>o[e]))}getSeriesTokens(e){var t,n,i,r;let a=[],o=null!==(r=null===(i=window.vungle)||void 0===i||null===(n=i.mraidBridgeExt)||void 0===n||null===(t=n.getReplacementTokens)||void 0===t?void 0:t.call(n))&&void 0!==r?r:{},s=[];return Object.keys(o).filter((t=>t.startsWith(e))).forEach((t=>{let n=t.replace(e,"");/^\d+$/.test(n)?s.push(parseInt(n,10)):a.push(t)})),0===s.length||(s.sort(((e,t)=>e-t)),s.forEach((t=>a.push(`${e}${t}`)))),a}constructor(e){super(),this.replacementTokens=null!=e?e:{}}},s=(e,t="default")=>{let n=e=>e.filter((e=>void 0!==e)).flat();return{info:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"info",prefix:t,message:i,optionalParams:r}),console.info(...a)},warn:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"warn",prefix:t,message:i,optionalParams:r}),console.warn(...a)},error:(i,...r)=>{let a=n([t,i,...r]);e.addToActivity({type:"log",level:"error",prefix:t,message:i,optionalParams:r}),console.error(...a)}}},l=class extends a{getLogger(e="default"){return null==this.loggers[e]&&(this.loggers[e]=s(this,e)),this.loggers[e]}emit(e){e.fireOnlyOnce&&this.hasExistingEvent(e)||(this.addToActivity({type:"event",eventType:e.type,name:e.event,data:e.data}),this.invokeEventHandlers(e))}invokeEventHandlers(e){[...this.eventHandlers[e.type]||[],...this.eventHandlers["*"]||[]].forEach((t=>t(this,e)))}addToActivity(e){this.activity.push({activity:e,timestamp:Date.now()})}getActivity(e){return e?this.activity.filter((t=>t.activity.type===e)):this.activity}getActivityEvents(){return this.activity.filter((e=>"event"===e.activity.type))}getActivityLogs(){return this.activity.filter((e=>"log"===e.activity.type))}getActivityEventPairs(e,t,n){let i=this.getActivityEvents().filter((t=>t.activity.eventType===e)),r=[],a=null;return i.forEach((e=>{let i=e.activity;i.name===t?a=e:i.name===n&&a&&(r.push([a,e]),a=null)})),r}clearActivity(){this.activity.length=0}addEventHandler(e,t){this.eventHandlers[e]=this.eventHandlers[e]||[],this.eventHandlers[e].push(t)}removeEventHandler(e,t){null!=this.eventHandlers[e]&&(this.eventHandlers[e]=this.eventHandlers[e].filter((e=>e!==t)))}getEventHandlers(e){return this.eventHandlers[e]||[]}static getServiceIdentifier(){return"ReportingServiceInterface"}constructor(...e){super(...e),this.loggers={},this.eventHandlers={},this.activity=[],this.hasExistingEvent=e=>this.activity.some((t=>"event"===t.activity.type&&t.activity.eventType===e.type&&t.activity.name===e.event))}};function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}))}return e}(J=eu||(eu={}))[J.NotStarted=0]="NotStarted",J[J.Running=1]="Running",J[J.Stopped=2]="Stopped";const c={type:"xstate.init"},u="xstate.assign";function E(e){return void 0===e?[]:[].concat(e)}function v(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function _(e){return t=>e===t}function h(e){return"string"==typeof e?{type:e}:e}function T(e,t,n){let i=t,r=!1;return[e.filter((e=>{if(e.type===u){r=!0;let t=d({},i);return"function"==typeof e.assignment?t=e.assignment(i,n):Object.keys(e.assignment).forEach((r=>{t[r]="function"==typeof e.assignment[r]?e.assignment[r](i,n):e.assignment[r]})),i=t,!1}return!0})),i,r]}const S=(e,t)=>e.actions.forEach((({exec:n})=>n&&n(e.context,t)));function p(e){return{type:u,assignment:e}}var g=class extends a{createMachine(e,t){if(!(null==e?void 0:e.id))throw Error("State machine identifier is missing.");this.machineMap.has(e.id)||this.machineMap.set(e.id,{config:e,options:t,machine:function(e,t={}){let[n,i]=T(E(e.states[e.initial].entry).map((e=>v(e,t.actions))),e.context,c),r={config:e,_options:t,initialState:{value:e.initial,actions:n,context:i,matches:_(e.initial)},transition:(t,n)=>{let{value:i,context:a}="string"==typeof t?{value:t,context:e.context}:t,o=h(n),s=e.states[i];if(s.on){let t=E(s.on[o.type]);for(let n of("*"in s.on&&t.push(...E(s.on["*"])),t)){if(void 0===n)break;let{target:t,actions:l=[],cond:d=()=>!0}="string"==typeof n?{target:n}:n,c=void 0===t,u=null!=t?t:i,h=e.states[u];if(d(a,o)){let[e,n,d]=T((c?E(l):[].concat(s.exit,l,h.entry).filter((e=>e))).map((e=>v(e,r._options.actions))),a,o),u=null!=t?t:i;return{value:u,context:n,actions:e,changed:t!==i||e.length>0||d,matches:_(u)}}}}return{value:i,context:a,actions:[],changed:!1,matches:_(i)}}};return r}(e,t)});let n=this.machineMap.get(e.id);return null==n?void 0:n.machine}interpret(e){var t;if(!(null==e||null===(t=e.config)||void 0===t?void 0:t.id))throw Error("State machine is malformed.");return this.interpreterMap.has(e.config.id)||this.interpreterMap.set(e.config.id,function(e){let t=e.initialState,n=eu.NotStarted,i=new Set,r={_machine:e,send:r=>{n===eu.Running&&(S(t=e.transition(t,r),h(r)),i.forEach((e=>e(t))))},subscribe:e=>(i.add(e),e(t),{unsubscribe:()=>i.delete(e)}),start:i=>{if(i){let n="object"==typeof i?i:{context:e.config.context,value:i};t={value:n.value,actions:[],context:n.context,matches:_(n.value)}}else t=e.initialState;return n=eu.Running,S(t,c),r},stop:()=>(n=eu.Stopped,i.clear(),r),get state(){return t},get status(){return n}};return r}(e)),this.interpreterMap.get(e.config.id)}clear(e){e?(this.machineMap.delete(e),this.interpreterMap.delete(e)):(this.machineMap.clear(),this.interpreterMap.clear())}static getServiceIdentifier(){return"StateMachineServiceInterface"}constructor(){super(),this.machineMap=new Map,this.interpreterMap=new Map}};function C(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var I=()=>"me0a6de3af";(ee=eE||(eE={})).LOADING="loading",ee.DEFAULT="default",ee.EXPANDED="expanded",ee.RESIZED="resized",ee.HIDDEN="hidden";var O=(e=I())=>{var t,n,i,r,a,o,s,l;let c=null===(t=window[e])||void 0===t?void 0:t.mraid,u=null===(n=window[e])||void 0===n?void 0:n.mraidExt;return!c&&((null===(o=window.vungle)||void 0===o?void 0:o.mraid)?window[e]={mraid:d({},window.vungle.mraid)}:window.mraid&&(window[e]={mraid:d({},window.mraid)})),!u&&(null===(i=window.vungle)||void 0===i?void 0:i.mraidExt)&&(window[e]=C(d({},window[e]),{mraidExt:d({},window.vungle.mraidExt)})),window.mraid&&delete window.mraid,window.vungle&&(window.vungle.mraid&&delete window.vungle.mraid,window.vungle.mraidExt&&(window.vungle.mraidExt={getOS:null===(s=window.vungle.mraidExt)||void 0===s?void 0:s.getOS,getOSVersion:null===(l=window.vungle.mraidExt)||void 0===l?void 0:l.getOSVersion})),{mraid:null===(r=window[e])||void 0===r?void 0:r.mraid,mraidExt:null===(a=window[e])||void 0===a?void 0:a.mraidExt}},A=class extends a{init(){let{mraid:e,mraidExt:t}=O(),{mraidBridge:n,mraidBridgeExt:i}=function(){if(!window.vungle)return{mraidBridge:void 0,mraidBridgeExt:void 0};let{mraidBridge:e,mraidBridgeExt:t}=window.vungle;return{mraidBridge:e,mraidBridgeExt:t}}();this.mraid=e,this.mraidExt=t,this.mraidBridge=n,this.mraidBridgeExt=i,this.initialized=!0}checkInit(){this.initialized||this.init()}static getServiceIdentifier(){return"MraidServiceInterface"}getMraid(){return this.checkInit(),this.mraid}getMraidBridge(){return this.checkInit(),this.mraidBridge}getMraidBridgeExt(){return this.checkInit(),this.mraidBridgeExt}getMraidExt(){return this.checkInit(),this.mraidExt}constructor(){super(),this.initialized=!1,this.init()}},f=class{clearInterval(){this.id&&(window.clearInterval(this.id),this.id=void 0)}pause(){this.clearInterval()}start(){!this.intervalService.isPaused()&&(void 0!==this.id||this.isDestroyed()||(this.id=window.setInterval((()=>{this.callable()}),this.interval)))}destroy(){this.clearInterval(),this.destroyed=!0}getId(){return this.id}isDestroyed(){return this.destroyed}constructor(e,t,n){this.interval=e,this.callable=t,this.intervalService=n,this.destroyed=!1}},m=class extends a{getNewInterval(e,t){let n=new f(e,t,this);return this.intervals.push(n),n}pauseAll(){this.paused=!0,this.intervals.forEach((e=>{e.pause()}))}startAll(){this.paused=!1,this.intervals.forEach((e=>{e.start()}))}destroyAll(){this.intervals.forEach((e=>{e.destroy()})),this.intervals=[]}isPaused(){return this.paused}static getServiceIdentifier(){return"IntervalServiceInterface"}constructor(e=!1){super(),this.paused=e,this.intervals=[]}},N=class{constructor(e,t){this.delay=e,this.callable=t,this.getId=()=>this.id,this.start=()=>!this.isDestroyed&&void 0===this.id&&(this.id=window.setTimeout((()=>{this.callable&&this.callable(),this.id=void 0,this.remainingTime=this.delay,this.promiseResolve&&this.promiseResolve(),this.destroy()}),this.remainingTime),this.startTime=Date.now(),!0),this.pause=()=>{void 0!==this.id&&void 0!==this.startTime&&(clearTimeout(this.id),this.remainingTime-=Date.now()-this.startTime),this.startTime=void 0,this.id=void 0},this.destroy=()=>{void 0!==this.id&&(clearTimeout(this.id),this.id=void 0),this.isDestroyed=!0,this.promiseReject&&this.promiseReject(!1)},this.asPromise=()=>new Promise(((e,t)=>{this.promiseResolve=e,this.promiseReject=t,this.isDestroyed?t(Error("The timer has been destroyed and cannot be started.")):this.start()})),this.remainingTime=e,this.isDestroyed=!1}},D=class extends a{destroyAll(){this.timers.forEach((e=>{e.destroy()}))}getNewTimer(e,t){let n=new N(e,t);return this.timers.push(n),n}pauseAll(){this.timers.forEach((e=>{e.pause()}))}standby(){0===this.stash.length&&this.timers.forEach((e=>{void 0!==e.getId()&&(e.pause(),this.stash.push(e))}))}wake(){if(0===this.stash.length)return;let e=this.stash.pop();null==e||e.start(),this.wake()}startAll(){this.timers.forEach((e=>{e.start()}))}static getServiceIdentifier(){return"TimerServiceInterface"}constructor(){super(),this.timers=[],this.stash=[]}},R=()=>{let e=r.getInstance(),t=A.getServiceIdentifier();return e.get(t)};(et=ev||(ev={})).UNKNOWN="unknown",et.MREC="mrec",et.FULLSCREEN="fullscreen",et.BANNER="banner",et.IN_LINE="in_line";var y=()=>{let e=r.getInstance(),t=o.getServiceIdentifier();return e.get(t)};(en=e_||(e_={})).ACC_TESTS="ACC_TESTS",en.ADM_HTML="ADM_HTML",en.ADVERTISER_DOMAIN="ADVERTISER_DOMAIN",en.AD_EXPERIENCE="AD_EXPERIENCE",en.AD_SOURCE="AD_SOURCE",en.ALT_EC_0="ALT_EC_0",en.APP_CONTENT_RATING="APP_CONTENT_RATING",en.APP_DESCRIPTION="APP_DESCRIPTION",en.APP_DESCRIPTION_ENCODED="APP_DESCRIPTION_ENCODED",en.APP_DOWNLOAD_COUNT="APP_DOWNLOAD_COUNT",en.APP_ICON="APP_ICON",en.APP_INFO_POSITION="APP_INFO_POSITION",en.APP_LONG_DESCRIPTION="APP_LONG_DESCRIPTION",en.APP_LONG_DESCRIPTION_ENCODED="APP_LONG_DESCRIPTION_ENCODED",en.APP_NAME="APP_NAME",en.APP_NAME_ENCODED="APP_NAME_ENCODED",en.APP_RATING="APP_RATING",en.APP_RATING_COUNT="APP_RATING_COUNT",en.APP_SCREENSHOTS="APP_SCREENSHOTS",en.APP_STORE_ID="APP_STORE_ID",en.APP_STORE_ON_ENDCARD_AUTO_DELAY="APP_STORE_ON_ENDCARD_AUTO_DELAY",en.APP_STORE_ON_ENDCARD_CLOSE="APP_STORE_ON_ENDCARD_CLOSE",en.APP_STORE_ON_FIRST_TRANSITION="APP_STORE_ON_FIRST_TRANSITION",en.APP_STORE_ON_SECOND_TRANSITION="APP_STORE_ON_SECOND_TRANSITION",en.APP_STORE_ON_VIDEO_AUTO_DELAY="APP_STORE_ON_VIDEO_AUTO_DELAY",en.APP_STORE_ON_VIDEO_CLOSE="APP_STORE_ON_VIDEO_CLOSE",en.APP_STORE_RATING="APP_STORE_RATING",en.BLOCK_PERSISTENT_CTA="BLOCK_PERSISTENT_CTA",en.CLOSE_BUTTON_DELAY_SECONDS="CLOSE_BUTTON_DELAY_SECONDS",en.CLOSE_BUTTON_PADDING="CLOSE_BUTTON_PADDING",en.CLOSE_BUTTON_SIZE="CLOSE_BUTTON_SIZE",en.COUNTRY_CODE="COUNTRY_CODE",en.CREATIVE_FORMAT="CREATIVE_FORMAT",en.CREATIVE_FORMAT_VERSION="CREATIVE_FORMAT_VERSION",en.CREATIVE_ID="CREATIVE_ID",en.CTA_BUTTON_BACKGROUND="CTA_BUTTON_BACKGROUND",en.CTA_BUTTON_ENCODED_TEXT="CTA_BUTTON_ENCODED_TEXT",en.CTA_BUTTON_ICON="CTA_BUTTON_ICON",en.CTA_BUTTON_POSITION="CTA_BUTTON_POSITION",en.CTA_BUTTON_TEXT="CTA_BUTTON_TEXT",en.CTA_BUTTON_URL="CTA_BUTTON_URL",en.DOWNLOAD_BUTTON_DELAY_SECONDS="DOWNLOAD_BUTTON_DELAY_SECONDS",en.DSA_REQUIRED="DSA_REQUIRED",en.EC_CLOSE_BUTTON_DELAY_SECONDS="EC_CLOSE_BUTTON_DELAY_SECONDS",en.EC_CTA_URL="EC_CTA_URL",en.EC_HTML="EC_HTML",en.EC_HTML_2="EC_HTML_2",en.EC_HTML_COMPRESS="EC_HTML_COMPRESS",en.EC_IMAGE="EC_IMAGE",en.EC_IMAGE_2="EC_IMAGE_2",en.EC_SKOVERLAY_DELAY_SECONDS="EC_SKOVERLAY_DELAY_SECONDS",en.EC_SKOVERLAY_DISABLE_AUTO_MMP="EC_SKOVERLAY_DISABLE_AUTO_MMP",en.ENDCARD_CLOSE_BUTTON_AS_SKIP="ENDCARD_CLOSE_BUTTON_AS_SKIP",en.ERID_ADVERTISER_INFO="ERID_ADVERTISER_INFO",en.ERID_ADVERTISER_LINK="ERID_ADVERTISER_LINK",en.ERID_RECOMMEND_RULE="ERID_RECOMMEND_RULE",en.FULL_CTA="FULL_CTA",en.FULL_CTA_OPTION="FULL_CTA_OPTION",en.HEADER_BIDDING="HEADER_BIDDING",en.INCENTIVIZED="INCENTIVIZED",en.INCENTIVIZED_BODY_TEXT="INCENTIVIZED_BODY_TEXT",en.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS="INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS",en.INCENTIVIZED_CLOSE_TEXT="INCENTIVIZED_CLOSE_TEXT",en.INCENTIVIZED_CONTINUE_TEXT="INCENTIVIZED_CONTINUE_TEXT",en.INCENTIVIZED_TITLE_TEXT="INCENTIVIZED_TITLE_TEXT",en.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY="IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY",en.IS_RUNNING_INSIDE_EMBED="IS_RUNNING_INSIDE_EMBED",en.IS_STAFF_DEVICE_BID="IS_STAFF_DEVICE_BID",en.MAIN_MANIFEST="MAIN_MANIFEST",en.MAIN_STREAM="MAIN_STREAM",en.MAIN_VIDEO="MAIN_VIDEO",en.MAX_AD_DURATION="MAX_AD_DURATION",en.MEDIATION_NAME="MEDIATION_NAME",en.NAUTILUS_VERSION="NAUTILUS_VERSION",en.OBSERVABILITY="OBSERVABILITY",en.OBSERVED_EXPERIMENTS="OBSERVED_EXPERIMENTS",en.OM_ENABLED="OM_ENABLED",en.OM_SDK_DATA="OM_SDK_DATA",en.ORIGINAL_VIDEO_URL="ORIGINAL_VIDEO_URL",en.PICTURE_IN_PICTURE="PICTURE_IN_PICTURE",en.PLACEMENT_TYPE="PLACEMENT_TYPE",en.PLATFORM="PLATFORM",en.REAL_START_MUTED="REAL_START_MUTED",en.SDK_VERSION="SDK_VERSION",en.SESSION_ID="SESSION_ID",en.SHOW_EC_CLOSE_BUTTON_COUNTDOWN="SHOW_EC_CLOSE_BUTTON_COUNTDOWN",en.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN="SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN",en.SKOVERLAY_AUTO="SKOVERLAY_AUTO",en.SKOVERLAY_AUTO_CLOSE="SKOVERLAY_AUTO_CLOSE",en.SKOVERLAY_DELAY_SECONDS="SKOVERLAY_DELAY_SECONDS",en.SKOVERLAY_DISABLE_AUTO_MMP="SKOVERLAY_DISABLE_AUTO_MMP",en.SKOVERLAY_DISMISSIBLE="SKOVERLAY_DISMISSIBLE",en.SKOVERLAY_POSITION="SKOVERLAY_POSITION",en.SK_CTA_ONLY="SK_CTA_ONLY",en.SK_EC_CTA_ONLY="SK_EC_CTA_ONLY",en.SK_FSC="SK_FSC",en.START_MUTED="START_MUTED",en.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS="STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS",en.STREAM_CHUNK_0="STREAM_CHUNK_0",en.TPAT_PROGRESS_EVENTS="TPAT_PROGRESS_EVENTS",en.TRACK_0="TRACK_0",en.USER_AGENT="USER_AGENT",en.VIDEO_CLOSE_BUTTON_AS_SKIP="VIDEO_CLOSE_BUTTON_AS_SKIP",en.VIDEO_ENDCARD_CLICK_SPLIT="VIDEO_ENDCARD_CLICK_SPLIT",en.VIDEO_LOOPING="VIDEO_LOOPING",en.VIDEO_PROGRESS_BAR="VIDEO_PROGRESS_BAR",en.VIDEO_PROGRESS_BAR_COLOR="VIDEO_PROGRESS_BAR_COLOR",en.VIDEO_SHOW_CTA="VIDEO_SHOW_CTA",en.VUNGLE_PRIVACY_URL="VUNGLE_PRIVACY_URL",en.VX_ENDCARD="VX_ENDCARD",en.EC_HTML_PRELOAD="EC_HTML_PRELOAD",en.PUB_ID="PUB_ID",en.PLACEMENT_ID="PLACEMENT_ID";var L=e_;(ei=eh||(eh={}))[ei.ACCELERATE=0]="ACCELERATE",ei[ei.EDSP=1]="EDSP",ei[ei.UNKNOWN=2]="UNKNOWN";var P=eh,b=class extends a{static getServiceIdentifier(){return"PlacementTypeServiceInterface"}getPlacementType(){var e,t,n;let i=e=>{switch(e){case"banner":return ev.BANNER;case"mrec":return ev.MREC;case"fullscreen":return ev.FULLSCREEN;case"in_line":return ev.IN_LINE;default:return ev.UNKNOWN}},r=i(null!==(t=null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.getPlacementType())&&void 0!==t?t:"");return r!==ev.UNKNOWN?r:i(null!==(n=this.tokenService.get(L.PLACEMENT_TYPE))&&void 0!==n?n:"")}isMrec(){return this.getPlacementType()===ev.MREC}isBanner(){return this.getPlacementType()===ev.BANNER}isFullscreen(){return this.getPlacementType()===ev.FULLSCREEN}isInLine(){return this.getPlacementType()===ev.IN_LINE}getAdSource(){var e;if(!this.tokenService.has(L.AD_SOURCE)||void 0===this.tokenService.get(L.AD_SOURCE))return P.UNKNOWN;switch(null===(e=this.tokenService.get(L.AD_SOURCE))||void 0===e?void 0:e.toLowerCase()){case"":return P.UNKNOWN;case"accelerate":return P.ACCELERATE;default:return P.EDSP}}constructor(e=y(),t=R()){super(),this.tokenService=e,this.mraidService=t}},w=class{isGreaterThan(e){return this.major!==e.major?this.major>e.major:this.minor!==e.minor?this.minor>e.minor:this.patch>e.patch}isLessThan(e){return e.isGreaterThan(this)}isEqualTo(e){return e.major===this.major&&e.minor===this.minor&&e.patch===this.patch}isGreaterThanOrEqualTo(e){return this.isEqualTo(e)||this.isGreaterThan(e)}isLessThanOrEqualTo(e){return this.isEqualTo(e)||this.isLessThan(e)}toString(){return[this.major,this.minor,this.patch].join(".")}constructor(e){if(this.semanticVersion=e,this.major=0,this.minor=0,this.patch=0,!e)return;let[t,n,i]=e.replace(/-.*/,"").replace(/[^\d.]+/g,"").split(".").map((e=>parseInt(e,10)));t&&!Number.isNaN(t)&&(this.major=t),n&&!Number.isNaN(n)&&(this.minor=n),i&&!Number.isNaN(i)&&(this.patch=i)}},V=e=>decodeURIComponent(Array.prototype.map.call(atob(e),(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`)).join(""));(er=eT||(eT={})).iOS="iOS",er.Android="Android",er.Windows="Windows",er.Amazon="Amazon",er.Unknown="Unknown",(ea=eS||(eS={}))[ea.LANDSCAPE=0]="LANDSCAPE",ea[ea.PORTRAIT=1]="PORTRAIT",ea[ea.UNKNOWN=2]="UNKNOWN";class M extends a{static getServiceIdentifier(){return"EnvironmentServiceInterface"}getOperatingSystem(){var e,t,n,i;if(this.operatingSystem)return this.operatingSystem;let r=null===(n=this.mraidService)||void 0===n||null===(t=n.getMraidExt())||void 0===t||null===(e=t.getOS)||void 0===e?void 0:e.call(t);return r&&(this.operatingSystem=M.parseOperatingSystem(r),"Unknown"!==this.operatingSystem)||(this.operatingSystem=M.parseOperatingSystem(null!==(i=this.tokenService.get(L.PLATFORM))&&void 0!==i?i:"")),this.operatingSystem}static parseOperatingSystem(e){switch(e.trim().toLowerCase()){case"ios":return"iOS";case"android":return"Android";case"windows":return"Windows";case"amazon":return"Amazon";default:return"Unknown"}}getOsVersion(){var e,t;return this.osVersion||(this.osVersion=new w(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getOSVersion)||void 0===e?void 0:e.call(t))),this.osVersion}getSdkVersion(){var e,t;if(this.sdkVersion)return this.sdkVersion;let n=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getSDKVersion)||void 0===e?void 0:e.call(t);return void 0!==n&&"0.0.0"!==n||!this.tokenService.has(L.SDK_VERSION)?this.sdkVersion=new w(n):this.sdkVersion=new w(this.tokenService.get(L.SDK_VERSION)),this.sdkVersion}getMraidVersion(){var e,t;return this.mraidVersion||(this.mraidVersion=new w(null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getMraidVersion)||void 0===e?void 0:e.call(t))),this.mraidVersion}getBrowserVersion(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.version)&&void 0!==n?n:""}getBrowserName(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.browser)||void 0===e?void 0:e.name)&&void 0!==n?n:""}getDeviceModel(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.model)&&void 0!==n?n:""}getDeviceType(){var e,t,n;return null!==(n=null===(t=this.uaParserResult)||void 0===t||null===(e=t.device)||void 0===e?void 0:e.type)&&void 0!==n?n:""}getOrientation(){return window.outerHeight>window.outerWidth?1:window.outerHeight<window.outerWidth?0:2}getDeviceCountryCode(){var e;return null!==(e=this.tokenService.get(L.COUNTRY_CODE))&&void 0!==e?e:""}static isAffectedByStoreKitProductViewMaskIssue(e){if("iOS"!==e.getOperatingSystem())return!1;let t=e.getOsVersion();return t.isGreaterThanOrEqualTo(new w("17"))&&t.isLessThan(new w("17.1.1"))}constructor(e=y(),t=R()){super(),this.tokenService=e,this.mraidService=t;let n=e.get(L.USER_AGENT);if(n)try{this.uaParserResult=JSON.parse(V(n))}catch(e){}}}M.sdkSeven=new w("7"),(eo=ep||(ep={})).ERROR="error",eo.EVENT="event",(es=eg||(eg={})).AD_CLOSE="ad-close",es.AD_FEEDBACK="ad-feedback",es.AD_LOAD="ad-load",es.AD_LOAD_COMPLETE="ad-load-complete",es.AD_START="ad-start",es.ALTERNATIVE_VIEW="alternative-view",es.APP_STORE_DURATION="app-store-duration",es.CLICK_OCCURRED="click-occurred",es.CTA="cta",es.TEMPLATE_ERROR="template-error",es.FATAL_ERROR="fatal-error",es.FORFEIT_REWARD="forfeit-reward",es.FRUSTRATION_CLICKS="frustration-clicks",es.GRANT_REWARD="grant-reward",es.HLS_NOT_SUPPORTED="hls-not-supported",es.IMPRESSION="impression",es.INACTIVITY_OBSERVED="inactivity-observed",es.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE="interaction-after-close-button-visible",es.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND="open-storekit-product-view-command",es.PRIVACY_CTA="privacy-cta",es.SCENE_END="scene-end",es.SCENE_START="scene-start",es.STORE_KIT_OVERLAY="store-kit-overlay",es.STORE_KIT_OVERLAY_PREPARE_ERROR="store-kit-overlay-prepare-error",es.UNKNOWN_MRAID_COMMAND="unknown-mraid-command",es.VIDEO_SKIP_TO_ENDCARD="video-skip-to-endcard",es.VIDEO_START="video-start",es.WEB_VITALS_FIRST_CONTENTFUL_PAINT="web-vitals-first-contentful-paint",es.WEB_VITALS_INTERACTION_TO_NEXT_PAINT="web-vitals-interaction-to-next-paint",es.WEB_VITALS_LARGEST_CONTENTFUL_PAINT="web-vitals-largest-contentful-paint",es.WEB_VITALS_TIME_TO_FIRST_BYTE="web-vitals-time-to-first-byte",(el=eC||(eC={})).RESOURCE="resource",el.PLAYABLE="playable",el.TEMPLATE="template";var k=()=>[eg.AD_CLOSE,eg.AD_FEEDBACK,eg.AD_LOAD,eg.AD_LOAD_COMPLETE,eg.AD_START,eg.ALTERNATIVE_VIEW,eg.APP_STORE_DURATION,eg.CTA,eg.FATAL_ERROR,eg.FRUSTRATION_CLICKS,eg.GRANT_REWARD,eg.HLS_NOT_SUPPORTED,eg.IMPRESSION,eg.INACTIVITY_OBSERVED,eg.PRIVACY_CTA,eg.SCENE_END,eg.SCENE_START,eg.STORE_KIT_OVERLAY_PREPARE_ERROR,eg.TEMPLATE_ERROR,eg.UNKNOWN_MRAID_COMMAND,eg.VIDEO_SKIP_TO_ENDCARD,eg.VIDEO_START,eg.WEB_VITALS_FIRST_CONTENTFUL_PAINT,eg.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,eg.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,eg.WEB_VITALS_TIME_TO_FIRST_BYTE];const U="Unable to load img resource",B="video load fail after retry",H="notify fatal error after video load fail",W="video load fail with no retry",x="video does not play after 10s",F="video play fail after 30s",K="video failed to play",Y=[B,H,W,x,F,K,U];var G=()=>{let e=r.getInstance(),t=M.getServiceIdentifier();return e.get(t)},j=()=>{let e=r.getInstance(),t=b.getServiceIdentifier();return e.get(t)},X=(e,t)=>{let n=`context_${t}`;return r.getInstance().has(n)||r.getInstance().bind(n,e),{getValue:()=>r.getInstance().get(n),setValue:e=>{r.getInstance().bind(n,e)}}},z=X({scene:void 0},"SceneContext"),$=()=>{var e;return null===(e=z.getValue())||void 0===e?void 0:e.scene},Z=()=>{let e=r.getInstance(),t=l.getServiceIdentifier();return e.get(t)},q=()=>Z();(ed=eI||(eI={})).MINIMIZED="minimized",ed.MAXIMIZED="maximized";var Q=eI;(ec=eO||(eO={})).APP_STORE_OPEN="APP_STORE_OPEN",ec.APP_STORE_CLOSE="APP_STORE_CLOSE";var J,ee,et,en,ei,er,ea,eo,es,el,ed,ec,eu,eE,ev,e_,eh,eT,eS,ep,eg,eC,eI,eO,eA,ef,em,eN,eD,eR,ey,eL,eP,eb,ew,eV,eM=eO,ek=(e,t=q())=>{let n=t.getActivityEventPairs("viewability",Q.MINIMIZED,Q.MAXIMIZED),i=0;n.forEach((e=>{i+=e[1].timestamp-e[0].timestamp}));let r=t.getActivityEventPairs("store-kit-product-view",eM.APP_STORE_OPEN,eM.APP_STORE_CLOSE),a=0;return r.forEach((e=>{a+=e[1].timestamp-e[0].timestamp})),Date.now()-e-i+a},eU=class extends a{static getServiceIdentifier(){return"ObservabilityServiceInterface"}init(e){this.observability=e(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.injectedGetCurrentScene,this.injectedGetAdDuration),this.isObserved=this.observability.isObserved()}pushEvent(e){if(this.isObserved&&this.singleEventsToAccept.includes(e.name)){var t;let n=e.name;null===(t=this.observability)||void 0===t||t.pushEvent(n,e)}}pushError(e,t){var n;this.isObserved&&(null===(n=this.observability)||void 0===n||n.pushError(e,{error_source:this.getErrorSource(e,t)}))}getErrorSource(e,t){var n,i;let r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e,a=null!==(i=null==e?void 0:e.error_source)&&void 0!==i?i:eC.TEMPLATE;return(null==t?void 0:t.error_source)&&(a=t.error_source),(Y.includes(r)||/(Failed to load|Unable to load).*/i.test(r))&&(a=eC.RESOURCE),a}constructor(e=y(),t=G(),n=j(),i=q(),r=$,a=ek,o=k()){super(),this.tokenService=e,this.environmentService=t,this.placementTypeService=n,this.reportingService=i,this.injectedGetCurrentScene=r,this.injectedGetAdDuration=a,this.singleEventsToAccept=o,this.isObserved=!1}},eB=class extends a{isViewable(){var e;return this.viewableIsSet?this.viewable:!!(null===(e=this.mraidService.getMraid())||void 0===e?void 0:e.isViewable())}resetViewable(){this.viewable=!1,this.viewableIsSet=!1}setViewable(e){this.viewable=e,this.viewableIsSet=!0}static getServiceIdentifier(){return"ViewableServiceInterface"}constructor(e=R()){super(),this.mraidService=e,this.viewable=!1,this.viewableIsSet=!1}},eH={},eW=[],ex=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,eF=Array.isArray;function eK(e,t){for(var n in t)e[n]=t[n];return e}function eY(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function eG(e,t,n){var i,r,a,o={};for(a in t)"key"==a?i=t[a]:"ref"==a?r=t[a]:o[a]=t[a];if(arguments.length>2&&(o.children=arguments.length>3?eA.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===o[a]&&(o[a]=e.defaultProps[a]);return ej(e,o,i,r,null)}function ej(e,t,n,i,r){var a={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==r?++em:r,__i:-1,__u:0};return null==r&&null!=ef.vnode&&ef.vnode(a),a}function eX(e){return e.children}function ez(e,t){this.props=e,this.context=t}function e$(e,t){if(null==t)return e.__?e$(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?e$(e):null}function eZ(e){(!e.__d&&(e.__d=!0)&&eD.push(e)&&!eq.__r++||eR!==ef.debounceRendering)&&((eR=ef.debounceRendering)||ey)(eq)}function eq(){for(var e,t,n,i,r,a,o=1;eD.length;)eD.length>o&&eD.sort(eL),e=eD.shift(),o=eD.length,e.__d&&(t=void 0,i=(n=e.__v).__e,r=[],a=[],e.__P&&((t=eK({},n)).__v=n.__v+1,ef.vnode&&ef.vnode(t),e2(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,r,null==i?e$(n):i,!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,e3(r,t,a),t.__e!=i&&function e(t){var n,i;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if(null!=(i=t.__k[n])&&null!=i.__e){t.__e=t.__c.base=i.__e;break}return e(t)}}(t)));eq.__r=0}function eQ(e,t,n,i,r,a,o,s,l,d,c){var u,E,v,_,h,T,S=i&&i.__k||eW,p=t.length;for(l=function(e,t,n,i,r){var a,o,s,l,d,c=n.length,u=c,E=0;for(e.__k=Array(r),a=0;a<r;a++)null!=(o=t[a])&&"boolean"!=typeof o&&"function"!=typeof o?(l=a+E,(o=e.__k[a]="string"==typeof o||"number"==typeof o||"bigint"==typeof o||o.constructor==String?ej(null,o,null,null,null):eF(o)?ej(eX,{children:o},null,null,null):void 0===o.constructor&&o.__b>0?ej(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=e,o.__b=e.__b+1,s=null,-1!==(d=o.__i=function(e,t,n,i){var r,a,o=e.key,s=e.type,l=t[n];if(null===l&&null==e.key||l&&o==l.key&&s===l.type&&!(2&l.__u))return n;if(i>(null==l||2&l.__u?0:1))for(r=n-1,a=n+1;r>=0||a<t.length;){if(r>=0){if((l=t[r])&&!(2&l.__u)&&o==l.key&&s===l.type)return r;r--}if(a<t.length){if((l=t[a])&&!(2&l.__u)&&o==l.key&&s===l.type)return a;a++}}return-1}(o,n,l,u))&&(u--,(s=n[d])&&(s.__u|=2)),null==s||null===s.__v?(-1==d&&(r>c?E--:r<c&&E++),"function"!=typeof o.type&&(o.__u|=4)):d!=l&&(d==l-1?E--:d==l+1?E++:(d>l?E--:E++,o.__u|=4))):e.__k[a]=null;if(u)for(a=0;a<c;a++)null!=(s=n[a])&&!(2&s.__u)&&(s.__e==i&&(i=e$(s)),function e(t,n,i){var r,a;if(ef.unmount&&ef.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||e5(r,null,n)),null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){ef.__e(e,n)}r.base=r.__P=null}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&e(r[a],n,i||"function"!=typeof t.type);i||eY(t.__e),t.__c=t.__=t.__e=void 0}(s,s));return i}(n,t,S,l,p),u=0;u<p;u++)null!=(v=n.__k[u])&&(E=-1===v.__i?eH:S[v.__i]||eH,v.__i=u,T=e2(e,v,E,r,a,o,s,l,d,c),_=v.__e,v.ref&&E.ref!=v.ref&&(E.ref&&e5(E.ref,null,v),c.push(v.ref,v.__c||_,v)),null==h&&null!=_&&(h=_),4&v.__u||E.__k===v.__k?l=function e(t,n,i){var r,a;if("function"==typeof t.type){for(r=t.__k,a=0;r&&a<r.length;a++)r[a]&&(r[a].__=t,n=e(r[a],n,i));return n}t.__e!=n&&(n&&t.type&&!i.contains(n)&&(n=e$(t)),i.insertBefore(t.__e,n||null),n=t.__e);do{n=n&&n.nextSibling}while(null!=n&&8==n.nodeType);return n}(v,l,e):"function"==typeof v.type&&void 0!==T?l=T:_&&(l=_.nextSibling),v.__u&=-7);return n.__e=h,l}function eJ(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||ex.test(t)?n:n+"px"}function e0(e,t,n,i,r){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||eJ(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||eJ(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(eP,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?i?n.t=i.t:(n.t=eb,e.addEventListener(t,a?eV:ew,a)):e.removeEventListener(t,a?eV:ew,a);else{if("http://www.w3.org/2000/svg"==r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function e1(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.u)t.u=eb++;else if(t.u<n.t)return;return n(ef.event?ef.event(t):t)}}}function e2(e,t,n,i,r,a,o,s,l,d){var c,u,E,v,_,h,T,S,p,g,C,I,O,A,f,m,N,L=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),a=[s=t.__e=n.__e]),(c=ef.__b)&&c(t);e:if("function"==typeof L)try{if(S=t.props,p="prototype"in L&&L.prototype.render,g=(c=L.contextType)&&i[c.__c],C=c?g?g.props.value:c.__:i,n.__c?T=(u=t.__c=n.__c).__=u.__E:(p?t.__c=u=new L(S,C):(t.__c=u=new ez(S,C),u.constructor=L,u.render=e4),g&&g.sub(u),u.props=S,u.state||(u.state={}),u.context=C,u.__n=i,E=u.__d=!0,u.__h=[],u._sb=[]),p&&null==u.__s&&(u.__s=u.state),p&&null!=L.getDerivedStateFromProps&&(u.__s==u.state&&(u.__s=eK({},u.__s)),eK(u.__s,L.getDerivedStateFromProps(S,u.__s))),v=u.props,_=u.state,u.__v=t,E)p&&null==L.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),p&&null!=u.componentDidMount&&u.__h.push(u.componentDidMount);else{if(p&&null==L.getDerivedStateFromProps&&S!==v&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(S,C),!u.__e&&(null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(S,u.__s,C)||t.__v==n.__v)){for(t.__v!=n.__v&&(u.props=S,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),I=0;I<u._sb.length;I++)u.__h.push(u._sb[I]);u._sb=[],u.__h.length&&o.push(u);break e}null!=u.componentWillUpdate&&u.componentWillUpdate(S,u.__s,C),p&&null!=u.componentDidUpdate&&u.__h.push((function(){u.componentDidUpdate(v,_,h)}))}if(u.context=C,u.props=S,u.__P=e,u.__e=!1,O=ef.__r,A=0,p){for(u.state=u.__s,u.__d=!1,O&&O(t),c=u.render(u.props,u.state,u.context),f=0;f<u._sb.length;f++)u.__h.push(u._sb[f]);u._sb=[]}else do{u.__d=!1,O&&O(t),c=u.render(u.props,u.state,u.context),u.state=u.__s}while(u.__d&&++A<25);u.state=u.__s,null!=u.getChildContext&&(i=eK(eK({},i),u.getChildContext())),p&&!E&&null!=u.getSnapshotBeforeUpdate&&(h=u.getSnapshotBeforeUpdate(v,_)),m=c,null!=c&&c.type===eX&&null==c.key&&(m=function e(t){return"object"!=typeof t||null==t?t:eF(t)?t.map(e):eK({},t)}(c.props.children)),s=eQ(e,eF(m)?m:[m],t,n,i,r,a,o,s,l,d),u.base=t.__e,t.__u&=-161,u.__h.length&&o.push(u),T&&(u.__E=u.__=null)}catch(e){if(t.__v=null,l||null!=a)if(e.then){for(t.__u|=l?160:128;s&&8==s.nodeType&&s.nextSibling;)s=s.nextSibling;a[a.indexOf(s)]=null,t.__e=s}else for(N=a.length;N--;)eY(a[N]);else t.__e=n.__e,t.__k=n.__k;ef.__e(e,t,n)}else null==a&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=function(e,t,n,i,r,a,o,s,l){var d,c,u,E,v,_,h,T=n.props,S=t.props,p=t.type;if("svg"==p?r="http://www.w3.org/2000/svg":"math"==p?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=a)for(d=0;d<a.length;d++)if((v=a[d])&&"setAttribute"in v==!!p&&(p?v.localName==p:3==v.nodeType)){e=v,a[d]=null;break}if(null==e){if(null==p)return document.createTextNode(S);e=document.createElementNS(r,p,S.is&&S),s&&(ef.__m&&ef.__m(t,a),s=!1),a=null}if(null===p)T===S||s&&e.data===S||(e.data=S);else{if(a=a&&eA.call(e.childNodes),T=n.props||eH,!s&&null!=a)for(T={},d=0;d<e.attributes.length;d++)T[(v=e.attributes[d]).name]=v.value;for(d in T)if(v=T[d],"children"==d);else if("dangerouslySetInnerHTML"==d)u=v;else if(!(d in S)){if("value"==d&&"defaultValue"in S||"checked"==d&&"defaultChecked"in S)continue;e0(e,d,null,v,r)}for(d in S)v=S[d],"children"==d?E=v:"dangerouslySetInnerHTML"==d?c=v:"value"==d?_=v:"checked"==d?h=v:s&&"function"!=typeof v||T[d]===v||e0(e,d,v,T[d],r);if(c)s||u&&(c.__html===u.__html||c.__html===e.innerHTML)||(e.innerHTML=c.__html),t.__k=[];else if(u&&(e.innerHTML=""),eQ("template"===t.type?e.content:e,eF(E)?E:[E],t,n,i,"foreignObject"==p?"http://www.w3.org/1999/xhtml":r,a,o,a?a[0]:n.__k&&e$(n,0),s,l),null!=a)for(d=a.length;d--;)eY(a[d]);s||(d="value","progress"==p&&null==_?e.removeAttribute("value"):void 0===_||_===e[d]&&("progress"!=p||_)&&("option"!=p||_===T[d])||e0(e,d,_,T[d],r),d="checked",void 0!==h&&h!==e[d]&&e0(e,d,h,T[d],r))}return e}(n.__e,t,n,i,r,a,o,l,d);return(c=ef.diffed)&&c(t),128&t.__u?void 0:s}function e3(e,t,n){for(var i=0;i<n.length;i++)e5(n[i],n[++i],n[++i]);ef.__c&&ef.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){ef.__e(e,t.__v)}}))}function e5(e,t,n){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==t||(e.__u=e(t))}else e.current=t}catch(e){ef.__e(e,n)}}function e4(e,t,n){return this.constructor(e,n)}eA=eW.slice,ef={__e:function(e,t,n,i){for(var r,a,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((a=r.constructor)&&null!=a.getDerivedStateFromError&&(r.setState(a.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,i||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},em=0,eN=function(e){return null!=e&&null==e.constructor},ez.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=eK({},this.state),"function"==typeof e&&(e=e(eK({},n),this.props)),e&&eK(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),eZ(this))},ez.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),eZ(this))},ez.prototype.render=eX,eD=[],ey="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,eL=function(e,t){return e.__v.__b-t.__v.__b},eq.__r=0,eP=/(PointerCapture)$|Capture$/i,eb=0,ew=e1(!1),eV=e1(!0);var e6,e8,e7,e9,te=0,tt=[],tn=ef,ti=tn.__b,tr=tn.__r,ta=tn.diffed,to=tn.__c,ts=tn.unmount,tl=tn.__;function td(e,t){tn.__h&&tn.__h(e8,e,te||t),te=0;var n=e8.__H||(e8.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function tc(e,t,n){var i=td(e6++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):tg(void 0,t),function(e){var t=i.__N?i.__N[0]:i.__[0],n=i.t(t,e);t!==n&&(i.__N=[n,i.__[1]],i.__c.setState({}))}],i.__c=e8,!e8.__f)){var r=function(e,t,n){if(!i.__c.__H)return!0;var r=i.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!a||a.call(this,e,t,n);var o=i.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(o=!0)}})),a&&a.call(this,e,t,n)||o};e8.__f=!0;var a=e8.shouldComponentUpdate,o=e8.componentWillUpdate;e8.componentWillUpdate=function(e,t,n){if(this.__e){var i=a;a=void 0,r(e,t,n),a=i}o&&o.call(this,e,t,n)},e8.shouldComponentUpdate=r}return i.__N||i.__}function tu(e,t){var n=td(e6++,3);!tn.__s&&tp(n.__H,t)&&(n.__=e,n.u=t,e8.__H.__h.push(n))}function tE(e){return te=5,tv((function(){return{current:e}}),[])}function tv(e,t){var n=td(e6++,7);return tp(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function t_(){for(var e;e=tt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(tT),e.__H.__h.forEach(tS),e.__H.__h=[]}catch(t){e.__H.__h=[],tn.__e(t,e.__v)}}tn.__b=function(e){e8=null,ti&&ti(e)},tn.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),tl&&tl(e,t)},tn.__r=function(e){tr&&tr(e),e6=0;var t=(e8=e.__c).__H;t&&(e7===e8?(t.__h=[],e8.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(tT),t.__h.forEach(tS),t.__h=[],e6=0)),e7=e8},tn.diffed=function(e){ta&&ta(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==tt.push(t)&&e9===tn.requestAnimationFrame||((e9=tn.requestAnimationFrame)||function(e){var t,n=function(){clearTimeout(i),th&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);th&&(t=requestAnimationFrame(n))})(t_)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),e7=e8=null},tn.__c=function(e,t){t.some((function(e){try{e.__h.forEach(tT),e.__h=e.__h.filter((function(e){return!e.__||tS(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],tn.__e(n,e.__v)}})),to&&to(e,t)},tn.unmount=function(e){ts&&ts(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{tT(e)}catch(e){t=e}})),n.__H=void 0,t&&tn.__e(t,n.__v))};var th="function"==typeof requestAnimationFrame;function tT(e){var t=e8,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),e8=t}function tS(e){var t=e8;e.__c=e.__(),e8=t}function tp(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function tg(e,t){return"function"==typeof t?t(e):t}var tC=Symbol.for("preact-signals");function tI(){if(tm>1)tm--;else{for(var e,t=!1;void 0!==tf;){var n=tf;for(tf=void 0,tN++;void 0!==n;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&tP(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=i}}if(tN=0,tm--,t)throw e}}function tO(e){if(tm>0)return e();tm++;try{return e()}finally{tI()}}var tA=void 0,tf=void 0,tm=0,tN=0,tD=0;function tR(e){if(void 0!==tA){var t=e.n;if(void 0===t||t.t!==tA)return t={i:0,S:e,p:tA.s,n:void 0,t:tA,e:void 0,x:void 0,r:t},void 0!==tA.s&&(tA.s.n=t),tA.s=t,e.n=t,32&tA.f&&e.S(t),t;if(-1===t.i)return t.i=0,void 0!==t.n&&(t.n.p=t.p,void 0!==t.p&&(t.p.n=t.n),t.p=tA.s,t.n=void 0,tA.s.n=t,tA.s=t),t}}function ty(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}function tL(e){return new ty(e)}function tP(e){for(var t=e.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function tb(e){for(var t=e.s;void 0!==t;t=t.n){var n=t.S.n;if(void 0!==n&&(t.r=n),t.S.n=t,t.i=-1,void 0===t.n){e.s=t;break}}}function tw(e){for(var t=e.s,n=void 0;void 0!==t;){var i=t.p;-1===t.i?(t.S.U(t),void 0!==i&&(i.n=t.n),void 0!==t.n&&(t.n.p=i)):n=t,t.S.n=t.r,void 0!==t.r&&(t.r=void 0),t=i}e.s=n}function tV(e){ty.call(this,void 0),this.x=e,this.s=void 0,this.g=tD-1,this.f=4}function tM(e){var t=e.u;if(e.u=void 0,"function"==typeof t){tm++;var n=tA;tA=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,tk(e),t}finally{tA=n,tI()}}}function tk(e){for(var t=e.s;void 0!==t;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,tM(e)}function tU(e){if(tA!==this)throw Error("Out-of-order effect");tw(this),tA=e,this.f&=-2,8&this.f&&tk(this),tI()}function tB(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}function tH(e){var t=new tB(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}ty.prototype.brand=tC,ty.prototype.h=function(){return!0},ty.prototype.S=function(e){this.t!==e&&void 0===e.e&&(e.x=this.t,void 0!==this.t&&(this.t.e=e),this.t=e)},ty.prototype.U=function(e){if(void 0!==this.t){var t=e.e,n=e.x;void 0!==t&&(t.x=n,e.e=void 0),void 0!==n&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}},ty.prototype.subscribe=function(e){var t=this;return tH((function(){var n=t.value,i=tA;tA=void 0;try{e(n)}finally{tA=i}}))},ty.prototype.valueOf=function(){return this.value},ty.prototype.toString=function(){return this.value+""},ty.prototype.toJSON=function(){return this.value},ty.prototype.peek=function(){var e=tA;tA=void 0;try{return this.value}finally{tA=e}},Object.defineProperty(ty.prototype,"value",{get:function(){var e=tR(this);return void 0!==e&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(tN>100)throw Error("Cycle detected");this.v=e,this.i++,tD++,tm++;try{for(var t=this.t;void 0!==t;t=t.x)t.t.N()}finally{tI()}}}}),(tV.prototype=new ty).h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f)||(this.f&=-5,this.g===tD))return!0;if(this.g=tD,this.f|=1,this.i>0&&!tP(this))return this.f&=-2,!0;var e=tA;try{tb(this),tA=this;var t=this.x();(16&this.f||this.v!==t||0===this.i)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return tA=e,tw(this),this.f&=-2,!0},tV.prototype.S=function(e){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t)}ty.prototype.S.call(this,e)},tV.prototype.U=function(e){if(void 0!==this.t&&(ty.prototype.U.call(this,e),void 0===this.t)){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t)}},tV.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;void 0!==e;e=e.x)e.t.N()}},Object.defineProperty(tV.prototype,"value",{get:function(){if(1&this.f)throw Error("Cycle detected");var e=tR(this);if(this.h(),void 0!==e&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),tB.prototype.c=function(){var e=this.S();try{if(8&this.f||void 0===this.x)return;var t=this.x();"function"==typeof t&&(this.u=t)}finally{e()}},tB.prototype.S=function(){if(1&this.f)throw Error("Cycle detected");this.f|=1,this.f&=-9,tM(this),tb(this),tm++;var e=tA;return tA=this,tU.bind(this,e)},tB.prototype.N=function(){2&this.f||(this.f|=2,this.o=tf,tf=this)},tB.prototype.d=function(){this.f|=8,1&this.f||tk(this)};var tW,tx,tF=[],tK=[];function tY(e,t){ef[e]=t.bind(null,ef[e]||function(){})}function tG(e){tx&&tx(),tx=e&&e.S()}function tj(e){var t=this,n=e.data,i=tX(n);i.value=n;var r=tv((function(){for(var e=t.__v;e=e.__;)if(e.__c){e.__c.__$f|=4;break}var n=new tV((function(){var e=i.value.value;return 0===e?0:!0===e?"":e||""})),r=new tV((function(){return!eN(n.value)})),a=tH((function(){if(this.N=tJ,r.value){var e=n.value;t.base&&3===t.base.nodeType&&(t.base.data=e)}})),o=t.__$u.d;return t.__$u.d=function(){a(),o.call(this)},[r,n]}),[]),a=r[0],o=r[1];return a.value?o.peek():o.value}function tX(e){return tv((function(){return tL(e)}),[])}tH((function(){tW=this.N}))(),tj.displayName="_st",Object.defineProperties(ty.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:tj},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),tY("__b",(function(e,t){if("string"==typeof t.type){var n,i=t.props;for(var r in i)if("children"!==r){var a=i[r];a instanceof ty&&(n||(t.__np=n={}),n[r]=a,i[r]=a.peek())}}e(t)})),tY("__r",(function(e,t){tG();var n,i,r=t.__c;r&&(r.__$f&=-2,void 0===(i=r.__$u))&&(r.__$u=(tH((function(){n=this})),n.c=function(){r.__$f|=1,r.setState({})},i=n)),tG(i),e(t)})),tY("__e",(function(e,t,n,i){tG(),e(t,n,i)})),tY("diffed",(function(e,t){if(tG(),"string"==typeof t.type&&(n=t.__e)){var n,i=t.__np,r=t.props;if(i){var a=n.U;if(a)for(var o in a){var s=a[o];void 0===s||o in i||(s.d(),a[o]=void 0)}else a={},n.U=a;for(var l in i){var d=a[l],c=i[l];void 0===d?(d=function(e,t,n,i){var r=t in e&&void 0===e.ownerSVGElement,a=tL(n);return{o:function(e,t){a.value=e,i=t},d:tH((function(){this.N=tJ;var n=a.value.value;i[t]!==n&&(i[t]=n,r?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))}))}}(n,l,c,r),a[l]=d):d.o(c,r)}}}e(t)})),tY("unmount",(function(e,t){if("string"==typeof t.type){var n=t.__e;if(n){var i=n.U;if(i)for(var r in n.U=void 0,i){var a=i[r];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)})),tY("__h",(function(e,t,n,i){(i<3||9===i)&&(t.__$f|=2),e(t,n,i)})),ez.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,i=n&&void 0!==n.s;for(var r in t)return!0;if(this.__f||"boolean"==typeof this.u&&!0===this.u){var a=2&this.__$f;if(!(i||a||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if("__source"!==o&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};var tz="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,t$=function(e){queueMicrotask((function(){queueMicrotask(e)}))};function tZ(){tO((function(){for(var e;e=tF.shift();)tW.call(e)}))}function tq(){1===tF.push(this)&&(ef.requestAnimationFrame||tz)(tZ)}function tQ(){tO((function(){for(var e;e=tK.shift();)tW.call(e)}))}function tJ(){1===tK.push(this)&&(ef.requestAnimationFrame||t$)(tQ)}function t0(e){var t=tE(e);t.current=e,tu((function(){return tH((function(){return this.N=tq,t.current()}))}),[])}var t1=class extends a{setMutedSignal(e){this.mutedSignal.value=e}getMutedSignal(){return this.mutedSignal}isMuted(){return this.mutedSignal.value}mute(){this.setMutedSignal(!0)}unmute(){this.setMutedSignal(!1)}static getServiceIdentifier(){return"MuteServiceInterface"}constructor(){super(),this.mutedSignal=tL(!1)}},t2=()=>{let e=r.getInstance(),t=g.getServiceIdentifier();return e.get(t)},t3=(e,t)=>(null!=t?t:t2()).interpreterMap.get(e);(Ew=vQ||(vQ={})).SHOW="SHOW",Ew.PRELOAD="PRELOAD",Ew.CANCEL_PRELOAD="CANCEL_PRELOAD",(EV=vJ||(vJ={})).SHOWING="SHOWING",EV.PRELOADING="PRELOADING",EV.INITIAL="INITIAL",(EM=v0||(v0={})).INITIALIZE_PRELOAD="initializePreload",EM.EMIT_SHOW="emitShow",EM.MARK_PRELOAD_SUCCESS="markPreloadSuccess",EM.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange",EM.FLUSH_MRAID_EVENTS="flushMraidEvents",EM.CANCEL_PRELOAD="cancelPreload",(Ek=v1||(v1={})).MUTE_SOUND="muteSound",Ek.UN_MUTE_SOUND="unMuteSound",Ek.EMIT_MUTED="emitMuted",Ek.EMIT_VIDEO_ERROR="emitVideoError",Ek.CLOSE_VIDEO="closeVideo",Ek.CLOSE_VIDEO_CURRENT_SCENE="closeVideoCurrentScene",Ek.CLOSE_PICTURE_IN_PICTURE="closePictureInPicture",Ek.PAUSE_VIDEO="pauseVideo",Ek.PLAY_VIDEO="playVideo",Ek.POSTROLL_VIEW="postrollView",Ek.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE="sendEventVideoSkipToNextScene",Ek.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT="setPictureInPictureVideoContext",Ek.SHOW_PICTURE_IN_PICTURE="showPictureInPicture",Ek.SEND_FATAL_VIDEO_ERROR="sendFatalVideoError";var t5=v1;(EU=v2||(v2={})).CLOSE_BUTTON_MOUNT="CLOSE_BUTTON_MOUNT",EU.CLOSE_BUTTON_UNMOUNT="CLOSE_BUTTON_UNMOUNT",EU.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",EU.CLOSE_BUTTON_WILL_SHOW="CLOSE_BUTTON_WILL_SHOW",EU.CLOSE_PICTURE_IN_PICTURE="CLOSE_PICTURE_IN_PICTURE",EU.COMPLETE="COMPLETE",EU.LAST_CHANCE_ENDCARD="LAST_CHANCE_ENDCARD",EU.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",EU.MUTE="MUTE",EU.NEXT="NEXT",EU.PRIVACY_LOGO_SHOW="PRIVACY_LOGO_SHOW",EU.PRIVACY_LOGO_HIDE="PRIVACY_LOGO_HIDE",EU.PRIVACY_BOTTOM_DRAWER_OPEN="PRIVACY_BOTTOM_DRAWER_OPEN",EU.PRIVACY_BOTTOM_DRAWER_CLOSE="PRIVACY_BOTTOM_DRAWER_CLOSE",EU.PRODUCT_VIEW_CLOSE="PRODUCT_VIEW_CLOSE",EU.OPEN_PRIVACY_PAGE="OPEN_PRIVACY_PAGE",EU.UNMUTE="UNMUTE",EU.VIDEO_ERROR="VIDEO_ERROR",EU.VIDEO_FAILURE="VIDEO_FAILURE",EU.CLOSE="CLOSE",EU.CREATIVE_VIEW="CREATIVE_VIEW";var t4=class{getObservabilityData(){return{}}getTransitions(){return this.transitions}addTransition(e){return this.transitions.push(e),this}addOrUpdateTransition(e){let t=this.getTransitions().find((t=>t.name===e.name));if(t){t.scene=e.scene,t.cond=e.cond;let n={};t.actions.forEach((e=>{n[e.name]=!0}));let i=e.actions.filter((e=>!n[e.name]));t.actions.push(...i)}else this.addTransition(e);return this}getEntryActions(){return this.entryActions}addEntryAction(e){return this.entryActions.push(e),this}getExitActions(){return this.exitActions}addExitAction(e){return this.exitActions.push(e),this}isAlternative(){return this.alternative}getEventStreams(){return{}}static getInstances(){return[]}constructor(){this.transitions=[],this.entryActions=[],this.exitActions=[],this.alternative=!1}};(EB=v3||(v3={})).closed="closed",EB.composite="composite",EB.endcard="endcard",EB.gdpr="gdpr",EB.image="image",EB.video="video",(EH=v5||(v5={}))[EH.OFF=0]="OFF",EH[EH.SKO=1]="SKO",EH[EH.SKPV=2]="SKPV",EH[EH.STATIC_URL=3]="STATIC_URL",(EW=v4||(v4={})).CLICK_THROUGH="clickThrough",EW.COMPLETE="complete",EW.CREATIVE_VIEW="creativeView",EW.FIRST_QUARTILE="firstQuartile",EW.MIDPOINT="midpoint",EW.MUTE="mute",EW.PAUSE="pause",EW.RESUME="resume",EW.SKIP="skip",EW.START="start",EW.THIRD_QUARTILE="thirdQuartile",EW.UNMUTE="unmute";var t6=()=>{let e=r.getInstance(),t=m.getServiceIdentifier();return e.get(t)};(Ex=v6||(v6={})).PAUSE_INTERVALS="pauseAllIntervals",Ex.START_INTERVALS="startAllIntervals";var t8=e=>({pauseAllIntervals:()=>{(e||t6()).pauseAll()},startAllIntervals:()=>{(e||t6()).startAll()}}),t7=()=>{let e=r.getInstance(),t=D.getServiceIdentifier();return e.get(t)};(EF=v8||(v8={})).STANDBY_TIMERS="standbyTimers",EF.WAKE_TIMERS="wakeTimers";var t9=e=>({standbyTimers:()=>{(e||t7()).standby()},wakeTimers:()=>{(e||t7()).wake()}});(EK=v7||(v7={})).OPEN_PRIVACY_URL="openPrivacyUrl",EK.SET_PRIVACY_BUTTON_VISIBLE="setPrivacyButtonVisible",EK.SET_PRIVACY_BUTTON_HIDDEN="setPrivacyButtonHidden",EK.SET_PRIVACY_DRAWER_OPEN="setPrivacyDrawerOpen",EK.SET_PRIVACY_DRAWER_CLOSED="setPrivacyDrawerClosed",EK.TRIGGER_VIEWABLE_CHANGE="triggerViewableChange";var ne=v7;(EY=v9||(v9={})).CLOSE="CLOSE",EY.FINISH="FINISH",EY.INTERRUPT="INTERRUPT",EY.SET_ERROR="SET_ERROR",EY.SET_PREPARED="SET_PREPARED",EY.READY="READY",EY.RESUME="RESUME",EY.SET_DISPLAY_OPTIONS="SET_DISPLAY_OPTIONS",EY.SET_FALLBACK="SET_FALLBACK",EY.SET_VISIBLE="SET_VISIBLE",EY.SHOW="SHOW",EY.START_DELAY_SHOW="START_DELAY_SHOW",EY.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(EG=_e||(_e={})).CLOSING="CLOSING",EG.ERROR="ERROR",EG.DELAY_SHOW="DELAY_SHOW",EG.DELAY_SHOW_IMMEDIATE="DELAY_SHOW_IMMEDIATE",EG.DELAY_SHOW_INTERRUPTED="DELAY_SHOW_INTERRUPTED",EG.DELAY_SHOW_VISIBLE="DELAY_SHOW_VISIBLE",EG.FALLBACK="FALLBACK",EG.IDLE="IDLE",EG.INITIAL="INITIAL",EG.IMMEDIATE_SHOW="IMMEDIATE_SHOW",EG.IMMEDIATE_SHOW_VISIBLE="IMMEDIATE_SHOW_VISIBLE",EG.PREPARING="PREPARING",(Ej=_t||(_t={})).ASSIGN_DISPLAY_OPTIONS="ASSIGN_DISPLAY_OPTIONS",Ej.ASSIGN_FALLBACK="ASSIGN_FALLBACK",Ej.CLOSE_SKO="CLOSE_SKO",Ej.EMIT_OBSERVABILITY_EVENT="EMIT_OBSERVABILITY_EVENT",Ej.SHOW_FALLBACK="SHOW_FALLBACK",Ej.SHOW_SKO="SHOW_SKO",Ej.CANCEL_DELAY_SHOW="CANCEL_DELAY_SHOW";const nt=new w("6.4"),nn=new w("6"),ni=(e=G())=>e.getSdkVersion().isGreaterThanOrEqualTo(nt),nr=(e=G())=>e.getOperatingSystem()===eT.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nn);var na=(e=G())=>ni(e)&&nr(e);(EX=_n||(_n={})).SKPV="SKPV",EX.APP_STORE="APP_STORE",EX.OFF="OFF";var no=(e=G())=>{let t="APP_STORE";return na(e)&&(t="SKPV"),t},ns=class extends a{canOpen(){return[_e.IDLE,_e.FALLBACK].some((e=>this.interpreter.state.matches(e)))}close(){this.interpreter.send({type:v9.CLOSE})}fallback(){this.interpreter.state.context.fallback!==_n.OFF&&(this.interpreter.send({type:v9.SET_FALLBACK}),this.open())}finish(){this.interpreter.send({type:v9.FINISH})}getState(){return this.interpreter.state}init(){}interrupt(){this.interpreter.send({type:v9.INTERRUPT})}isIdle(){var e;return null!==(e=this.interpreter.state.matches(_e.IDLE))&&void 0!==e&&e}isInterrupted(){return[_e.CLOSING,_e.DELAY_SHOW_INTERRUPTED].some((e=>this.interpreter.state.matches(e)))}isOpen(){return[_e.DELAY_SHOW_IMMEDIATE,_e.DELAY_SHOW_VISIBLE,_e.IMMEDIATE_SHOW,_e.IMMEDIATE_SHOW_VISIBLE].some((e=>this.interpreter.state.matches(e)))}open(e){let t={type:v9.START_IMMEDIATE_SHOW,fallback:null==e?void 0:e.fallback};(null==e?void 0:e.delayed)&&(t.type=this.interpreter.state.matches(_e.DELAY_SHOW)?v9.SHOW:v9.START_DELAY_SHOW),this.interpreter.send(t)}resume(){this.interpreter.send({type:v9.RESUME})}setDisplayOptions(e){this.interpreter.send({type:v9.SET_DISPLAY_OPTIONS,displayOptions:e})}subscribe(e){return this.interpreter.subscribe(e)}static getServiceIdentifier(){return"StoreKitOverlayServiceInterface"}constructor(e,t={},n=t2()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nl=()=>{let e=r.getInstance(),t=ns.getServiceIdentifier();if(e.has(t))return e.get(t)};(Ez=_i||(_i={})).CLOSE_OVERLAY_VIEW="closeOverlayView",Ez.INTERRUPT_OVERLAY_VIEW="interruptOverlayView",Ez.RESUME_OVERLAY_VIEW="resumeOverlayView",Ez.SHOW_OVERLAY_VIEW="showOverlayView";var nd=(e=nl)=>({closeOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.close())},interruptOverlayView:()=>{let t=e();(null==t?void 0:t.isOpen())&&(null==t||t.interrupt())},resumeOverlayView:()=>{let t=e();(null==t?void 0:t.isInterrupted())&&(null==t||t.resume())},showOverlayView:()=>{let t=e();null!=t&&t.isOpen()||((null==t?void 0:t.isInterrupted())?null==t||t.resume():null==t||t.open())}});(E$=_r||(_r={})).START="start",E$.STOP="stop";var nc=_r;(_a||(_a={})).CLOSE_AD="CLOSE_AD";var nu=_a;(_o||(_o={})).CLOSE="close";var nE=_o,nv=(e=t7(),t=q())=>{e.destroyAll(),t.emit({type:"picture-in-picture",event:nE.CLOSE,fireOnlyOnce:!0}),t.emit({type:"heartbeat",event:nc.STOP}),t.emit({type:"close",event:nu.CLOSE_AD,fireOnlyOnce:!0})};(EZ=_s||(_s={})).CLOSE="CLOSE",EZ.OPEN="OPEN",EZ.PREPARE_FINISHED="PREPARE_FINISHED",EZ.PREPARE_SUCCESS="PREPARE_SUCCESS",EZ.READY="READY",EZ.SET_FALLBACK="SET_FALLBACK",(Eq=_l||(_l={})).FALLBACK="FALLBACK",Eq.HIDDEN="HIDDEN",Eq.INITIAL="INITIAL",Eq.PREPARING="PREPARING",Eq.SHOWING="SHOWING",Eq.DONE="DONE";var n_=class extends a{isDone(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_l.DONE))&&void 0!==t&&t}canOpen(){var e,t,n;return null!==(n=(null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_l.HIDDEN))||(null===(t=this.interpreter)||void 0===t?void 0:t.state.matches(_l.FALLBACK)))&&void 0!==n&&n}close(){var e;null===(e=this.interpreter)||void 0===e||e.send({type:_s.CLOSE})}fallback(){}init(){}isOpen(){var e,t;return null!==(t=null===(e=this.interpreter)||void 0===e?void 0:e.state.matches(_l.SHOWING))&&void 0!==t&&t}open(e){var t;this.hasFallback=e,null===(t=this.interpreter)||void 0===t||t.send({type:_s.OPEN})}subscribe(e){var t;return null===(t=this.interpreter)||void 0===t?void 0:t.subscribe(e)}static getServiceIdentifier(){return"ProductViewServiceInterface"}constructor(e,t={},n=t2()){super(),this.machineConfig=e,this.machineOptions=t,this.stateMachineService=n;let i=this.stateMachineService.createMachine(this.machineConfig,this.machineOptions);this.interpreter=this.stateMachineService.interpret(i),this.interpreter.start()}},nh=()=>{let e=r.getInstance(),t=n_.getServiceIdentifier();if(e.has(t))return e.get(t)},nT=(e=G())=>e.getSdkVersion().isLessThan(new w("7"))&&e.getOrientation()===eS.LANDSCAPE;const nS=new w("14"),np=new w("6.8.1"),ng=(e=G())=>e.getOperatingSystem()===eT.iOS&&e.getOsVersion().isGreaterThanOrEqualTo(nS),nC=(e=G())=>e.getSdkVersion().isGreaterThanOrEqualTo(np);var nI=(e=G(),t=j())=>ng(e)&&nC(e)&&!(t.isMrec()||t.isBanner()||t.isInLine());(EQ=_d||(_d={})).SHOW_PRODUCT_VIEW="showProductView",EQ.HIDE_PRODUCT_VIEW="hideProductView",EQ.END_AD_ON_PRODUCT_VIEW_CLOSE="endAdOnProductViewClose";const nO=()=>({showProductView:()=>{if(nT()&&nI()){let e=nl();return void((null==e?void 0:e.canOpen())&&e.open({fallback:_n.OFF}))}let e=nh();null==e||e.open(!1)},hideProductView:()=>{},endAdOnProductViewClose:()=>{G().getSdkVersion().isEqualTo(M.sdkSeven)&&na()&&Z().addEventHandler("viewability",((e,t)=>{t.event===Q.MAXIMIZED&&nv()}))}});var nA=()=>na()?nO():void 0;(EJ=_c||(_c={}))[EJ.CLOSE=0]="CLOSE",EJ[EJ.SKIP=1]="SKIP",(E0=_u||(_u={})).SET_CLOSE_BUTTON_VISIBLE="setCloseButtonVisible",E0.EMIT_CLOSE_BUTTON_SHOW="emitCloseButtonShow",E0.EMIT_CLOSE_BUTTON_CLICK="emitCloseButtonClick",E0.SET_CLOSE_BUTTON_HIDDEN="setCloseButtonHidden";var nf=_c;const nm={name:v2.PRIVACY_LOGO_SHOW,actions:[{name:ne.SET_PRIVACY_BUTTON_VISIBLE}]},nN={name:v2.PRIVACY_LOGO_HIDE,actions:[{name:ne.SET_PRIVACY_BUTTON_HIDDEN}]},nD=e=>({name:v2.PRIVACY_BOTTOM_DRAWER_OPEN,actions:e?[{name:ne.SET_PRIVACY_DRAWER_OPEN},{name:ne.TRIGGER_VIEWABLE_CHANGE},{name:t5.PAUSE_VIDEO},{name:v6.PAUSE_INTERVALS},{name:v8.STANDBY_TIMERS},{name:_i.INTERRUPT_OVERLAY_VIEW}]:[{name:ne.OPEN_PRIVACY_URL}]}),nR={name:v2.PRIVACY_BOTTOM_DRAWER_CLOSE,actions:[{name:t5.PLAY_VIDEO},{name:ne.SET_PRIVACY_DRAWER_CLOSED},{name:ne.TRIGGER_VIEWABLE_CHANGE},{name:v6.START_INTERVALS},{name:v8.WAKE_TIMERS},{name:_i.RESUME_OVERLAY_VIEW}]},ny={name:v2.OPEN_PRIVACY_PAGE,actions:[{name:ne.OPEN_PRIVACY_URL}]},nL={name:v2.PRODUCT_VIEW_CLOSE,actions:[{name:_d.END_AD_ON_PRODUCT_VIEW_CLOSE}]},nP={name:v2.CLOSE_BUTTON_MOUNT,actions:[{name:_u.SET_CLOSE_BUTTON_VISIBLE}]},nb={name:v2.CLOSE_BUTTON_UNMOUNT,actions:[{name:_u.SET_CLOSE_BUTTON_HIDDEN}]},nw={name:v2.CLOSE_BUTTON_CLICK,actions:[{name:_u.EMIT_CLOSE_BUTTON_CLICK}]},nV={name:v2.CLOSE_BUTTON_WILL_SHOW,actions:[{name:_u.EMIT_CLOSE_BUTTON_SHOW}]},nM={name:v2.CLOSE_PICTURE_IN_PICTURE,actions:[{name:t5.CLOSE_PICTURE_IN_PICTURE}]};var nk=function(e){return!!e&&"function"==typeof e.getLastChanceEndcardConfig},nU=class extends t4{getTransitions(){return super.getTransitions().concat(nN,nm,nD(this.isFullscreen),nR,ny,nM)}isLastPage(){var e;return!(nk(this)&&this.getLastChanceEndcardConfig().enabled||(null===(e=this.next)||void 0===e?void 0:e.getSceneType())!==v3.closed)}constructor({isFullscreen:e}){super(),this.isFullscreen=e}};const nB={name:v2.MUTE,actions:[{name:t5.MUTE_SOUND},{name:t5.EMIT_MUTED}]},nH={name:v2.UNMUTE,actions:[{name:t5.UN_MUTE_SOUND},{name:t5.EMIT_MUTED}]},nW={name:v2.VIDEO_ERROR,actions:[{name:t5.EMIT_VIDEO_ERROR}]};var nx=e=>{var t;return!!e&&"true"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},nF=e=>{switch(e){case"off":return v5.OFF;case"overlay_view":return v5.SKO;default:return v5.SKPV}},nK=class{getFullScreenClickConfig(){return{enabled:(()=>{if(this.placementType!==ev.FULLSCREEN)return!0;let e=this.skOverlayAutoTokenValue,t=this.fullCtaOptionTokenValue,n=this.fullCtaTokenValue;return"fsc_off"!==t&&("true"===e||"true"===n)})(),id:this.id,target:[ev.BANNER,ev.MREC].includes(this.placementType)?v5.SKPV:nF(this.skFullCtaTokenValue)}}constructor({skOverlayAutoTokenValue:e,fullCtaOptionTokenValue:t,fullCtaTokenValue:n,skFullCtaTokenValue:i,id:r,placementType:a}){this.skOverlayAutoTokenValue=e,this.fullCtaOptionTokenValue=t,this.fullCtaTokenValue=n,this.skFullCtaTokenValue=i,this.id=r,this.placementType=a}};(E1=_E||(_E={})).CHECKPOINT_0="checkpoint.0",E1.CHECKPOINT_100="checkpoint.100",E1.CHECKPOINT_25="checkpoint.25",E1.CHECKPOINT_50="checkpoint.50",E1.CHECKPOINT_75="checkpoint.75",E1.CLICK_URL="clickUrl",E1.POSTROLL_CLICK="postroll.click",E1.POSTROLL_VIEW="postroll.view",E1.VIDEO_CLOSE="video.close",E1.VIDEO_LENGTH="video.length",E1.VIDEO_MUTE="video.mute",E1.VIDEO_UNMUTE="video.unmute",E1.REWARD_GRANTED="rewardGranted";var nY=_E,nG=class{getLogger(e){return this.wrappedService.getLogger(e)}emit(e){this.wrappedService.emit(e)}addEventHandler(e,t){this.wrappedService.addEventHandler(e,t)}removeEventHandler(e,t){this.wrappedService.removeEventHandler(e,t)}getEventHandlers(e){return this.wrappedService.getEventHandlers(e)}hasExistingEvent(e){return this.wrappedService.hasExistingEvent(e)}addToActivity(e){this.wrappedService.addToActivity(e)}clearActivity(){this.wrappedService.clearActivity()}getActivity(e){return this.wrappedService.getActivity(e)}getActivityEvents(){return this.wrappedService.getActivityEvents()}getActivityLogs(){return this.wrappedService.getActivityLogs()}getActivityEventPairs(e,t,n){return this.wrappedService.getActivityEventPairs(e,t,n)}constructor(e){this.wrappedService=e}};const nj=e=>Object.values(nY).includes(e);var nX=class extends nG{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&nj(e)?{type:"tpat",event:e}:"object"==typeof e?e:void 0}},nz=e=>new nX(null!=e?e:Z()),n$=(e=nz(),t=$())=>{let n=(null==t?void 0:t.getSceneType())===v3.image||(null==t?void 0:t.getSceneType())===v3.endcard;t&&"shouldSplitVideoEndcardClick"in t&&t.shouldSplitVideoEndcardClick?(null==t?void 0:t.getSceneType())===v3.video&&e.emit(nY.CLICK_URL,!0):e.emit(nY.CLICK_URL,!0),n&&e.emit(nY.POSTROLL_CLICK,!0)};const nZ="scenes-key",nq="gdpr";var nQ=class{getStoreKitOverlayAutoShowConfig(e=n$){let t="adv_pref"===this.fullCtaOptionTokenValue,n="false"===this.skOverlayDisableAutoMMPTokenValue;return{enabled:!!nI(this.environmentService,this.placementTypeService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&nx(this.skOverlayAutoTokenValue)&&t,autoShowDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayDelaySecondsTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?0:1e3*Math.max(t,0)})(),isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?e:()=>{}}}constructor(e,t,n,i,r,a,o=G(),s=j()){this.appStoreId=e,this.fullCtaOptionTokenValue=t,this.skOverlayAutoTokenValue=n,this.skOverlayDelaySecondsTokenValue=i,this.skOverlayAutoCloseTokenValue=r,this.skOverlayDisableAutoMMPTokenValue=a,this.environmentService=o,this.placementTypeService=s}},nJ=(e=y())=>{let t=e.get(L.APP_STORE_ID);if(t)return t;let n=e.get(L.CTA_BUTTON_URL),i=null==n?void 0:n.match(/\/id(\d+)/i);return(null==i?void 0:i[1])?i[1]:void 0},n0=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnVideoAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!(!na(this.environmentService)||void 0===this.appStoreId||0===this.appStoreId.length||this.placementService.isInLine())&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n=G(),i=j()){this.appStoreOnVideoAutoDelayTokenValue=e,this.appStoreId=t,this.environmentService=n,this.placementService=i}},n1=e=>{var t;return!!e&&"false"===(null==e||null===(t=e.trim())||void 0===t?void 0:t.toLowerCase())},n2=class{getStoreKitOverlayAutoShowConfig(e=n$){let t=this.isEndcardOnly?this.skOverlayDelaySecondsTokenValue:this.ecSkOverlayDelaySecondsTokenValue,n="false"===this.ecSkOverlayDisableAutoMMPTokenValue&&0===this.endcardIndex;return{enabled:!(!nI(this.environmentService,this.placementTypeService)||!this.appStoreId||n1(this.skOverlayAutoTokenValue))&&!(this.endcardIndex>0)&&("adv_pref"===this.fullCtaOptionTokenValue||this.isEndcardOnly)&&!!t&&parseInt(t,10)>=0,isAutoClose:!!this.skOverlayAutoCloseTokenValue&&!["0","-1"].includes(this.skOverlayAutoCloseTokenValue),autoShowDelay:(()=>{let e=parseInt(null!=t?t:"5",10);return Number.isNaN(e)?3e3:Math.max(3e3,1e3*e)})(),autoCloseDelay:(()=>{var e;let t=parseInt(null!==(e=this.skOverlayAutoCloseTokenValue)&&void 0!==e?e:"0",10);return Number.isNaN(t)?5e3:Math.max(5e3,1e3*t)})(),openCallback:n?()=>e():()=>{}}}constructor(e,t,n,i,r,a,o,s,l,d=G(),c=j()){this.endcardIndex=e,this.isEndcardOnly=t,this.appStoreId=n,this.fullCtaOptionTokenValue=i,this.skOverlayAutoTokenValue=r,this.skOverlayDelaySecondsTokenValue=a,this.ecSkOverlayDelaySecondsTokenValue=o,this.skOverlayAutoCloseTokenValue=s,this.ecSkOverlayDisableAutoMMPTokenValue=l,this.environmentService=d,this.placementTypeService=c}},n3=class{getAppStoreOnDelayConfig(){var e;let t=Number(null!==(e=this.appStoreOnEndcardAutoDelayTokenValue)&&void 0!==e?e:"0");return{enabled:!!na(this.environmentService)&&void 0!==this.appStoreId&&0!==this.appStoreId.length&&0===this.endcardIndex&&!Number.isNaN(t)&&Number.isFinite(t)&&t>0,autoShowDelay:Number.isNaN(t)||!Number.isFinite(t)||t<3e3?3e3:t}}constructor(e,t,n,i=G()){this.endcardIndex=e,this.appStoreId=t,this.appStoreOnEndcardAutoDelayTokenValue=n,this.environmentService=i}};const n5=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"});(E2=_v||(_v={})).RESOURCE="resource",E2.EXCEPTION="exception",E2.UNHANDLEDREJECTION="unhandledrejection",E2.PLAYABLE="playable",(E3=__||(__={})).IMAGE="img",E3.VIDEO="video";var n4=_v,n6=()=>Z(),n8=(e,t=n6())=>{if(!e)return[];try{let t=JSON.parse(e);return Array.isArray(t)?t.slice(0,4):[]}catch(e){t.emit({type:"error-logging",event:n4.RESOURCE,data:{error:{message:"Unable to parse app screenshots"}}})}return[]},n7=class{hasAppMetadata(){return!(!this.appIcon||!this.appName)}getAppRatingCount(){var e;let t=parseInt(null!==(e=this.appRatingCount)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?n5.format(t):""}getAppContentRatingImg(){var e,t;return null!==(t={Everyone:"https://cdn-lb.vungle.com/esrb/E.svg","Everyone 10+":"https://cdn-lb.vungle.com/esrb/E10plus.svg",Teen:"https://cdn-lb.vungle.com/esrb/T.svg","Mature 17+":"https://cdn-lb.vungle.com/esrb/M.svg","Adults Only 18+":"https://cdn-lb.vungle.com/esrb/AO.svg"}[null!==(e=this.appContentRating)&&void 0!==e?e:""])&&void 0!==t?t:""}getAppDownloadCount(){let{appDownloadCount:e}=this;if(!e)return"";if(/[KMB]/.test(e))return e;e.includes("-")&&([e]=e.split("-"));let t=Number(e=e.replace(/[,+ ]+/g,""));return t?`${new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0}).format(t)}+`:""}getAppRating(){var e,t;let n=null!==(t=null!==(e=this.appRating)&&void 0!==e?e:this.appStoreRating)&&void 0!==t?t:"4.4",i=n.lastIndexOf("/")+1,r=n.indexOf("-stars.svg"),a=n.substring(i,r);if(a){let e=parseFloat(a);if(!Number.isNaN(e))return e}let o=parseFloat(n);return Number.isNaN(o)?parseFloat("4.4"):o}getAppName(){var e;if(this.appNameEncoded)try{return V(this.appNameEncoded)}catch(e){}return null!==(e=this.appName)&&void 0!==e?e:""}getAppDescription(){var e;if(this.appDescriptionEncoded)try{return V(this.appDescriptionEncoded)}catch(e){}return null!==(e=this.appDescription)&&void 0!==e?e:""}getAppLongDescription(){var e;if(this.appLongDescriptionEncoded)try{return V(this.appLongDescriptionEncoded)}catch(e){}return null!==(e=this.appLongDescription)&&void 0!==e?e:""}getCtaButtonText(){if(this.ctaButtonTextEncoded)try{return V(this.ctaButtonTextEncoded)}catch(e){}return this.ctaButtonText&&""!==this.ctaButtonText.trim()?this.ctaButtonText:this.hasAppMetadata()&&this.appStoreId?"GET":"Open"}getCtaButtonDelay(){var e;let t=parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"",10);return Number.isInteger(t)&&Number.isFinite(t)?t:0}getCtaButtonUrl(){var e;return null!==(e=this.ctaButtonUrl)&&void 0!==e?e:""}getAppMetaData(){var e,t;return{enabled:this.hasAppMetadata(),company:this.getAppDescription(),contentRating:null!==(e=this.appContentRating)&&void 0!==e?e:"",contentRatingImg:this.getAppContentRatingImg(),description:this.getAppLongDescription(),downloads:this.getAppDownloadCount(),icon:null!==(t=this.appIcon)&&void 0!==t?t:"",isRatingGreaterThanMinimum:this.getAppRating()>=4,minimumAppRating:4,name:this.getAppName(),price:"",rating:this.getAppRating(),ratingCount:this.getAppRatingCount(),screenshots:n8(this.appScreenShots,this.errorLoggingReportingService)}}constructor({ctaButtonUrl:e,ctaButtonText:t,ctaButtonTextEncoded:n,ctaButtonDelay:i,appName:r,appIcon:a,appDescription:o,appRatingCount:s,appLongDescription:l,appContentRating:d,appScreenShots:c,appDownloadCount:u,appRating:E,appStoreRating:v,appStoreId:_,appNameEncoded:h,appDescriptionEncoded:T,appLongDescriptionEncoded:S,errorLoggingReportingService:p=n6()}){this.ctaButtonUrl=e,this.ctaButtonText=t,this.ctaButtonTextEncoded=n,this.ctaButtonDelay=i,this.appName=r,this.appIcon=a,this.appDescription=o,this.appRatingCount=s,this.appLongDescription=l,this.appContentRating=d,this.appScreenShots=c,this.appDownloadCount=u,this.appRating=E,this.appStoreRating=v,this.appStoreId=_,this.appNameEncoded=h,this.appDescriptionEncoded=T,this.appLongDescriptionEncoded=S,this.errorLoggingReportingService=p}};const n9=(e,t=y(),n=j())=>({appNameEncoded:t.get(L.APP_NAME_ENCODED),appStoreId:t.get(L.APP_STORE_ID),ctaButtonDelay:t.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),ctaButtonText:t.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:t.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonUrl:t.get(L.CTA_BUTTON_URL),ctaTarget:v5.SKPV,enabled:!1,endcardCloseButtonDelaySeconds:t.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),fullCtaOptionTokenValue:t.get(L.FULL_CTA_OPTION),fullCtaTokenValue:t.get(L.FULL_CTA),hasEndcard:t.has(L.EC_HTML)||t.has(L.EC_IMAGE),hasVideo:t.has(L.MAIN_VIDEO)||t.has(L.MAIN_STREAM),icon:t.get(L.APP_ICON),id:e,isFullscreen:n.isFullscreen(),name:t.get(L.APP_NAME),showECCloseButtonCountDownTokenValue:t.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),skCtaOnlyTokenValue:t.get(L.SK_CTA_ONLY),skFscTokenValue:t.get(L.SK_FSC),staticEndcardCloseButtonDelaySeconds:t.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS)});var ie=class extends n7{getCloseDelay(){let e=this.hasVideo&&!this.hasEndcard,t=3;return e&&this.endcardCloseButtonDelaySeconds?t=Number(this.endcardCloseButtonDelaySeconds):this.staticEndcardCloseButtonDelaySeconds&&(t=Number(this.staticEndcardCloseButtonDelaySeconds)),Math.min(Math.max(t,1),e?6:30)}getCountDown(){return!this.showECCloseButtonCountDownTokenValue||"true"===this.showECCloseButtonCountDownTokenValue}getLastChanceEndcardConfig(){var e;return{enabled:this.isFullscreen&&this.enabled,id:this.id,appMeta:this.getAppMetaData(),cta:{text:this.getCtaButtonText(),url:this.ctaButtonUrl||"",isPersistent:!1,target:nF(this.skCtaOnlyTokenValue),delay:parseInt(null!==(e=this.ctaButtonDelay)&&void 0!==e?e:"4",10)},fsc:{enabled:nx(this.fullCtaTokenValue)&&"fsc_off"!==this.fullCtaOptionTokenValue,ctaUrl:this.ctaButtonUrl,target:nF(this.skFscTokenValue)},close:{delay:this.getCloseDelay(),style:nf.CLOSE,countdown:this.getCountDown()}}}setLastChanceEndcardConfig(){}constructor({appNameEncoded:e,appStoreId:t,ctaButtonDelay:n,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonUrl:a,ctaTarget:o,enabled:s=!1,endcardCloseButtonDelaySeconds:l,fullCtaOptionTokenValue:d,fullCtaTokenValue:c,hasEndcard:u,hasVideo:E,icon:v,id:_,isFullscreen:h,name:T,showECCloseButtonCountDownTokenValue:S,skCtaOnlyTokenValue:p,skFscTokenValue:g,staticEndcardCloseButtonDelaySeconds:C},I){super({ctaButtonUrl:a,ctaButtonText:i,ctaButtonTextEncoded:r,ctaButtonDelay:n,appName:T,appIcon:v,appStoreId:t,appNameEncoded:e,errorLoggingReportingService:I}),this.appNameEncoded=e,this.appStoreId=t,this.ctaButtonDelay=n,this.ctaButtonText=i,this.ctaButtonTextEncoded=r,this.ctaButtonUrl=a,this.ctaTarget=null!=o?o:v5.SKPV,this.enabled=s,this.endcardCloseButtonDelaySeconds=l,this.fullCtaOptionTokenValue=d,this.fullCtaTokenValue=c,this.hasEndcard=!!u,this.hasVideo=!!E,this.icon=v,this.id=_,this.isFullscreen=!!h,this.appName=T,this.showECCloseButtonCountDownTokenValue=S,this.skCtaOnlyTokenValue=p,this.skFscTokenValue=g,this.staticEndcardCloseButtonDelaySeconds=C}},it=class{getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({ecCloseButtonDelaySecondsTokenValue:e,staticEcCloseButtonDelaySecondsTokenValue:t,endcardCloseButtonAsSkipTokenValue:n,showECCloseButtonCountDownTokenValue:i,isSecondEndcard:r}){this.getDelay=()=>{let e=0;return this.isSecondEndcard&&this.staticEcCloseButtonDelaySecondsTokenValue?e=Number(this.staticEcCloseButtonDelaySecondsTokenValue):this.ecCloseButtonDelaySecondsTokenValue&&(e=Number(this.ecCloseButtonDelaySecondsTokenValue)),e},this.getStyle=()=>this.isSecondEndcard?nf.CLOSE:nx(this.endcardCloseButtonAsSkipTokenValue)?nf.SKIP:nf.CLOSE,this.getCountDown=()=>!this.showECCloseButtonCountDownTokenValue||nx(this.showECCloseButtonCountDownTokenValue),this.ecCloseButtonDelaySecondsTokenValue=e,this.staticEcCloseButtonDelaySecondsTokenValue=t,this.endcardCloseButtonAsSkipTokenValue=n,this.showECCloseButtonCountDownTokenValue=i,this.isSecondEndcard=r}},ii=class{getTrackingEventMapConfig(){return{enabled:this.enabled,events:this.events}}constructor(e,t){this.enabled=e,this.events=t}},ir=class extends n7{getCallToActionConfig(){return{url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay(),target:nF(this.skEcCtaOnlyTokenValue)}}constructor({skEcCtaOnlyTokenValue:e,appMetaProviderParams:t}){super(t),this.skEcCtaOnlyTokenValue=e}},ia=(e=y())=>!!e.has(L.INCENTIVIZED)&&nx(e.get(L.INCENTIVIZED));(E5=_h||(_h={})).GRANT_REWARD="GRANT_REWARD",E5.FORFEIT_REWARD="FORFEIT_REWARD";var io=_h;(E4=_T||(_T={})).CLOSE_AD="closeAd",E4.CLOSE_STOREKIT_OVERLAY="closeStoreKitOverlay",E4.ENSURE_REWARD_GRANTED="ensureRewardGranted";var is=(e=y(),t=q(),n=nv,i=nl)=>({closeAd:()=>{n()},closeStoreKitOverlay:()=>{var e;null===(e=i())||void 0===e||e.close()},ensureRewardGranted:()=>{let n=t.hasExistingEvent({type:"incentivized-event",event:io.FORFEIT_REWARD}),i=t.hasExistingEvent({type:"incentivized-event",event:io.GRANT_REWARD});!ia(e)||n||i||t.emit({type:"incentivized-event",event:io.GRANT_REWARD,fireOnlyOnce:!0})}});(E6=_S||(_S={})).ON_CREATIVE_VIEW="onCreativeView",E6.DESTROY_IFRAME="destroyIframe",E6.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS="flushMraidEventsProxyCallbacks",E6.INIT_CHECKPOINTS="initCheckpoints",E6.INIT_OMSDK_HTML_DISPLAY_SERVICE="initOmsdkHtmlDisplayService",E6.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW="closeWillAppear",E6.ON_SHOW="onShow";var il=_S;class id extends t4{getId(){return"closed"}static getInstances(){let e=j();return e.isBanner()||e.isMrec()||e.isInLine()?[]:[new id]}getSceneType(){return v3.closed}constructor(){super(),this.addEntryAction({name:_T.ENSURE_REWARD_GRANTED}),this.addEntryAction({name:il.DESTROY_IFRAME}),this.getEntryActions().some((e=>e.name===_T.CLOSE_AD))||this.addEntryAction({name:_T.CLOSE_AD}),this.addTransition(d({},nL)),this.addTransition(d({},nM))}}var ic=(e=y(),t=j())=>!!t.isMrec()||nx(e.get(L.START_MUTED))||nx(e.get(L.REAL_START_MUTED)),iu=class{subscribe(e){let t,n=()=>{t&&t.unsubscribe(),this.isUnsubscribed||(this.isUnsubscribed=!0)};return t=this.subscribeFn({next:t=>{this.isUnsubscribed||e.next(t)},error:t=>{var i;this.isUnsubscribed||(null===(i=e.error)||void 0===i||i.call(e,t),n())},complete:()=>{var t;this.isUnsubscribed||(null===(t=e.complete)||void 0===t||t.call(e),n())}}),{unsubscribe:n}}pipe(...e){return e.reduce(((e,t)=>t(e)),this)}constructor(e){this.isUnsubscribed=!1,this.subscribeFn=e}},iE=function(e){return t=>new iu((n=>t.subscribe({next:t=>{e(t)&&n.next(t)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})))},iv=(e,t)=>new iu((n=>{let i=(e,t)=>n.next(t);return e.addEventHandler(t,i),{unsubscribe:()=>{e.removeEventHandler(t,i)}}})),i_=(e,t,n)=>iv(e,"error-logging").pipe(iE((e=>e.event===t&&(!n||e.data.resourceType===n)))),ih=function(){return e=>new iu((t=>{let n=0,i=e.subscribe({next:()=>{n+=1,t.next(n)},error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},complete:()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)}});return{unsubscribe:()=>i.unsubscribe()}}))},iT=function(e){return t=>new iu((n=>{let i=null,r=t.subscribe({next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return i=e.subscribe({next:()=>{var e;null===(e=n.complete)||void 0===e||e.call(n),r.unsubscribe(),null==i||i.unsubscribe()}}),{unsubscribe:()=>{r.unsubscribe(),i.unsubscribe()}}}))},iS=(e,t)=>iv(e,"scene-event").pipe(iE((e=>e.event===t)));(E8=_p||(_p={})).CLICK="CLICK",E8.CLOSE_BUTTON_CLICK="CLOSE_BUTTON_CLICK",E8.CLOSE_BUTTON_SHOW="CLOSE_BUTTON_SHOW",E8.CTA_BUTTON_CLICK="CTA_BUTTON_CLICK",E8.CTA_BUTTON_SHOW="CTA_BUTTON_SHOW",E8.LAST_CHANCE_ENDCARD_CLOSE="LAST_CHANCE_ENDCARD_CLOSE",E8.LAST_CHANCE_ENDCARD_OPEN="LAST_CHANCE_ENDCARD_OPEN",E8.LOAD_COMPLETE="LOAD_COMPLETE",E8.LOAD_START="LOAD_START",E8.NEAR_CLOSE_BUTTON_CLICK="NEAR_CLOSE_BUTTON_CLICK",E8.PRELOAD_CANCELLED="PRELOAD_CANCELLED",E8.PRELOAD_COMPLETE="PRELOAD_COMPLETE",E8.PRELOAD_START="PRELOAD_START",E8.SCENE_END="SCENE_END",E8.SCENE_START="SCENE_START";var ip=_p,ig=(e,t)=>new iu((n=>{let i=null,r=null,a=null;return r=e.subscribe({next:()=>{i=Date.now()}}),a=t.subscribe({next:()=>{var e;null!=i&&(n.next(Date.now()-i),null==r||r.unsubscribe(),null==a||a.unsubscribe(),null===(e=n.complete)||void 0===e||e.call(n))}}),{unsubscribe:()=>{null==r||r.unsubscribe(),null==a||a.unsubscribe()}}})),iC=function(e){return t=>new iu((n=>{let i=e,r=t.subscribe({next:e=>{var t;i>0&&(n.next(e),i-=1),0===i&&(null===(t=n.complete)||void 0===t||t.call(n))},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},iI=(e,t,n)=>new iu((i=>{let r=ig(e,t).subscribe({next:e=>{var t;i.next(e),null===(t=i.complete)||void 0===t||t.call(i)}}),a=n.subscribe({next:()=>{var e;i.next(0),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe(),a.unsubscribe()}}})),iO=(e,t,n)=>new iu((i=>{let r=0,a=null,o=t.subscribe({next:()=>{var e;i.next(r),null===(e=i.complete)||void 0===e||e.call(i),null==a||a.unsubscribe(),o.unsubscribe()}}),s=e.subscribe({next:()=>{a=n.subscribe({next:()=>{r+=1},error:e=>{var t;return null===(t=i.error)||void 0===t?void 0:t.call(i,e)}})}});return{unsubscribe:()=>{null==a||a.unsubscribe(),s.unsubscribe()}}})),iA=function(e){return t=>new iu((n=>{let i={next:e=>n.next(e),error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}};t.subscribe({next:t=>{e(t).subscribe(i)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)}})}))},im=function(e){return t=>new iu((n=>{let i=0;return t.subscribe({next:t=>{try{let r=e(t,i);n.next(r),i+=1}catch(e){var r;null===(r=n.error)||void 0===r||r.call(n,e)}},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var e;return null===(e=n.complete)||void 0===e?void 0:e.call(n)}})}))},iN=function(e){return t=>new iu((n=>{let i=!1,r=t.subscribe({next:e=>{i=!0,n.next(e)},error:e=>{var t;return null===(t=n.error)||void 0===t?void 0:t.call(n,e)},complete:()=>{var t;i||n.next(e),null===(t=n.complete)||void 0===t||t.call(n)}});return{unsubscribe:()=>r.unsubscribe()}}))},iD=e=>iS(e,ip.CLOSE_BUTTON_SHOW).pipe(iA((()=>iS(e,ip.CLICK).pipe(im((()=>!0))))),iT(iS(e,ip.SCENE_END)),iN(!1)),iR=(e,t)=>iS(e,ip.CLICK).pipe(iT(t),ih(),iN(0)),iy=e=>iI(iS(e,ip.LAST_CHANCE_ENDCARD_OPEN),iS(e,ip.LAST_CHANCE_ENDCARD_CLOSE),iS(e,ip.SCENE_END)),iL=(...e)=>new iu((t=>{let n=[],i=()=>{n.forEach((e=>e()))},r=e=>{var n;t.next(e),null===(n=t.complete)||void 0===n||n.call(t),i()},a=e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)},o=()=>{var e;return null===(e=t.complete)||void 0===e?void 0:e.call(t)};e.forEach((e=>{let{unsubscribe:t}=e.subscribe({next:r,error:a,complete:o});n.push(t)}))})),iP=e=>iL(iS(e,ip.SCENE_END).pipe(im((()=>!1))),iS(e,ip.LAST_CHANCE_ENDCARD_OPEN).pipe(iA((()=>iR(e,iS(e,ip.LAST_CHANCE_ENDCARD_CLOSE)))),im((e=>e>0)),iN(!1))),ib=e=>iO(iS(e,ip.SCENE_START),iL(iS(e,ip.CLOSE_BUTTON_SHOW),iS(e,ip.SCENE_END)),iS(e,ip.NEAR_CLOSE_BUTTON_CLICK));const iw=e=>"scene-event"===e.type&&null!=e.event;var iV=class extends nG{emit(e){let t=this.getReportableEvent(e);t&&this.wrappedService.emit(t)}getEventCount(e){let t=this.getReportableEvent(e);return t?this.wrappedService.getActivityEvents().filter((e=>"event"===e.activity.type&&"scene-event"===e.activity.eventType&&e.activity.name===t.event&&(""===t.data.scene_id||e.activity.data.scene_id===t.data.scene_id)&&e.activity.data.scene_type===t.data.scene_type)).length:0}getReportableEvent(e){if(iw(e))return e;let t=this.injectedGetCurrentScene();return t?{type:"scene-event",event:e,data:{scene_id:t.getId(),scene_type:t.getSceneType()}}:void 0}constructor(e,t=$){super(e),this.injectedGetCurrentScene=t}},iM=(e,t=$)=>new iV(null!=e?e:Z(),t),ik=(e=q(),t=!1)=>{let n=iM(e),i=ig(iS(n,ip.SCENE_START),iS(n,ip.SCENE_END)),r=iS(n,ip.CLICK).pipe(iC(1)),a=iI(iS(n,ip.SCENE_START),r,iS(n,ip.SCENE_END)),o=iO(iS(n,ip.CLOSE_BUTTON_SHOW).pipe(iC(1)),iS(n,ip.SCENE_END),iS(n,ip.NEAR_CLOSE_BUTTON_CLICK)),s=iI(iS(n,ip.CLOSE_BUTTON_SHOW),iS(n,ip.CLOSE_BUTTON_CLICK),iS(n,ip.SCENE_END)),l=iD(n),d={click_count:iR(n,iS(n,ip.SCENE_END)),close_button_idle_time:s,duration:i,first_click:a,interaction_after_close_button_visible:l,near_click_count_after_close_button_appears:o,near_click_count_before_close_button_appears:ib(n)};return t&&(d.last_chance_endcard_duration=iy(n),d.last_chance_endcard_clicked=iP(n)),d},iU=(e,t)=>iv(e,"video").pipe(iE((e=>e.event===t)));(E7=_g||(_g={})).BANDWIDTH_ESTIMATION="bandwidthEstimation",E7.CAN_PLAY_THROUGH="canplaythrough",E7.CLOSE="close",E7.DURATION_CHANGE="durationchange",E7.ENDED="ended",E7.ERROR="error",E7.HLS_LEVEL_PLAYLIST_LOADED="hlsLevelPlaylistLoaded",E7.MUTE="mute",E7.PAUSE="pause",E7.PLAY="play",E7.PROGRESS="progress",E7.SUSPEND="suspend",E7.TIME_UPDATE="timeupdate",E7.UNMUTE="unmute",E7.WAITING="waiting";var iB=_g,iH=(e,t)=>{let n=Number(t.incentivizedCloseButtonDelaySeconds);return!t.isIncentiveTiedToCloseButtonDelay||Number.isNaN(n)||n>e?.8*e:.8*n};(E9=_C||(_C={})).PROGRESS="progress",E9.VIDEO_LENGTH="videoLength",E9.VIDEO_REACHED_DURATION="videoReachedDuration";var iW=_C,ix=(e,t)=>0===t?0:t-e<=.5?4:Math.floor(e/t*4);const iF=()=>Z(),iK=()=>Z(),iY=(e,t,n)=>{R().getMraidBridgeExt()&&t>0&&e>0&&iK().emit({type:"videoViewed",event:iW.VIDEO_LENGTH,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},iG=(e,t,n)=>{let i=ix(e,t),r=iK();4===i&&r.emit({type:"videoViewed",event:iW.VIDEO_REACHED_DURATION,data:{currentTime:e,duration:t,seconds:n},fireOnlyOnce:!0})},ij=(e,t,n)=>{let i=iK();i.getActivityEvents().some((e=>e.activity.name===iW.PROGRESS&&e.activity.data.seconds>=n))||i.emit({type:"videoViewed",event:iW.PROGRESS,data:{currentTime:e,duration:t,seconds:n}}),iY(e,t,n),iG(e,t,n)};var iX=(e,t,n=R(),i=nz())=>{var r,a,o,s;let l=n.getMraidBridgeExt();if(!l)return;let d=Math.floor(1e3*Math.max(null!==(o=null===(r=t.data)||void 0===r?void 0:r.currentTime)&&void 0!==o?o:0,.1)),c=Math.floor(1e3*(null!==(s=null===(a=t.data)||void 0===a?void 0:a.duration)&&void 0!==s?s:0));switch(t.event){case iW.PROGRESS:l.notifyEventValuePairEvent("videoViewed",d);break;case iW.VIDEO_REACHED_DURATION:l.notifyEventValuePairEvent("videoViewed",c);break;case iW.VIDEO_LENGTH:l.notifyEventValuePairEvent("videoLength",c),i.emit(nY.VIDEO_LENGTH,!0)}};const iz=[{currentTime:.1,timeout:0},{currentTime:2,timeout:2e3},{currentTime:3,timeout:1e3},{currentTime:4,timeout:1e3},{currentTime:5,timeout:1e3}],i$=(e,t)=>[nY.CHECKPOINT_0,nY.CHECKPOINT_25,nY.CHECKPOINT_50,nY.CHECKPOINT_75,nY.CHECKPOINT_100][Math.floor(e/t*4)],iZ=(e,t=t7(),n=nz())=>{let i=iz[e],r=iz.length-1;t.getNewTimer(i.timeout,(()=>{n.emit(i$(i.currentTime,5),!0,{currentTime:i.currentTime,duration:5}),ij(i.currentTime,5,Math.round(i.currentTime)),e!==r&&iZ(e+1)})).start()};var iq=(e,t)=>iv(e,"incentivized-event").pipe(iE((e=>e.event===t))),iQ=e=>new iu((t=>{let n=()=>{var e;t.next(io.FORFEIT_REWARD),null===(e=t.complete)||void 0===e||e.call(t)};iq(e,io.FORFEIT_REWARD).subscribe({next:n,error:e=>{var n;return null===(n=t.error)||void 0===n?void 0:n.call(t,e)}}),e.hasExistingEvent({type:"incentivized-event",event:io.FORFEIT_REWARD})&&n()})),iJ=e=>new iu((t=>{var n;e.hasExistingEvent({type:"incentivized-event",event:io.GRANT_REWARD})&&(t.next(io.FORFEIT_REWARD),null===(n=t.complete)||void 0===n||n.call(t))})),i0=(e,t,n)=>new iu((i=>{let r=t.getNewTimer(e,(()=>{var e;i.next(n),null===(e=i.complete)||void 0===e||e.call(i)}));return r.start(),{unsubscribe:()=>{r.destroy()}}})),i1=(e,t,n=q(),i=t7())=>new iu((r=>{let a=(e===v3.video?iU(n,iB.PLAY).pipe(iC(1),iA((e=>{var r;return iL(i0(1e3*iH(null===(r=e.data)||void 0===r?void 0:r.duration,t),i,io.GRANT_REWARD),iS(n,ip.SCENE_END).pipe(im((()=>io.FORFEIT_REWARD))),iQ(n),iJ(n))}))):iS(n,ip.SCENE_START).pipe(iA((()=>iL(i0(1e3*iH(5,t),i,io.GRANT_REWARD),iS(n,ip.SCENE_END).pipe(im((()=>io.FORFEIT_REWARD))),iQ(n),iJ(n)))))).subscribe({next:e=>{var t;e===io.GRANT_REWARD&&n.emit({type:"incentivized-event",event:io.GRANT_REWARD,fireOnlyOnce:!0}),null===(t=r.complete)||void 0===t||t.call(r)},error:e=>{var t;return null===(t=r.error)||void 0===t?void 0:t.call(r,e)}});return{unsubscribe:()=>{a.unsubscribe()}}}));(ve=_I||(_I={}))[ve.NOT_ENABLED=0]="NOT_ENABLED",ve[ve.CANCELLED=-1]="CANCELLED";var i2=e=>{let t=null,n=iS(e,ip.PRELOAD_START),i=iS(e,ip.PRELOAD_COMPLETE),r=iS(e,ip.PRELOAD_CANCELLED),a=iS(e,ip.SCENE_END);return new iu((e=>{let o=n.subscribe({next:()=>{t=Date.now()}}),s=i.subscribe({next:()=>{var n;null!==t&&(e.next(Date.now()-t),null===(n=e.complete)||void 0===n||n.call(e))}}),l=()=>{var n;e.next(null!=t?-1*(Date.now()-t):0),null===(n=e.complete)||void 0===n||n.call(e)},d=r.subscribe({next:l}),c=a.subscribe({next:l});return{unsubscribe:()=>{o.unsubscribe(),s.unsubscribe(),d.unsubscribe(),c.unsubscribe()}}}))};(vt=_O||(_O={})).NESTED_IFRAME_WITH_CORS="cors",vt.NESTED_IFRAME_WITHOUT_CORS="basic";var i3=()=>Z();(_A||(_A={})).NESTED_IFRAME_TYPE="NESTED_IFRAME_TYPE";var i5=_A,i4=(e=$,t=i3())=>{let n=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"iframe"===t.activity.eventType&&t.activity.name===i5.NESTED_IFRAME_TYPE&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).map((e=>{var t;return null===(t=e.activity.data)||void 0===t?void 0:t.nested_iframe_type}));return n.includes(_O.NESTED_IFRAME_WITH_CORS)?_O.NESTED_IFRAME_WITH_CORS:n.includes(_O.NESTED_IFRAME_WITHOUT_CORS)?_O.NESTED_IFRAME_WITHOUT_CORS:""},i6=(e,t,n=$)=>new iu((i=>{let r=iS(e,ip.SCENE_END).subscribe({next:()=>{var e;i.next(i4(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),i8=(e,t=!1,n=q(),i=t7())=>{let r=iM(n),a=i_(n,n4.PLAYABLE).pipe(ih()).pipe(iT(iS(r,ip.SCENE_END))),o=iI(iS(r,ip.LOAD_START),iS(r,ip.LOAD_COMPLETE),iS(r,ip.SCENE_END)),s=C(d({},ik(n,t)),{error_count:a,iframe_type:i6(r,n),load_duration:o,preload_duration:i2(r)});return e.enabled&&(s.grant_reward=i1(v3.endcard,e,n,i)),s},i7=(e,t)=>({ctaButtonUrl:e.get(L.CTA_BUTTON_URL),ctaButtonText:e.get(L.CTA_BUTTON_TEXT),ctaButtonTextEncoded:e.get(L.CTA_BUTTON_ENCODED_TEXT),ctaButtonDelay:e.get(L.DOWNLOAD_BUTTON_DELAY_SECONDS),appName:e.get(L.APP_NAME),appIcon:e.get(L.APP_ICON),appDescription:e.get(L.APP_DESCRIPTION),appRatingCount:e.get(L.APP_RATING_COUNT),appLongDescription:e.get(L.APP_LONG_DESCRIPTION),appContentRating:e.get(L.APP_CONTENT_RATING),appScreenShots:e.get(L.APP_SCREENSHOTS),appDownloadCount:e.get(L.APP_DOWNLOAD_COUNT),appRating:e.get(L.APP_RATING),appStoreRating:e.get(L.APP_STORE_RATING),appStoreId:e.get(L.APP_STORE_ID),appNameEncoded:e.get(L.APP_NAME_ENCODED),appDescriptionEncoded:e.get(L.APP_DESCRIPTION_ENCODED),appLongDescriptionEncoded:e.get(L.APP_LONG_DESCRIPTION_ENCODED),errorLoggingReportingService:t}),i9=class{getIncentivizedConfig(){return{enabled:this.enabled,incentivizedCloseButtonDelaySeconds:this.incentivizedCloseButtonDelaySeconds,isIncentiveTiedToCloseButtonDelay:this.isIncentiveTiedToCloseButtonDelay}}constructor({enabled:e=!1,incentivizedCloseButtonDelaySeconds:t,isIncentiveTiedToCloseButtonDelay:n=!1}){this.enabled=e,this.incentivizedCloseButtonDelaySeconds=t,this.isIncentiveTiedToCloseButtonDelay=n}},re={},rt=function(e,t,n,i,r){var a=new Worker(re[t]||(re[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var t=e.data,n=t.$e$;if(n){var i=Error(n[0]);i.code=n[1],i.stack=n[2],r(i,null)}else r(null,t)},a.postMessage(n,i),a},rn=Uint8Array,ri=Uint16Array,rr=Int32Array,ra=new rn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ro=new rn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rs=new rn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rl=function(e,t){for(var n=new ri(31),i=0;i<31;++i)n[i]=t+=1<<e[i-1];var r=new rr(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},rd=rl(ra,2),rc=rd.b,ru=rd.r;rc[28]=258,ru[258]=28;for(var rE=rl(ro,0),rv=rE.b,r_=rE.r,rh=new ri(32768),rT=0;rT<32768;++rT){var rS=(43690&rT)>>1|(21845&rT)<<1;rS=(61680&(rS=(52428&rS)>>2|(13107&rS)<<2))>>4|(3855&rS)<<4,rh[rT]=((65280&rS)>>8|(255&rS)<<8)>>1}var rp=function(e,t,n){for(var i,r=e.length,a=0,o=new ri(t);a<r;++a)e[a]&&++o[e[a]-1];var s=new ri(t);for(a=1;a<t;++a)s[a]=s[a-1]+o[a-1]<<1;if(n){i=new ri(1<<t);var l=15-t;for(a=0;a<r;++a)if(e[a])for(var d=a<<4|e[a],c=t-e[a],u=s[e[a]-1]++<<c,E=u|(1<<c)-1;u<=E;++u)i[rh[u]>>l]=d}else for(a=0,i=new ri(r);a<r;++a)e[a]&&(i[a]=rh[s[e[a]-1]++]>>15-e[a]);return i},rg=new rn(288);for(rT=0;rT<144;++rT)rg[rT]=8;for(rT=144;rT<256;++rT)rg[rT]=9;for(rT=256;rT<280;++rT)rg[rT]=7;for(rT=280;rT<288;++rT)rg[rT]=8;var rC=new rn(32);for(rT=0;rT<32;++rT)rC[rT]=5;var rI=rp(rg,9,0),rO=rp(rg,9,1),rA=rp(rC,5,0),rf=rp(rC,5,1),rm=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},rN=function(e,t,n){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(7&t)&n},rD=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},rR=function(e){return(e+7)/8|0},ry=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new rn(e.subarray(t,n))},rL=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],rP=function(e,t,n){var i=Error(t||rL[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,rP),!n)throw i;return i},rb=function(e,t,n,i){var r=e.length,a=i?i.length:0;if(!r||t.f&&!t.l)return n||new rn(0);var o=!n,s=o||2!=t.i,l=t.i;o&&(n=new rn(3*r));var d=function(e){var t=n.length;if(e>t){var i=new rn(Math.max(2*t,e));i.set(n),n=i}},c=t.f||0,u=t.p||0,E=t.b||0,v=t.l,_=t.d,h=t.m,T=t.n,S=8*r;do{if(!v){c=rN(e,u,1);var p=rN(e,u+1,3);if(u+=3,!p){var g=e[(D=rR(u)+4)-4]|e[D-3]<<8,C=D+g;if(C>r){l&&rP(0);break}s&&d(E+g),n.set(e.subarray(D,C),E),t.b=E+=g,t.p=u=8*C,t.f=c;continue}if(1==p)v=rO,_=rf,h=9,T=5;else if(2==p){var I=rN(e,u,31)+257,O=rN(e,u+10,15)+4,A=I+rN(e,u+5,31)+1;u+=14;for(var f=new rn(A),m=new rn(19),N=0;N<O;++N)m[rs[N]]=rN(e,u+3*N,7);u+=3*O;var L=rm(m),y=(1<<L)-1,R=rp(m,L,1);for(N=0;N<A;){var D,P=R[rN(e,u,y)];if(u+=15&P,(D=P>>4)<16)f[N++]=D;else{var w=0,b=0;for(16==D?(b=3+rN(e,u,3),u+=2,w=f[N-1]):17==D?(b=3+rN(e,u,7),u+=3):18==D&&(b=11+rN(e,u,127),u+=7);b--;)f[N++]=w}}var V=f.subarray(0,I),M=f.subarray(I);h=rm(V),T=rm(M),v=rp(V,h,1),_=rp(M,T,1)}else rP(1);if(u>S){l&&rP(0);break}}s&&d(E+131072);for(var k=(1<<h)-1,U=(1<<T)-1,B=u;;B=u){var F=(w=v[rD(e,u)&k])>>4;if((u+=15&w)>S){l&&rP(0);break}if(w||rP(2),F<256)n[E++]=F;else{if(256==F){B=u,v=null;break}var H=F-254;if(F>264){var W=ra[N=F-257];H=rN(e,u,(1<<W)-1)+rc[N],u+=W}var x=_[rD(e,u)&U],G=x>>4;x||rP(3),u+=15&x;M=rv[G];if(G>3){W=ro[G];M+=rD(e,u)&(1<<W)-1,u+=W}if(u>S){l&&rP(0);break}s&&d(E+131072);var Y=E+H;if(E<M){var K=a-M,j=Math.min(M,Y);for(K+E<0&&rP(3);E<j;++E)n[E]=i[K+E]}for(;E<Y;++E)n[E]=n[E-M]}}t.l=v,t.p=B,t.b=E,t.f=c,v&&(c=1,t.m=h,t.d=_,t.n=T)}while(!c);return E!=n.length&&o?ry(n,0,E):n.subarray(0,E)},rw=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8},rV=function(e,t,n){n<<=7&t;var i=t/8|0;e[i]|=n,e[i+1]|=n>>8,e[i+2]|=n>>16},rM=function(e,t){for(var n=[],i=0;i<e.length;++i)e[i]&&n.push({s:i,f:e[i]});var r=n.length,a=n.slice();if(!r)return{t:rF,l:0};if(1==r){var o=new rn(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],l=n[1],d=0,c=1,u=2;for(n[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=r-1;)s=n[n[d].f<n[u].f?d++:u++],l=n[d!=c&&n[d].f<n[u].f?d++:u++],n[c++]={s:-1,f:s.f+l.f,l:s,r:l};var E=a[0].s;for(i=1;i<r;++i)a[i].s>E&&(E=a[i].s);var v=new ri(E+1),_=rk(n[c-1],v,0);if(_>t){i=0;var h=0,T=_-t,S=1<<T;for(a.sort((function(e,t){return v[t.s]-v[e.s]||e.f-t.f}));i<r;++i){var p=a[i].s;if(!(v[p]>t))break;h+=S-(1<<_-v[p]),v[p]=t}for(h>>=T;h>0;){var g=a[i].s;v[g]<t?h-=1<<t-v[g]++-1:++i}for(;i>=0&&h;--i){var C=a[i].s;v[C]==t&&(--v[C],++h)}_=t}return{t:new rn(v),l:_}},rk=function(e,t,n){return-1==e.s?Math.max(rk(e.l,t,n+1),rk(e.r,t,n+1)):t[e.s]=n},rU=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ri(++t),i=0,r=e[0],a=1,o=function(e){n[i++]=e},s=1;s<=t;++s)if(e[s]==r&&s!=t)++a;else{if(!r&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(r),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(r);a=1,r=e[s]}return{c:n.subarray(0,i),n:t}},rB=function(e,t){for(var n=0,i=0;i<t.length;++i)n+=e[i]*t[i];return n},rH=function(e,t,n){var i=n.length,r=rR(t+2);e[r]=255&i,e[r+1]=i>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var a=0;a<i;++a)e[r+a+4]=n[a];return 8*(r+4+i)},rW=function(e,t,n,i,r,a,o,s,l,d,c){rw(t,c++,n),++r[256];for(var u,E,v,_,h=rM(r,15),T=h.t,S=h.l,p=rM(a,15),g=p.t,C=p.l,I=rU(T),O=I.c,A=I.n,f=rU(g),m=f.c,N=f.n,L=new ri(19),y=0;y<O.length;++y)++L[31&O[y]];for(y=0;y<m.length;++y)++L[31&m[y]];for(var R=rM(L,7),D=R.t,P=R.l,w=19;w>4&&!D[rs[w-1]];--w);var b=d+5<<3,V=rB(r,rg)+rB(a,rC)+o,M=rB(r,T)+rB(a,g)+o+14+3*w+rB(L,D)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&b<=V&&b<=M)return rH(t,c,e.subarray(l,l+d));if(rw(t,c,1+(M<V)),c+=2,M<V){u=rp(T,S,0),E=T,v=rp(g,C,0),_=g;var k=rp(D,P,0);rw(t,c,A-257),rw(t,c+5,N-1),rw(t,c+10,w-4),c+=14;for(y=0;y<w;++y)rw(t,c+3*y,D[rs[y]]);c+=3*w;for(var U=[O,m],B=0;B<2;++B){var F=U[B];for(y=0;y<F.length;++y){var H=31&F[y];rw(t,c,k[H]),c+=D[H],H>15&&(rw(t,c,F[y]>>5&127),c+=F[y]>>12)}}}else u=rI,E=rg,v=rA,_=rC;for(y=0;y<s;++y){var W=i[y];if(W>255){rV(t,c,u[(H=W>>18&31)+257]),c+=E[H+257],H>7&&(rw(t,c,W>>23&31),c+=ra[H]);var x=31&W;rV(t,c,v[x]),c+=_[x],x>3&&(rV(t,c,W>>5&8191),c+=ro[x])}else rV(t,c,u[W]),c+=E[W]}return rV(t,c,u[256]),c+E[256]},rx=new rr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),rF=new rn(0),rK=function(e,t,n,i,r,a){var o=a.z||e.length,s=new rn(i+o+5*(1+Math.ceil(o/7e3))+r),l=s.subarray(i,s.length-r),d=a.l,c=7&(a.r||0);if(t){c&&(l[0]=a.r>>3);for(var u=rx[t-1],E=u>>13,v=8191&u,_=(1<<n)-1,h=a.p||new ri(32768),T=a.h||new ri(_+1),S=Math.ceil(n/3),p=2*S,g=function(t){return(e[t]^e[t+1]<<S^e[t+2]<<p)&_},C=new rr(25e3),I=new ri(288),O=new ri(32),A=0,f=0,m=a.i||0,N=0,L=a.w||0,y=0;m+2<o;++m){var R=g(m),D=32767&m,P=T[R];if(h[D]=P,T[R]=D,L<=m){var w=o-m;if((A>7e3||N>24576)&&(w>423||!d)){c=rW(e,l,0,C,I,O,f,N,y,m-y,c),N=A=f=0,y=m;for(var b=0;b<286;++b)I[b]=0;for(b=0;b<30;++b)O[b]=0}var V=2,M=0,k=v,U=D-P&32767;if(w>2&&R==g(m-U))for(var B=Math.min(E,w)-1,F=Math.min(32767,m),H=Math.min(258,w);U<=F&&--k&&D!=P;){if(e[m+V]==e[m+V-U]){for(var W=0;W<H&&e[m+W]==e[m+W-U];++W);if(W>V){if(V=W,M=U,W>B)break;var x=Math.min(U,W-2),G=0;for(b=0;b<x;++b){var Y=m-U+b&32767,K=Y-h[Y]&32767;K>G&&(G=K,P=Y)}}}P=h[D=P],U+=D-P&32767}if(M){C[N++]=268435456|ru[V]<<18|r_[M];var j=31&ru[V],X=31&r_[M];f+=ra[j]+ro[X],++I[257+j],++O[X],L=m+V,++A}else C[N++]=e[m],++I[e[m]]}}for(m=Math.max(m,L);m<o;++m)C[N++]=e[m],++I[e[m]];c=rW(e,l,d,C,I,O,f,N,y,m-y,c),d||(a.r=7&c|l[c/8|0]<<3,c-=7,a.h=T,a.p=h,a.i=m,a.w=L)}else{for(m=a.w||0;m<o+d;m+=65535){var z=m+65535;z>=o&&(l[c/8|0]=d,z=o),c=rH(l,c+1,e.subarray(m,z))}a.i=o}return ry(s,0,i+rR(c)+r)},rY=function(e,t,n,i,r){if(!r&&(r={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new rn(a.length+e.length);o.set(a),o.set(e,a.length),e=o,r.w=a.length}return rK(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,i,r)},rG=function(e,t){var n={};for(var i in e)n[i]=e[i];for(var i in t)n[i]=t[i];return n},rj=function(e,t,n){for(var i=e(),r=e.toString(),a=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<i.length;++o){var s=i[o],l=a[o];if("function"==typeof s){t+=";"+l+"=";var d=s.toString();if(s.prototype)if(-1!=d.indexOf("[native code]")){var c=d.indexOf(" ",8)+1;t+=d.slice(c,d.indexOf("(",c))}else for(var u in t+=d,s.prototype)t+=";"+l+".prototype."+u+"="+s.prototype[u].toString();else t+=d}else n[l]=s}return t},rX=[],rz=function(e){var t=[];for(var n in e)e[n].buffer&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t},r$=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&rP(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=2+(e[10]|e[11]<<8));for(var i=(t>>3&1)+(t>>4&1);i>0;i-=!e[n++]);return n+(2&t)},rZ=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},rq="undefined"!=typeof TextDecoder&&new TextDecoder;try{rq.decode(rF,{stream:!0})}catch(e){}var rQ=function(e){for(var t="",n=0;;){var i=e[n++],r=(i>127)+(i>223)+(i>239);if(n+r>e.length)return{s:t,r:ry(e,n-1)};t+=r?3==r?String.fromCharCode(55296|(i=((15&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536)>>10,56320|1023&i):1&r?String.fromCharCode((31&i)<<6|63&e[n++]):String.fromCharCode((15&i)<<12|(63&e[n++])<<6|63&e[n++]):String.fromCharCode(i)}};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var rJ=e=>e.replace(/(top\.window\.open|top\.mraid\.open|parent\.window\.open|parent\.mraid\.open)\((.*?)\)/g,"mraid.open($2)"),r0=e=>{let t=/(?:window\.)?(?:top\.|parent\.)?(?:window\.)?(?:location(?:\.href)?)\s*=\s*([^;\n]+?)(\n|;|\s*<\/script>|$)/g;return t.test(e)?e.replace(t,((e,t,n)=>`mraid.open(${t})${n}`)):e},r1=e=>{let t=/<script[^>]*?src=(["'][^"']*?mraid.js[^>]*?["'])[^>]*?>(<\/script>)?/gi;return t.test(e)?e.replace(t,""):e},r2=class extends a{decompress(e){var t,n;let i=atob(e),r=new Uint8Array(i.length);for(let e=0;e<i.length;e+=1)r[e]=i.charCodeAt(e);return function(e){if(rq)return rq.decode(e);var t=rQ(e),n=t.s;return t.r.length&&rP(8),n}(((n=r$(r))+8>r.length&&rP(6,"invalid gzip data"),rb(r.subarray(n,-8),{i:2},new rn(rZ(r)),t))).toString()}decode(e,t){try{let n;n=t&&this.placementTypeService.isFullscreen()?this.decompress(e):V(e);let i=r1(n),r=r0(i);return rJ(r)}catch(e){return this.errorLoggingService.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:"Failed to decode endcard"}}}),""}}static getServiceIdentifier(){return"HTMLDecoderServiceInterface"}constructor(e=j(),t=n6()){super(),this.placementTypeService=e,this.errorLoggingService=t}},r3=()=>{let e=r.getInstance(),t=r2.getServiceIdentifier();return e.get(t)},r5=class extends a{getBaseUrl(e){try{return new URL(e).origin}catch(e){return""}}getEndcardContentWithSrcRemoved(e){let t=(new DOMParser).parseFromString(e,"text/html");return t.getElementsByTagName("iframe")[0].removeAttribute("src"),t.documentElement.innerHTML}isValidDimension(e,t){let n=e.getAttribute(t);if(null!==n){if(n.endsWith("%")&&0===parseFloat(n))return!1;let e=parseFloat(n);return!(Number.isNaN(e)||e<=1)}return!0}getNestedIframeContentData(e){try{let t=(new DOMParser).parseFromString(e,"text/html").getElementsByTagName("iframe");if(1!==t.length)return;let n=t[0],i=n.getAttribute("src");if(!(null==i?void 0:i.startsWith("http")))return;let r=n.getAttribute("style");if((null==r?void 0:r.toLowerCase().replace(/\s+/g," ").includes("display: none"))||!this.isValidDimension(n,"width")||!this.isValidDimension(n,"height"))return;return{src:i,baseUrl:this.getBaseUrl(i)}}catch(e){return}}async initializeIframeContentData(e,t){let n={content:e};if(t){let{src:i}=t;n.nestedFrameContent=d({},t);try{let t=await window.fetch(i);if(!t.ok)throw Error("failed to fetch nested iframe content");n.nestedFrameContent.content=await t.text(),n.content=this.getEndcardContentWithSrcRemoved(e)}catch(e){}}return n}static getServiceIdentifier(){return"IframeServiceInterface"}},r4=()=>{let e=r.getInstance(),t=r5.getServiceIdentifier();return e.get(t)};const r6=[L.EC_IMAGE,L.EC_IMAGE_2,L.EC_HTML,L.ADM_HTML,L.EC_HTML_2];(vn=_f||(_f={})).BASE64_ENCODED="base64-encoded",vn.GZIP="gzip",vn.NONE="none";class r8 extends nU{getId(){return this.id}getSceneType(){return this.sceneType}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nf.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}getCallToActionConfig(){return this.callToActionConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getEventStreams(){return this.eventStreams?this.eventStreams:i8(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}getHasNestedIframe(){return this.hasNestedFrame}initIframeContentData(){let e=this.iframeService.getNestedIframeContentData(this.endcardContent);this.hasNestedFrame=!!e,this.iframeContentData=this.iframeService.initializeIframeContentData(this.endcardContent,e)}async getIframeContentData(){var e;return null!==(e=this.iframeContentData)&&void 0!==e?e:Promise.resolve({content:this.endcardContent})}getObservabilityData(){return C(d({},super.getObservabilityData()),{has_nested_iframe:this.getHasNestedIframe()})}static getInstances(e=y(),t=j(),n=G(),i=n6(),r=r3(),a=r4()){let o=[L.EC_HTML,L.ADM_HTML,L.EC_HTML_2],s=[],l={[L.EC_HTML]:"endcard",[L.ADM_HTML]:"endcard",[L.EC_HTML_2]:"secondEndcard"},d=nx(e.get(L.EC_HTML_PRELOAD));return o.filter((t=>e.has(t))).forEach(((o,c)=>{var u;let E=o===L.ADM_HTML,v=`${l[o]}_${c}`,_=new ie(n9(v,e,t),i);s.push(new r8({id:v,endcardContent:r.decode(null!==(u=e.get(o))&&void 0!==u?u:"",nx(e.get(L.EC_HTML_COMPRESS))),index:c,isAlternative:!1,compressionType:nx(e.get(L.EC_HTML_COMPRESS))?"gzip":"base64-encoded",storeKitOverlayAutoShowConfig:new n2(c,this.isEndcardOnly(e),nJ(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new n3(c,nJ(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:_.getLastChanceEndcardConfig(),omsdkEnabled:E,closeButtonConfig:new it({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===c}).getCloseButtonConfig(),trackingEventMapConfig:new ii(!1).getTrackingEventMapConfig(),callToActionConfig:new ir({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:i7(e,i)}).getCallToActionConfig(),muted:ic(e,t),eligibleToPreload:d,placementTypeService:t,shouldSplitVideoEndcardClick:nx(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new i9({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),s}constructor({id:e,endcardContent:t,index:n,isAlternative:i,compressionType:r,storeKitOverlayAutoShowConfig:a,appStoreOnDelayConfig:o,lastChanceEndcardConfig:s,omsdkEnabled:l,closeButtonConfig:d,trackingEventMapConfig:c,muted:u=!1,eligibleToPreload:E=!1,callToActionConfig:v,placementTypeService:_=j(),shouldSplitVideoEndcardClick:h=!1,eventStreams:T,incentivizedConfig:S,iframeService:p=r4()}){super({isFullscreen:_.isFullscreen()}),this.sceneType=v3.endcard,this.hasNestedFrame=!1,this.id=e,this.endcardContent=t,this.index=n,this.alternative=i,this.compressionType=r,this.storeKitOverlayAutoShowConfig=a,this.appStoreOnDelayConfig=o,this.lastChanceEndcardConfig=s,this.omsdkEnabled=l,this.trackingEventMapConfig=c,this.closeButtonConfig=d,this.callToActionConfig=v,this.placementTypeService=_,this.muted=u,this.eligibleToPreload=E,this.shouldSplitVideoEndcardClick=h,this.eventStreams=T,this.incentivizedConfig=S,this.iframeService=p,l&&this.addEntryAction({name:il.INIT_OMSDK_HTML_DISPLAY_SERVICE}),this.addTransition(nP),this.addTransition(nb),this.addTransition(nw),this.addTransition(nV),this.addOrUpdateTransition({name:v2.CLOSE,actions:[],scene:new id}),this.addExitAction({name:il.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}),this.addOrUpdateTransition({name:v2.CLOSE_BUTTON_WILL_SHOW,actions:[{name:il.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW}]}),this.addTransition({name:v2.CREATIVE_VIEW,actions:[{name:il.ON_CREATIVE_VIEW}]}),this.addEntryAction({name:il.ON_SHOW})}}r8.isEndcardOnly=(e=y())=>{let t=!e.has(L.MAIN_VIDEO)&&!e.has(L.MAIN_STREAM),n=1===r6.filter((t=>e.has(t))).length;return t&&n};var r7=r8,r9=class{getDelay(){return nx(this.incentivizedTokenValue)&&this.incentivizedCloseButtonDelaySecondsTokenValue?Number(this.incentivizedCloseButtonDelaySecondsTokenValue):this.closeButtonDelaySecondsTokenValue?Number(this.closeButtonDelaySecondsTokenValue):0}getCountDown(){return void 0===this.showVideoCloseButtonCountDownTokenValue||nx(this.showVideoCloseButtonCountDownTokenValue)}getStyle(){return nx(this.videoCloseButtonAsSkipTokenValue)?nf.SKIP:nf.CLOSE}getCloseButtonConfig(){return{delay:this.getDelay(),style:this.getStyle(),countdown:this.getCountDown()}}constructor({closeButtonDelaySecondsTokenValue:e,incentivizedCloseButtonDelaySecondsTokenValue:t,incentivizedTokenValue:n,videoCloseButtonAsSkipTokenValue:i,showVideoCloseButtonCountDownTokenValue:r}){this.closeButtonDelaySecondsTokenValue=e,this.incentivizedCloseButtonDelaySecondsTokenValue=t,this.incentivizedTokenValue=n,this.videoCloseButtonAsSkipTokenValue=i,this.showVideoCloseButtonCountDownTokenValue=r}};const ae="mute-button",at="#555FFF";var an=class{getProgressBarConfig(){var e,t;return{show:!this.isBanner&&!n1(this.videoProgressBarTokenValue),color:null!==(t=null!==(e=this.videoProgressBarColorTokenValue)&&void 0!==e?e:this.ctaButtonBackgroundTokenValue)&&void 0!==t?t:at}}constructor({videoProgressBarTokenValue:e,videoProgressBarColorTokenValue:t,ctaButtonBackgroundTokenValue:n,isBanner:i}){this.videoProgressBarTokenValue=e,this.videoProgressBarColorTokenValue=t,this.ctaButtonBackgroundTokenValue=n,this.isBanner=i}};const ai=(e=y(),t=j(),n=n6())=>{let i=i7(e,n);return{appStoreId:nJ(e),skCtaOnlyTokenValue:e.get(L.SK_CTA_ONLY),blockPersistentCtaTokenValue:e.get(L.BLOCK_PERSISTENT_CTA),appMetaProviderParams:i,placementTypeService:t}};var ar=class extends n7{getCallToActionTarget(){return this.placementTypeService.isBanner()||this.placementTypeService.isMrec()?v5.SKPV:nF(this.skCtaOnlyTokenValue)}isPersistentCtaEnabled(){return(this.placementTypeService.isFullscreen()||this.placementTypeService.isMrec()||this.placementTypeService.isInLine())&&!nx(this.blockPersistentCtaTokenValue)}getCallToActionConfig(){return{isPersistent:this.isPersistentCtaEnabled(),target:this.getCallToActionTarget(),url:super.getCtaButtonUrl(),text:super.getCtaButtonText(),appMeta:super.getAppMetaData(),delay:super.getCtaButtonDelay()}}constructor({appStoreId:e,skCtaOnlyTokenValue:t,blockPersistentCtaTokenValue:n,appMetaProviderParams:i,placementTypeService:r=j()}){super(i),this.appStoreId=e,this.skCtaOnlyTokenValue=t,this.blockPersistentCtaTokenValue=n,this.placementTypeService=r}},aa=class{getStreamManifest(){var e;if(void 0!==this.mainManifestTokenValue&&""!==this.mainManifestTokenValue)return{manifest:V(this.mainManifestTokenValue),track_0:V(null!==(e=this.track0TokenValue)&&void 0!==e?e:""),chunks:this.chunkSeriesValues}}constructor(e,t,n){this.mainManifestTokenValue=e,this.track0TokenValue=t,this.chunkSeriesValues=n}},ao=function(e){if(null===e||"object"!=typeof e||"function"!=typeof e.getStreamManifest)return!1;let t=e.getStreamManifest();return void 0===t||!(null===t||"object"!=typeof t||void 0!==t.manifest&&"string"!=typeof t.manifest||void 0!==t.track_0&&"string"!=typeof t.track_0||!(void 0===t.chunks||Array.isArray(t.chunks)&&t.chunks.every((e=>"string"==typeof e||null!==e&&"object"==typeof e&&Object.values(e).every((e=>"string"==typeof e))))))};const as=e=>{if("object"==typeof e)return Object.values(e).some((e=>as(e)));let t=e.toLowerCase();return!t.startsWith("http://")&&!t.startsWith("https://")};var al=e=>`file://${window.location.pathname.replace("index.html","")}${e}`,ad=class{getCachedFirstTrack(){var e;if(!ao(this.scene)||!this.hasCachedFirstTrack())return"";let t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.track_0;return void 0===t?"":t}getCachedManifest(){var e;if(!ao(this.scene)||!this.hasCachedManifest())return"";let t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.manifest;return void 0===t?"":t}getCachedVideoSegmentUrls(){var e,t,n;return ao(this.scene)&&null!==(n=null===(t=this.scene.getStreamManifest())||void 0===t||null===(e=t.chunks)||void 0===e?void 0:e.map((e=>{if(as(e))if("string"==typeof e){if(!e.toLowerCase().startsWith("file://"))return al(e)}else if("object"==typeof e)return Object.entries(e).reduce(((e,[t,n])=>(e[t]=n.toLowerCase().startsWith("file://")?n:al(n),e)),{});return e})))&&void 0!==n?n:[]}hasCachedFirstTrack(){var e;return!!ao(this.scene)&&!!(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.track_0)}hasCachedManifest(){var e;return!!ao(this.scene)&&!!(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.manifest)}hasCachedStreamChunks(){var e,t;if(!ao(this.scene))return!1;let n=null!==(t=null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.chunks)&&void 0!==t?t:[];return 0!==n.length&&as(n[0])}getChunkFormat(){var e;if(!ao(this.scene)||!this.hasCachedStreamChunks())return"";let t=(null===(e=this.scene.getStreamManifest())||void 0===e?void 0:e.chunks)[0].split(".");return t.length<2?"":t[t.length-1]}constructor(e=(null===(vi=z.getValue())||void 0===vi?void 0:vi.scene)){this.scene=e}},ac=(e,t)=>{let n=iU(e,iB.HLS_LEVEL_PLAYLIST_LOADED),i=iS(t,ip.SCENE_END);return new iu((e=>{let t=n.subscribe({next:t=>{var n,i;e.next(null===(n=t.data)||void 0===n?void 0:n.startingSequenceNumber),null===(i=e.complete)||void 0===i||i.call(e)}}),r=i.subscribe({next:()=>{var t;e.next(void 0),null===(t=e.complete)||void 0===t||t.call(e)}});return{unsubscribe:()=>{t.unsubscribe(),r.unsubscribe()}}}))},au=(e=$,t=iF())=>{var n,i,r;return null!==(r=null===(i=t.getActivityEvents().filter((t=>{var n,i;return"event"===t.activity.type&&"video"===t.activity.eventType&&t.activity.name===iB.BANDWIDTH_ESTIMATION&&(null===(n=t.activity.data)||void 0===n?void 0:n.scene_id)===(null===(i=e())||void 0===i?void 0:i.getId())})).pop())||void 0===i||null===(n=i.activity.data)||void 0===n?void 0:n.bwe)&&void 0!==r?r:-1},aE=(e,t,n=$)=>new iu((i=>{let r=iS(e,ip.SCENE_END).subscribe({next:()=>{var e;i.next(au(n,t)),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{r.unsubscribe()}}})),av=(e,t=!1,n=q(),i=t7())=>{let r=iM(n),a=i_(n,n4.RESOURCE,__.VIDEO).pipe(ih()).pipe(iT(iS(r,ip.SCENE_END))),o=iI(iS(r,ip.LOAD_START),iS(r,ip.LOAD_COMPLETE),iS(r,ip.SCENE_END)),s=iI(iS(r,ip.CTA_BUTTON_SHOW),iS(r,ip.CTA_BUTTON_CLICK),iS(r,ip.SCENE_END)),l=C(d({},ik(n,t)),{average_bandwidth:aE(r,n),cta_duration:s,error_count:a,hls_starting_sequence_number:ac(n,r),load_duration:o,preload_duration:i2(r)});return e.enabled&&(l.grant_reward=i1(v3.video,e,n,i)),l};(vr=_m||(_m={})).PROGRESSIVE="mp4",vr.HLS="hls";class a_ extends nU{getTransitions(){let e=super.getTransitions();return e.push(nB,nH,nW,nP,nb,nw,nV),e}getId(){return this.id}getSceneType(){return v3.video}getVideoPlayer(){return"mp4"===this.videoType?"progressive":window.Hls.isSupported()?"custom":"native"}getVideoUrl(){return"mp4"===this.videoType&&void 0!==this.originalVideoUrl?this.originalVideoUrl:this.url}getObservabilityData(){var e,t,n,i;let r=new ad(this);return{cached:r.getCachedVideoSegmentUrls().length,format:r.getChunkFormat(),manifest:r.hasCachedManifest(),local:this.url.toLowerCase().startsWith("file://")?1:0,player:this.getVideoPlayer(),segments:null!==(n=null===(t=this.getStreamManifest())||void 0===t||null===(e=t.chunks)||void 0===e?void 0:e.length)&&void 0!==n?n:0,track:r.hasCachedFirstTrack(),url:null!==(i=this.getVideoUrl())&&void 0!==i?i:"",video:this.videoType}}getProgressBarConfig(){return this.progressBarConfig}getFullScreenClickConfig(){return this.fullScreenClickConfig}getAppStoreOnDelayConfig(){return this.appStoreOnDelayConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nf.CLOSE:this.closeButtonConfig.style})}getStoreKitOverlayAutoShowConfig(){return this.storeKitOverlayAutoShowConfig}getCallToActionConfig(){return this.callToActionConfig}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}getTrackingEventMapConfig(){return this.trackingEventMapConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}getStreamManifest(){return this.streamManifest}getEventStreams(){return this.eventStreams?this.eventStreams:av(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}getIncentivizedConfig(){return this.incentivizedConfig}static isLoopingVideo(e,t=!1){return t||nx(e)}static getInstances(e=y(),t=j(),n=G(),i=n6()){let r=[L.MAIN_VIDEO,L.MAIN_STREAM],a=[],o=e.get(L.ORIGINAL_VIDEO_URL),s=a_.isLoopingVideo(e.get(L.VIDEO_LOOPING),a_.isVideoOnly(e));return r.filter((t=>e.has(t))).forEach(((r,l)=>{var d;let c=r===L.MAIN_STREAM?"hls":"mp4",u=`video_${l}`,E=new ie(n9(u,e,t),i),v=new ar(ai(e,t,i)).getCallToActionConfig(),_=new nQ(nJ(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig();a.push(new a_({id:u,url:null!==(d=e.get(r))&&void 0!==d?d:"",index:l,isAlternative:!1,videoType:c,streamManifest:new aa(e.get(L.MAIN_MANIFEST),e.get(L.TRACK_0),e.getSeriesValues("STREAM_CHUNK_")).getStreamManifest(),progressBarConfig:new an({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),fullScreenClickConfig:new nK({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),id:u,placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:_,appStoreOnDelayConfig:new n0(e.get(L.APP_STORE_ON_VIDEO_AUTO_DELAY),nJ(e),n,t).getAppStoreOnDelayConfig(),callToActionConfig:v,lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),trackingEventMapConfig:new ii(!1).getTrackingEventMapConfig(),closeButtonConfig:new r9({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),originalVideoUrl:o,loopVideo:s,showDownloadButton:nx(e.get(L.VIDEO_SHOW_CTA))&&(!v.isPersistent||_.enabled),isFullscreen:t.isFullscreen(),muted:ic(e,t),shouldSplitVideoEndcardClick:nx(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new i9({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}constructor({id:e,url:t,index:n,isAlternative:i,videoType:r,streamManifest:a,fullScreenClickConfig:o,storeKitOverlayAutoShowConfig:s,appStoreOnDelayConfig:l,callToActionConfig:d,lastChanceEndcardConfig:c,progressBarConfig:u,closeButtonConfig:E,originalVideoUrl:v,trackingEventMapConfig:_,showDownloadButton:h,loopVideo:T=!1,muted:S=!1,isFullscreen:p,shouldSplitVideoEndcardClick:g=!1,eventStreams:C,incentivizedConfig:I}){super({isFullscreen:p}),this.id=e,this.url=t,this.index=n,this.alternative=i,this.videoType=r,this.streamManifest=a,this.progressBarConfig=u,this.fullScreenClickConfig=o,this.storeKitOverlayAutoShowConfig=s,this.appStoreOnDelayConfig=l,this.callToActionConfig=d,this.showDownloadButton=h,this.lastChanceEndcardConfig=c,this.closeButtonConfig=E,this.originalVideoUrl=v,this.loopVideo=T,this.muted=S,this.trackingEventMapConfig=_,this.shouldSplitVideoEndcardClick=g,this.eventStreams=C,this.incentivizedConfig=I,this.addTransition({name:v2.NEXT,actions:[{name:t5.CLOSE_VIDEO}]})}}a_.isVideoOnly=(e=y())=>{let t=!e.some(...r6),n=1===[L.MAIN_VIDEO,L.MAIN_STREAM].filter((t=>e.has(t))).length;return t&&n};var ah=function(e){return e instanceof a_&&Object.values(_m).includes(e.videoType)&&"object"==typeof e.progressBarConfig&&"object"==typeof e.fullScreenClickConfig&&"object"==typeof e.storeKitOverlayAutoShowConfig&&"object"==typeof e.appStoreOnDelayConfig&&"object"==typeof e.callToActionConfig&&"object"==typeof e.lastChanceEndcardConfig&&"object"==typeof e.trackingEventMapConfig&&(void 0===e.originalVideoUrl||!0)&&(void 0===e.loopVideo||!0)},aT=e=>e instanceof r7&&e.getSceneType()===v3.endcard,aS=class extends a{static getServiceIdentifier(){return"PreloadServiceInterface"}isHTMLPreloading(e,t=t3(e)){return(null==t?void 0:t.state.value)===vJ.PRELOADING}getHTMLScenesToPreload(e){let t=[];if(ah(e)){aT(e.next)&&e.next.eligibleToPreload&&t.push({scene:e.next,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1});let n=e.getTransitions().find((e=>e.name===v2.COMPLETE));aT(null==n?void 0:n.scene)&&n.scene!==e.next&&n.scene.eligibleToPreload&&t.push({scene:n.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!1})}else if(aT(e)&&e.eligibleToPreload){let n=t3(e.getId());(null==n?void 0:n.state.context.preloadSuccess)&&(t.push({scene:e,isCloseButtonVisible:!0,isPrivacyButtonVisible:!0,shouldRenderIFrame:!0,startPreloading:!1}),e.getTransitions().forEach((e=>{e.scene&&aT(e.scene)&&e.scene.eligibleToPreload&&t.push({scene:e.scene,isCloseButtonVisible:!1,isPrivacyButtonVisible:!1,shouldRenderIFrame:!0,startPreloading:!0})})))}return t.length>0?t:void 0}startPreloading(e,t=t3(e)){null==t||t.send(vQ.PRELOAD)}cancelPreloading(e,t=t3(e)){null==t||t.send(vQ.CANCEL_PRELOAD)}};const ap=e=>"observability"===e.type&&null!=e.event;var ag=class extends nG{emit(e,t){let n=this.getReportableEvent(e,t);this.wrappedService.emit(n)}emitLegacy(e,t=Number.MAX_SAFE_INTEGER,n=["name"]){t!==Number.MAX_SAFE_INTEGER&&this.getEventCount(e,n)>=t||this.emit(e)}getEventCount(e,t=["name"]){let n=this.getReportableEvent(e);return this.wrappedService.getActivityEvents().filter((e=>e.activity.type===ep.EVENT&&"observability"===e.activity.eventType&&t.every((t=>{var i;return(null===(i=e.activity.data)||void 0===i?void 0:i[t])===n.data[t]})))).length}getReportableEvent(e,t){return ap(e)?e:{type:"observability",event:ep.EVENT,data:"string"==typeof e?d({name:e},t):e}}},aC=e=>new ag(null!=e?e:Z());(va=_N||(_N={})).SCRIPT_ERROR="Unexpected script error",va.UNHANDLED_REJECTION="Unhandled rejection error",va.TOKEN_ERROR="syntaxerror: unexpected token ':'",(vo=_D||(_D={}))[vo.InvalidImageError=1e4]="InvalidImageError",vo[vo.InvalidVideoError=10001]="InvalidVideoError",vo[vo.Error=30006]="Error";var aI=class extends a{getMessageFromErrorEvent(e){var t;return e.message&&""!==e.message?e.message:(null===(t=e.error)||void 0===t?void 0:t.message)&&""!==e.error.message?e.error.message:"Unexpected script error"}isIgnoredError(e){let t=e.toLowerCase();return["syntaxerror: unexpected token ':'"].some((e=>-1!==t.indexOf(e)))}sendImageError(e,t=!1){let n=this.getImageErrorEvent(e.target);t&&(n.data.isFatal=!0),this.send(n)}shouldImageErrorBeFatal(e){var t;return"image_0"===e&&!(null===(t=this.currentScene())||void 0===t?void 0:t.prev)}handlePlayableError(e){var t,n,i,r;let a=e.data&&"playable-error"===e.data.title,o=null!==(i=null===(n=e.data)||void 0===n||null===(t=n.content)||void 0===t?void 0:t.message)&&void 0!==i?i:"";a&&!this.isIgnoredError(o)&&(e.data.content.error_source=eC.PLAYABLE,this.send({type:"error-logging",event:n4.PLAYABLE,data:{error:e.data.content,sceneId:null===(r=$())||void 0===r?void 0:r.getId()}}))}handleUnhandledrejectionError(e){var t,n;this.send({type:"error-logging",event:n4.UNHANDLEDREJECTION,data:{error:{message:null!==(n=null===(t=e.reason)||void 0===t?void 0:t.toString())&&void 0!==n?n:"Unhandled rejection error",error_source:eC.TEMPLATE}}}),this.observabilityEventReportingService.emit(eg.TEMPLATE_ERROR)}handleCommonError(e){let{localName:t}=e.target;if("video"===t)return;if("img"===t){let{id:t}=e.target,n=this.shouldImageErrorBeFatal(t);return void this.sendImageError(e,n)}let n={type:"error-logging",event:n4.EXCEPTION,data:{error:{message:this.getMessageFromErrorEvent(e),error_source:eC.TEMPLATE,resource_url:null==e?void 0:e.filename}}};this.send(n),this.observabilityEventReportingService.emit(eg.TEMPLATE_ERROR)}getErrorCode(e){var t;let n=null===(t=e.data)||void 0===t?void 0:t.resourceType;return n===__.IMAGE?1e4:n===__.VIDEO?10001:30006}getImageErrorEvent(e){let{currentSrc:t}=e;return{type:"error-logging",event:n4.RESOURCE,data:{resourceType:__.IMAGE,error:{resource_url:t,error_source:eC.RESOURCE,message:U}}}}init(){window.addEventListener("error",this.handleCommonError.bind(this),!0),window.addEventListener("unhandledrejection",this.handleUnhandledrejectionError.bind(this)),window.addEventListener("message",this.handlePlayableError.bind(this))}send(e){this.errorLoggingReportingService.emit(e)}notifyFatalError(e){var t,n,i,r;let a=this.getErrorCode(e),o=null!==(r=null===(t=e.data.error)||void 0===t?void 0:t.message)&&void 0!==r?r:"Unknown error";this.observabilityEventReportingService.emit({name:eg.FATAL_ERROR,message:o,error_code:a}),null===(i=this.mraidService.getMraidBridgeExt())||void 0===i||null===(n=i.notifyError)||void 0===n||n.call(i,a,o,!0)}static getServiceIdentifier(){return"ErrorLoggingServiceInterface"}constructor(e=R(),t=n6(),n=aC(),i=$){super(),this.mraidService=e,this.errorLoggingReportingService=t,this.observabilityEventReportingService=n,this.currentScene=i}},aO={};function aA(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(aO=aA).default=aA;class af extends Error{}var am=(e,t=1e4,n=new af("Timed out waiting!"))=>new Promise(((i,r)=>{let a=t=>{var o;let s=e();((o=aO)&&o.__esModule?o.default:o)(s)?s.then((e=>{e?i(e):t<0?r(n):setTimeout((()=>a(t-100)),100)})):s?i(s):t<0?r(n):setTimeout((()=>a(t-100)),100)};setTimeout((()=>a(t-100)),100)}));class aN extends a{addEventStreams(e){var t;let n=e.getId();if(null===(t=this.sceneEventStreams[n])||void 0===t?void 0:t.hasCompleted)throw Error("Cannot add more event streams after completion");let i=e.getEventStreams(),r={eventStreams:i,results:{},errors:{},completed:{},hasCompleted:!1};this.sceneEventStreams[n]=r,0!==Object.keys(i).length?Object.keys(r.eventStreams).forEach((e=>{r.eventStreams[e].subscribe({next:t=>{r.results[e]=t},error:t=>{r.errors[e]=t},complete:()=>{r.completed[e]=!0}})})):r.hasCompleted=!0}end(e){this.reportingService.emit({type:"scene-event",event:ip.SCENE_END,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}start(e){this.addEventStreams(e),this.reportingService.emit({type:"scene-event",event:ip.SCENE_START,data:{scene_id:e.getId(),scene_type:e.getSceneType()}})}subscribeAll(e){let t=e.getId(),n=this.sceneEventStreams[t];return n.hasCompleted?Promise.resolve({}):new Promise((e=>{am((()=>Object.keys(n.eventStreams).every((e=>!!n.errors[e]||n.completed[e]))),aN.MAX_WAIT_TIME,Error(`Event streams for scene ${t} have not completed successfully`)).then((()=>{n.hasCompleted=!0,e(n.results)}))}))}haveAllCompleted(){return 0===Object.keys(this.sceneEventStreams).length||Object.keys(this.sceneEventStreams).every((e=>this.sceneEventStreams[e].hasCompleted))}reset(){this.sceneEventStreams={}}static getServiceIdentifier(){return"EventStreamServiceInterface"}constructor(e=iM()){super(),this.reportingService=e,this.sceneEventStreams={}}}aN.MAX_WAIT_TIME=2e3;var aD=()=>({dbName:"viewMaster_indexed_db_urlCache",dbVersion:1,objectStore:{name:"urlCache",keyPath:"url",expiry:30}}),aR=class extends a{async addRecord(){}async get(){return Promise.resolve(void 0)}async getAllRecords(){return Promise.resolve([])}async clearStore(){}async deleteExpiredRecords(){}},ay=class extends aR{static getServiceIdentifier(){return"UrlCacheServiceInterface"}};class aL{static async hasSufficientSpace(){var e;if(!(null===(e=window.navigator.storage)||void 0===e?void 0:e.estimate))return!0;let{quota:t,usage:n}=await window.navigator.storage.estimate();return!t||!n||t-n>=5e6}static async shouldInitIndexedDB(){return!!window.indexedDB&&aL.hasSufficientSpace()}static handleUpgrade(e,t){let n=e.target.result,{name:i,keyPath:r,index:a}=t;if(!n.objectStoreNames.contains(i)){let e=n.createObjectStore(i,{keyPath:r});a&&e.createIndex(a.name,a.keyPath,a.options)}}static convertToError(e){var t;return Error(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Unknown error from IndexedDB")}static async open(e){if(await aL.shouldInitIndexedDB())return new Promise(((t,n)=>{let{dbName:i,objectStore:r,dbVersion:a}=e,o=window.indexedDB.open(i,a);o.onupgradeneeded=e=>aL.handleUpgrade(e,r),o.onsuccess=e=>t(e.target.result),o.onerror=e=>n(aL.convertToError(e.target.error))})).catch((()=>{}))}reportError(e){let t=e instanceof Error?e.message:String(e);this.errorLoggingReportingService.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:t}}})}async withTransaction(e,t,n){if(!this.db.objectStoreNames.contains(this.storeName))return n;try{let n=this.db.transaction(this.storeName,e),i=n.objectStore(this.storeName);return await new Promise(((e,r)=>{n.onerror=()=>r(aL.convertToError(n.error)),t(i).then((t=>e(t))).catch((e=>r(aL.convertToError(e))))}))}catch(e){return this.reportError(e),n}}handleCursor(e,t,n,i){let r=e.target.result;if(r)if(r.value.createDate<t){let e=r.delete();e.onsuccess=()=>r.continue(),e.onerror=()=>i(aL.convertToError(e.error))}else r.continue();else n()}async deleteExpiredRecords(){let e=Date.now()-864e5*this.expiry;return this.withTransaction("readwrite",(t=>new Promise(((n,i)=>{let r=t.openCursor();r.onsuccess=t=>this.handleCursor(t,e,n,i),r.onerror=()=>i(aL.convertToError(r.error))}))),void 0)}async addRecord(e){return e.createDate||(e.createDate=Date.now()),this.withTransaction("readwrite",(async t=>{let n=t.put(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(),n.onerror=()=>t(aL.convertToError(n.error))}))}),void 0)}async get(e){return this.withTransaction("readonly",(async t=>{let n=t.get(e);return new Promise(((e,t)=>{n.onsuccess=()=>e(n.result),n.onerror=()=>t(aL.convertToError(n.error))}))}),void 0)}async getAllRecords(){return this.withTransaction("readonly",(async e=>new Promise(((t,n)=>{let i=e.getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(aL.convertToError(i.error))}))),[])}async clearStore(){return this.withTransaction("readwrite",(async e=>{let t=e.clear();return new Promise(((e,n)=>{t.onsuccess=()=>e(),t.onerror=()=>n(aL.convertToError(t.error))}))}),void 0)}constructor(e,t,n=n6()){this.db=e;let{objectStore:i}=t;this.storeName=i.name,this.keyPath=i.keyPath,this.expiry=i.expiry,this.errorLoggingReportingService=n}}var aP=class{async getIndexedDatabaseService(){return this.indexedDatabaseService}constructor(e,t,n){this.indexedDatabaseService=aL.open(e).then((i=>i?new aL(i,e,t):new n)).then((e=>e.deleteExpiredRecords().then((()=>e))))}},ab=class extends a{async addRecord(e){return(await this.indexedDatabaseService).addRecord(e)}async get(e){return(await this.indexedDatabaseService).get(e)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async clearStore(){let e=await this.indexedDatabaseService;await e.clearStore()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UrlCacheServiceInterface"}constructor(e=aD(),t=n6()){super(),this.indexedDatabaseService=new aP(e,t,ay).getIndexedDatabaseService()}};(vs=_R||(_R={})).LANDSCAPE="landscape",vs.PORTRAIT="portrait",vs.UNKNOWN="unknown",(vl=_y||(_y={})).LOAD_FAIL="LOAD_FAIL",vl.PLAY="PLAY",vl.CAN_PLAY="CAN_PLAY",vl.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vl.PAUSE="PAUSE",vl.END="END",vl.TIME_UPDATE="TIME_UPDATE",vl.CLOSE="CLOSE",vl.DURATION_CHANGE="DURATION_CHANGE",vl.WAITING="WAITING",vl.SUSPEND="SUSPEND",vl.RETRY="RETRY",vl.MAXIMIZE="MAXIMIZE",vl.MINIMIZE="MINIMIZE",(vd=_L||(_L={})).LOADING="LOADING",vd.LOAD_FAIL_RETRY="LOAD_FAIL_RETRY",vd.PLAYING="PLAYING",vd.PAUSED="PAUSED",vd.AUTO_PLAY_FAIL="AUTO_PLAY_FAIL",vd.ENDED="ENDED",vd.FINAL="FINAL",(vc=_P||(_P={})).UPDATE_PROGRESS="updateProgress",vc.EMIT_PROGRESS="emitProgress",vc.EMIT_LOAD="emitLoad",vc.EMIT_PLAY="emitPlay",vc.EMIT_PAUSE="emitPause",vc.EMIT_CLOSE="emitClose",vc.EMIT_CLOSE_FULLY_PLAYED="emitCloseFullyPlayed",vc.INCREMENT_LOOP_COUNT="incrementLoopCount",vc.REPORT_VIDEO_START="reportVideoStart",vc.SET_CAN_PLAY="setCanPlay",vc.EMIT_DURATION_CHANGE="emitDurationChange",vc.EMIT_TIME_UPDATE="emitTimeUpdate",vc.EMIT_WAITING="emitWaiting",vc.EMIT_SUSPEND="emitSuspend",vc.UPDATE_CURRENT_TIME="updateCurrentTime",vc.RESET_CURRENT_TIME="resetCurrentTime",vc.EMIT_CHECKPOINT_TPAT_EVENT="emitCheckpointTpatEvent",vc.EMIT_SCENE_EVENT="emitTrackingEvent",(_b||(_b={})).FSC="FSC";var aw=_b;const aV=()=>Z(),aM=()=>Z();var ak=class extends a{setVideoContext(e,t,n){this.videoScene=e,this.videoElement=t,this.videoInterpreter=n}getVideoScene(){return this.videoScene}getVideoElement(){return this.videoElement}getVideoInterpreter(){return this.videoInterpreter}getFullScreenCallToActionEventHandlerProps(){var e;return this.videoScene?{fullScreenClickConfig:C(d({},this.videoScene.getFullScreenClickConfig()),{enabled:!0,target:null!==(e=this.videoScene.getFullScreenClickConfig().target)&&void 0!==e?e:v5.SKPV}),trackingEventMapConfig:C(d({},this.videoScene.getTrackingEventMapConfig()),{enabled:!0}),sceneId:this.videoScene.getId()}:{}}clickHandler(){this.fullScreenCallToActionReportingService.emit({type:"fsc",event:aw.FSC})}videoAdViewableChange(e,t,n=!1){this.videoScene&&this.videoInterpreter&&(t.event!==Q.MAXIMIZED||n?t.event===Q.MINIMIZED&&this.videoInterpreter.send({type:_y.MINIMIZE}):this.videoInterpreter.send({type:_y.MAXIMIZE,hasHlsVideo:this.videoScene.videoType===_m.HLS}))}isPortrait(){return this.environmentService.getOrientation()===eS.PORTRAIT}closeVideo(){var e;null===(e=this.videoInterpreter)||void 0===e||e.send({type:_y.CLOSE}),this.setVideoContext(void 0,null)}static getServiceIdentifier(){return"PictureInPictureServiceInterface"}constructor(e=G(),t=aM()){super(),this.environmentService=e,this.fullScreenCallToActionReportingService=t,this.videoElement=null}},aU=()=>({dbName:"viewMaster_indexed_db",dbVersion:1,objectStore:{name:"userActivity",keyPath:"eventId",expiry:90}}),aB=class extends aR{static getServiceIdentifier(){return"UserActivityServiceInterface"}},aH=class extends a{findObservabilityActivityEvent(e){return t=>{var n;if("eventType"in t.activity&&"observability"===t.activity.eventType&&(null===(n=t.activity.data)||void 0===n?void 0:n.name)===e)return t.activity}}findSceneEventActivityEvent(e,t){return n=>{var i;if("eventType"in n.activity&&"scene-event"===n.activity.eventType&&n.activity.name===e&&(null===(i=n.activity.data)||void 0===i?void 0:i.scene_type)===t)return n.activity}}getAdStartTime(){let e=this.reportingService.getActivity().find(this.findObservabilityActivityEvent(eg.AD_START));if(e)return new Date(e.timestamp)}getVideoEnd(){var e;let t=this.reportingService.getActivityEvents().find((e=>"video"===e.activity.eventType&&e.activity.name===iB.CLOSE));if(null==t||null===(e=t.activity.data)||void 0===e?void 0:e.maximumViewingTime)return Math.floor(1e3*t.activity.data.maximumViewingTime)}getEndcardInteractions(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eg.SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.click_count}getEndcardDuration(){var e;let t=this.reportingService.getActivityEvents().find((e=>{var t,n;return"observability"===e.activity.eventType&&(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eg.SCENE_END&&"endcard_0"===(null===(n=e.activity.data)||void 0===n?void 0:n.scene_id)}));return null==t||null===(e=t.activity.data)||void 0===e?void 0:e.duration}getVideoCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findObservabilityActivityEvent(eg.VIDEO_START)),n=e.find(this.findSceneEventActivityEvent(ip.CLOSE_BUTTON_SHOW,v3.video));if(t&&n)return n.timestamp-t.timestamp}getEndcardCloseShown(){let e=this.reportingService.getActivity(),t=e.find(this.findSceneEventActivityEvent(ip.SCENE_START,v3.endcard)),n=e.find(this.findSceneEventActivityEvent(ip.CLOSE_BUTTON_SHOW,v3.endcard));if(t&&n)return n.timestamp-t.timestamp}getEndcardInteractionsAfterCloseButton(){return this.reportingService.getActivityEvents().filter((e=>{var t;return(null===(t=e.activity.data)||void 0===t?void 0:t.name)===eg.INTERACTION_AFTER_CLOSE_BUTTON_VISIBLE})).length}getUserActivityData(){var e,t,n;return{eventId:null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:"",creativeId:null!==(t=this.tokenService.get(L.CREATIVE_ID))&&void 0!==t?t:"",adSource:this.tokenService.get(L.AD_SOURCE),placementType:this.placementTypeService.getPlacementType(),time:this.getAdStartTime(),videoUrl:null!==(n=this.tokenService.get(L.ORIGINAL_VIDEO_URL))&&void 0!==n?n:this.tokenService.get(L.MAIN_STREAM),videoStart:0,videoEnd:this.getVideoEnd(),endcardInteractions:this.getEndcardInteractions(),endcardDuration:this.getEndcardDuration(),videoCloseShown:this.getVideoCloseShown(),endcardCloseShown:this.getEndcardCloseShown(),endcardInteractionsAfterCloseButton:this.getEndcardInteractionsAfterCloseButton(),rewarded:this.injectedIsIncentivized(this.tokenService),createDate:Date.now(),averageBandwidth:this.injectedGetVideoStreamAverageBandwidth()}}async addRecord(){let e=await this.indexedDatabaseService,t=this.getUserActivityData();return e.addRecord(t)}async getAllRecords(){return(await this.indexedDatabaseService).getAllRecords()}async deleteExpiredRecords(){return(await this.indexedDatabaseService).deleteExpiredRecords()}static getServiceIdentifier(){return"UserActivityServiceInterface"}constructor(e=aU(),t=n6(),n=y(),i=q(),r=au,a=j(),o=ia){super(),this.indexedDatabaseService=new aP(e,t,aB).getIndexedDatabaseService(),this.tokenService=n,this.reportingService=i,this.placementTypeService=a,this.injectedIsIncentivized=o,this.injectedGetVideoStreamAverageBandwidth=r}},aW=class extends a{getClickMetrics(){return this.clickMetrics}updateClickMetrics(e){e&&(this.clickMetrics=C(d({},this.clickMetrics),{clickX:e.x,clickY:e.y,width:window.innerWidth,height:window.innerHeight}))}static getServiceIdentifier(){return"ClickMetricsServiceInterface"}constructor(e=iM()){super(),this.clickMetrics={},e.addEventHandler("scene-event",((e,t)=>{t.event===ip.CLICK&&this.updateClickMetrics(t.data.click_coordinates),[ip.SCENE_START,ip.LAST_CHANCE_ENDCARD_OPEN].includes(t.event)&&(this.clickMetrics={})}))}},ax=0;function aF(e,t,n,i,r,a){t||(t={});var o,s,l=t;if("ref"in l)for(s in l={},t)"ref"==s?o=t[s]:l[s]=t[s];var d={type:e,props:l,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ax,__i:-1,__u:0,__source:r,__self:a};if("function"==typeof e&&(o=e.defaultProps))for(s in o)void 0===l[s]&&(l[s]=o[s]);return ef.vnode&&ef.vnode(d),d}const aK={V4_9_0:new w("4.9.0"),V4_9_3:new w("4.9.3"),V5_0_0:new w("5.0.0"),V5_0_1:new w("5.0.1"),V5_1_2:new w("5.1.2"),V5_2_1:new w("5.2.1")};(vu=_w||(_w={})).SILENT="silent",vu.UN_SILENT="un-silent";var aY=_w,aG=(e=R())=>{var t,n,i;return null!==(i=null===(n=e.getMraidExt())||void 0===n||null===(t=n.isSilent)||void 0===t?void 0:t.call(n))&&void 0!==i&&i},aj=(e=r.getInstance())=>e.get(nZ),aX=(e=aj())=>{let t=[],n=e=>{e.forEach((e=>{let i=e.getSceneType();(i===v3.video||i===v3.endcard)&&t.push(e),i===v3.composite&&n(e.getScenes())}))};return n(e),t.some((e=>e.muted))},az=()=>Z();const a$=(e=Z())=>e.getActivityEvents().some((e=>"silent"===e.activity.eventType&&(e.activity.name===aY.SILENT||e.activity.name===aY.UN_SILENT))),aZ=(e,t,n)=>{t||n||e.emit({type:"silent",event:aY.UN_SILENT})},aq=(e,t)=>{e.emit({type:"silent",event:t?aY.SILENT:aY.UN_SILENT})};var aQ=(e,t=R(),n=az(),i=G(),r=aX())=>{let a=aG(t);var o;i.getOperatingSystem()===eT.iOS?(null===(o=t.getMraid())||void 0===o||o.removeEventListener("silentChange",e),aZ(n,r,a)):aq(n,a)},aJ=()=>{let e=r.getInstance(),t=eB.getServiceIdentifier();return e.get(t)},a0=()=>Z(),a1=(e=a0(),t=aJ())=>{let n=t.isViewable();e.emit({type:"viewability",event:n?Q.MAXIMIZED:Q.MINIMIZED})},a2=()=>{let e=r.getInstance(),t=aS.getServiceIdentifier();return e.get(t)};(vE=_V||(_V={})).INFO="info",vE.READY="ready",vE.ERROR="error",vE.STATE_CHANGE="stateChange",vE.ORIENTATION_CHANGE="orientationChange",vE.VIEWABLE_CHANGE="viewableChange",vE.SIZE_CHANGE="sizeChange",vE.SILENT_CHANGE="silentChange",(_M||(_M={})).CLOSE_BUTTON_WILL_SHOW="closeButtonWillShow";var a3=class extends a{getEventCallbacks(e,t){return this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=this.callbacks[e][t]||[],[...this.callbacks[e][t]]}updateEventCallbacks(e,t,n){this.callbacks[e]||(this.callbacks[e]={}),this.callbacks[e][t]=n}addEventListener(e,t,n){if(!this.allowedMraidEvents.includes(t))return;let i=this.getEventCallbacks(e,t);this.updateEventCallbacks(e,t,[...i,n])}removeEventListener(e,t,n){if(this.allowedMraidEvents.includes(t))if(n){let i=this.getEventCallbacks(e,t).filter((e=>e!==n));this.updateEventCallbacks(e,t,i)}else this.updateEventCallbacks(e,t,[])}flushAllEventCallbacks(e){this.callbacks[e]&&Object.keys(this.callbacks[e]).forEach((t=>{this.updateEventCallbacks(e,t,[])}))}init(){this.mraidEvents.forEach((e=>{let t=(...n)=>{"silentChange"===e&&this.injectedHandleAdSilentMessage(t),"viewableChange"===e&&this.injectedHandleAdViewabilityMessage();let i=$();i&&this.getEventCallbacks(i.getId(),e).forEach((e=>{e(...n)}))};this.mraidService.getMraid().addEventListener(e,t)}))}triggerEvent(e,t,...n){"viewableChange"===t&&this.injectedPreloadService.isHTMLPreloading(e)||this.getEventCallbacks(e,t).forEach((e=>{e(...n)}))}static getServiceIdentifier(){return"MraidEventsProxyServiceInterface"}constructor(e,t=R(),n=aQ,i=a1,r=a2()){super(),this.mraidEvents=e,this.mraidService=t,this.injectedHandleAdSilentMessage=n,this.injectedHandleAdViewabilityMessage=i,this.injectedPreloadService=r,this.allowedMraidEvents=[...this.mraidEvents,...Object.values(_M)],this.callbacks={}}},a5=()=>{let e=r.getInstance(),t=a3.getServiceIdentifier();return e.get(t)};const a4=(e=y())=>e.has(L.ERID_ADVERTISER_INFO,L.ERID_ADVERTISER_LINK,L.ERID_RECOMMEND_RULE,L.CTA_BUTTON_URL);var a6=(e=y())=>({erid_advertiser_info:e.get(L.ERID_ADVERTISER_INFO),erid_advertiser_link:e.get(L.ERID_ADVERTISER_LINK),erid_recommend_rule:e.get(L.ERID_RECOMMEND_RULE)});const a8=e=>e?`?${e.toString()}`:"",a7=(e=y())=>{if(a4(e)){let t=new URLSearchParams;return t.set("adSource",V(e.get(L.ERID_ADVERTISER_INFO))),t.set("adUrl",V(e.get(L.ERID_ADVERTISER_LINK))),t.set("adRulesUrl",V(e.get(L.ERID_RECOMMEND_RULE))),t.set("adCtaUrl",e.get(L.CTA_BUTTON_URL)),`https://cdn-lb.vungle.com/privacy-policy-and-ad-info-erid/index.html${a8(t)}`}return e.get(L.VUNGLE_PRIVACY_URL)};var a9=()=>({[ne.SET_PRIVACY_BUTTON_VISIBLE]:p({isPrivacyButtonVisible:!0}),[ne.SET_PRIVACY_BUTTON_HIDDEN]:p({isPrivacyButtonVisible:!1}),[ne.OPEN_PRIVACY_URL]:()=>{var e,t;let n=G(),i=y(),r=aC(),a=n.getOperatingSystem(),o=a===eT.Android||a===eT.iOS&&n.getMraidVersion().isGreaterThanOrEqualTo(aK.V5_0_0);r.emit(d({name:eg.PRIVACY_CTA},a6(i))),o&&!a4()?null===(e=R().getMraidBridgeExt())||void 0===e||e.openPrivacy(a7(i)):null===(t=R().getMraid())||void 0===t||t.open(a7(i))},[ne.SET_PRIVACY_DRAWER_OPEN]:p({isPrivacyDrawerOpen:!0}),[ne.SET_PRIVACY_DRAWER_CLOSED]:p({isPrivacyDrawerOpen:!1}),[ne.TRIGGER_VIEWABLE_CHANGE]:e=>{let t=a5(),n=aJ();e.isPrivacyDrawerOpen?n.setViewable(!1):n.resetViewable();let i=$();i&&t.triggerEvent(i.getId(),_V.VIEWABLE_CHANGE,n.isViewable())}}),oe=()=>{var e;let t=null===(e=z.getValue())||void 0===e?void 0:e.scene;if((null==t?void 0:t.getSceneType())===v3.video)return t;if((null==t?void 0:t.getSceneType())===v3.composite){let e=t.getScenes().find((e=>e.getSceneType()===v3.video));if(e)return e}},ot=(e,t=oe)=>{var n;let i=null===(n=t())||void 0===n?void 0:n.getId();if(i)return(null!=e?e:t2()).interpreterMap.get(i)},on=()=>{let e=r.getInstance(),t=t1.getServiceIdentifier();return e.get(t)},oi=()=>{let e=r.getInstance(),t=ak.getServiceIdentifier();return e.get(t)},or=()=>{let e=r.getInstance(),t=aI.getServiceIdentifier();return e.get(t)},oa=(e=ot,t=oi())=>({[t5.MUTE_SOUND]:()=>{on().mute()},[t5.UN_MUTE_SOUND]:()=>{on().unmute()},[t5.EMIT_MUTED]:()=>{let e=iF(),t=on();e.emit({type:"video",event:t.isMuted()?iB.MUTE:iB.UNMUTE})},[t5.EMIT_VIDEO_ERROR]:(e,t)=>{iF().emit({type:"video",event:iB.ERROR,data:t})},[t5.CLOSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_y.CLOSE})},[t5.CLOSE_VIDEO_CURRENT_SCENE]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_y.CLOSE})},[t5.PAUSE_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_y.PAUSE})},[t5.PLAY_VIDEO]:()=>{var t;null===(t=e())||void 0===t||t.send({type:_y.PLAY})},[t5.POSTROLL_VIEW]:()=>{nz().emit(nY.POSTROLL_VIEW,!0)},[t5.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE]:()=>{aC().emit(eg.VIDEO_SKIP_TO_ENDCARD)},[t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT]:()=>{var n;let i=$(),r=null===(n=e())||void 0===n?void 0:n.state.context.videoElement;t.setVideoContext(i,r,e())},[t5.SHOW_PICTURE_IN_PICTURE]:p({shouldRenderPictureInPicture:()=>!0}),[t5.CLOSE_PICTURE_IN_PICTURE]:p({shouldRenderPictureInPicture:()=>!1}),[t5.SEND_FATAL_VIDEO_ERROR]:()=>{let e=or(),t={type:"error-logging",event:n4.RESOURCE,data:{resourceType:__.VIDEO,isFatal:!0,error:Error(H)}};e.send(t)}}),oo=(e=iM())=>({[_u.EMIT_CLOSE_BUTTON_SHOW]:()=>{e.emit(ip.CLOSE_BUTTON_SHOW)},[_u.EMIT_CLOSE_BUTTON_CLICK]:()=>{e.emit(ip.CLOSE_BUTTON_CLICK)},[_u.SET_CLOSE_BUTTON_VISIBLE]:p({isCloseButtonVisible:!0}),[_u.SET_CLOSE_BUTTON_HIDDEN]:p({isCloseButtonVisible:!1})}),os=()=>"true"===y().get(L.OM_ENABLED);(_k||(_k={})).REMOVE_HANDLER="REMOVE_HANDLER";var ol=()=>{try{return window.OmidSessionClient.default}catch(e){return}},od=class{init(e,t){var n,i;if(this.sessionClient=ol(),!this.sessionClient)return;let{AdSession:r,Partner:a,Context:o,VerificationScriptResource:s,AdEvents:l,MediaEvents:d}=this.sessionClient;if(t){let e=new s(t.vendorURL,t.vendorKey,t.params);this.verificationScriptResources=[e]}let c=G().getSdkVersion().toString();this.partner=new a(this.vungleData.partnerName,c||this.vungleData.partnerVersion),this.context=new o(this.partner,this.verificationScriptResources),void 0!==e&&(null===(n=this.context)||void 0===n||n.setVideoElement(e)),this.adSession=new r(this.context),(null===(i=this.adSession)||void 0===i?void 0:i.isSupported)&&this.adSession.isSupported()&&(this.adEvents=new l(this.adSession),this.mediaEvents=new d(this.adSession))}eventDrain(){this.funcsOnImpression.forEach((e=>{e()})),this.funcsOnImpression=[]}pushOrCallFunction(e){this.hasSessionStarted?e():this.funcsOnImpression.push(e)}onCtaClick(){this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.adUserInteraction("click")}))}constructor(){this.vungleData={partnerName:"Vungle",partnerVersion:"1.0"},this.hasSessionStartRequested=!1,this.initialized=!1,this.hasSessionStarted=!1,this.funcsOnImpression=[]}};(vv=_U||(_U={})).HTML_DISPLAY="htmlDisplay",vv.VIDEO="video";var oc=_U;(_B||(_B={})).LOADED="loaded";var ou=_B;(v_=_H||(_H={})).SESSION_START="sessionStart",v_.SESSION_ERROR="sessionError",v_.SESSION_FINISH="sessionFinish";var oE=_H,ov=class extends od{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0,super.init(),null===(e=this.adSession)||void 0===e||e.setCreativeType(oc.HTML_DISPLAY),null===(t=this.adSession)||void 0===t||t.setImpressionType(ou.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){Z().emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:"Unable to init omsdk banner and mrec"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,null===(t=this.adEvents)||void 0===t||t.loaded(null),this.eventDrain())}onSessionChange(e){if(e.type===oE.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();e.type===oE.SESSION_FINISH&&Z().emit({type:"cta",event:_k.REMOVE_HANDLER})}static getServiceIdentifier(){return"OmsdkHtmlDisplayServiceInterface"}constructor(){super(),this.init()}},o_=()=>{if(os()){let e=ov.getServiceIdentifier(),t=new ov;r.getInstance().bind(e,t)}},oh=e=>{e.length>0&&((new Image).src=e)},oT=()=>Z();const oS=(e,t)=>`${e}_${t}`,op=e=>{let t=e.split("_");return t[t.length-1]},og=(e,t)=>{var n,i;if(!(null===(n=t.data)||void 0===n?void 0:n.trackingEventMapConfig.enabled))return;let r=op(t.event),a=null===(i=t.data)||void 0===i?void 0:i.trackingEventMapConfig.events;if(!(null==a?void 0:a[r]))return;let o=a[r];null==o||o.forEach((e=>{oh(e)}))};var oC=(e=!0,t=oT())=>{tu((()=>e?(t.addEventHandler("tracking-event",og),()=>{t.removeEventHandler("tracking-event",og)}):()=>{}),[t,e])},oI=(e,t,n,i=!1,r=oT())=>{if(!t||!n||!n.enabled)return;let a=n.events;if(!(null==a?void 0:a[e]))return;let o=oS(t,e);r.emit({type:"tracking-event",event:o,fireOnlyOnce:i,data:{trackingEventMapConfig:n}})},oO=(e,t=aj())=>{let n=t.find((t=>t.getId()===e.value));if(!n)throw Error(`No scene found for state ${e.value}`);return n},oA=(e=$,t=t3,n=nz,i=oI)=>({[il.ON_CREATIVE_VIEW]:()=>{let t=e();t&&[v3.endcard,v3.image].includes(t.getSceneType())&&i(v4.CREATIVE_VIEW,t.getId(),t.getTrackingEventMapConfig(),!0)},[il.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS]:()=>{let e=$();e&&a5().flushAllEventCallbacks(e.getId())},[il.DESTROY_IFRAME]:p({shouldRenderIFrame:!1}),[il.INIT_CHECKPOINTS]:()=>{!n().hasExistingEvent({type:"tpat",event:nY.CHECKPOINT_0})&&aJ().isViewable()&&iZ(0)},[il.INIT_OMSDK_HTML_DISPLAY_SERVICE]:()=>{o_()},[il.ON_ENDCARD_CLOSE_BUTTON_WILL_SHOW]:()=>{let e=a5(),t=$();t&&(e.triggerEvent(t.getId(),_M.CLOSE_BUTTON_WILL_SHOW),e.removeEventListener(t.getId(),_M.CLOSE_BUTTON_WILL_SHOW))},[il.ON_SHOW]:()=>{let e=t2().interpreterMap.get("ad");if(e){let n=t(oO(e.state).getId());null==n||n.send({type:vQ.SHOW})}}});(vh=_W||(_W={})).SHOW="SHOW",vh.HIDE="HIDE",(vT=_x||(_x={})).SHOWING="SHOWING",vT.HIDDEN="HIDDEN",(vS=_F||(_F={})).ON_LAST_CHANCE_ENDCARD_SHOW="onLastChanceEndcardShow",vS.ON_LAST_CHANCE_ENDCARD_HIDE="onLastChanceEndcardHide";const of="last-chance-endcard",om=e=>({id:null!=e?`${of}-${e}`:of,initial:_x.HIDDEN,context:{delay:0},states:{[_x.SHOWING]:{on:{[_W.HIDE]:{target:_x.HIDDEN,actions:[_F.ON_LAST_CHANCE_ENDCARD_HIDE]}}},[_x.HIDDEN]:{on:{[_W.SHOW]:{target:_x.SHOWING,actions:[_F.ON_LAST_CHANCE_ENDCARD_SHOW]}}}}}),oN={actions:{[_F.ON_LAST_CHANCE_ENDCARD_SHOW]:()=>{iM().emit(ip.LAST_CHANCE_ENDCARD_OPEN)},[_F.ON_LAST_CHANCE_ENDCARD_HIDE]:()=>{iM().emit(ip.LAST_CHANCE_ENDCARD_CLOSE)}}};var oD=(e,t)=>{let n=null!=t?t:t2(),i=null!=e?`${of}-${e}`:of;return n.interpreterMap.get(i)};const oR=X({isLastChanceEndcardOverlayShowing:!1},"LastChanceEndcardOverlayContext");(vp=_K||(_K={})).SHOW_LAST_CHANCE_ENDCARD="showLastChanceEndcard",vp.CLOSE_LAST_CHANCE_ENDCARD="closeLastChanceEndcard";var oy=()=>({showLastChanceEndcard:()=>{let e=z.getValue().scene;if(nk(e)){let t=oD(e.getId());oR.setValue({isLastChanceEndcardOverlayShowing:!0}),null==t||t.send({type:_W.SHOW})}},closeLastChanceEndcard:()=>{oR.setValue({isLastChanceEndcardOverlayShowing:!1});let e=z.getValue().scene;if(nk(e)){let t=oD(e.getId());null==t||t.send({type:_W.HIDE})}}}),oL=class extends a{initializeForComponent(e,t,n){0!==t&&(this.storeKitOverlayService.canOpen()?e(!0):this.timerService.getNewTimer(n,(()=>{this.initializeForComponent(e,t-1,n)})).start())}startAutoShow(e){var t;if(this.reset(),!e.enabled)return Promise.resolve();let n=this.timerService.getNewTimer(null!==(t=e.autoShowDelay)&&void 0!==t?t:0);return this.openTimer=n,(async()=>{let t;if(e.isAutoClose){var i;let n=null!==(i=e.autoCloseDelay)&&void 0!==i?i:5e3;t=this.timerService.getNewTimer(n,(()=>{this.storeKitOverlayService.close()})),this.closeTimer=t}this.storeKitOverlayService.open({delayed:!0,fallback:_n.OFF}),await n.asPromise().then((()=>{this.storeKitOverlayService.open({delayed:!0,fallback:_n.OFF}),t&&t.start(),e.openCallback&&e.openCallback(),n.destroy()}))})()}reset(){this.openTimer&&(this.openTimer.destroy(),this.openTimer=void 0),this.closeTimer&&(this.closeTimer.destroy(),this.closeTimer=void 0)}static getServiceIdentifier(){return"StoreKitOverlayAutoShowServiceInterface"}constructor(e,t=t7()){super(),this.storeKitOverlayService=e,this.timerService=t}},oP=()=>{let e=r.getInstance(),t=oL.getServiceIdentifier();if(e.has(t))return e.get(t)};(_Y||(_Y={})).RESET_AUTO_SHOW_OVERLAY_SERVICE="resetAutoShowOverlayService";var ob=(e=oP)=>({resetAutoShowOverlayService:()=>{let t=e();null==t||t.reset()}}),ow=()=>d({},is(),a9(),oa(),nd(),ob(),nA(),t9(),t8(),oo(),oA(),oy()),oV=(e=y())=>({isPrivacyButtonVisible:!1,isPrivacyDrawerOpen:!1,isCloseButtonVisible:!1,shouldRenderIFrame:!0,shouldRenderPictureInPicture:!1,isFreeForm:e.has(L.AD_EXPERIENCE),allowDebug:e.has(L.IS_RUNNING_INSIDE_EMBED)||e.has(L.IS_STAFF_DEVICE_BID)}),oM=class{convertScene(e){let t=e.getTransitions(),n={[e.getId()]:{entry:[],exit:[],on:{}}};return e.getEntryActions().forEach((t=>{n[e.getId()].entry.push(t.name)})),e.getExitActions().forEach((t=>{n[e.getId()].exit.push(t.name)})),t.forEach((t=>{let i=t.actions.map((e=>e.name)),{cond:r}=t;t.scene?n[e.getId()].on[t.name]={actions:i,target:t.scene.getId(),cond:r}:n[e.getId()].on[t.name]={actions:i,cond:r}})),this.removeFalsyValues(n)}convertScenes(e){let t={};return e.forEach((e=>{Object.assign(t,this.convertScene(e))})),t}removeFalsyValues(e){return Object.keys(e).forEach((t=>{e[t]&&"object"==typeof e[t]?(this.removeFalsyValues(e[t]),0===Object.keys(e[t]).length&&delete e[t]):e[t]||delete e[t]})),e}},ok=()=>{let e=new oM,t=aj(),n=e.convertScenes(t);return{id:"ad",initial:t[0].getId(),states:n,context:oV()}};(_G||(_G={})).DECODING_ERROR="decoding_error";var oU=_G,oB=(e=R(),t=j())=>{var n,i,r,a,o,s;return null!==(s=null!==(o=null===(i=e.getMraidExt())||void 0===i||null===(n=i.getConsentRequired)||void 0===n?void 0:n.call(i))&&void 0!==o?o:null===(a=e.getMraid())||void 0===a||null===(r=a.getConsentRequired)||void 0===r?void 0:r.call(a))&&void 0!==s&&s&&!t.isBanner()},oH=class{parseAdExperienceData(e){try{let t=V(e);return JSON.parse(t)}catch(e){return void this.freeFormReportingService.emit({type:"free-form",event:oU.DECODING_ERROR})}}getAdExperience(e=oB(this.mraidService,this.placementTypeService)){var t,n;if(!this.adExperienceCache){let n=null!==(t=this.tokenService.get(L.AD_EXPERIENCE))&&void 0!==t?t:"",i=this.parseAdExperienceData(n);this.adExperienceCache=this.addGDPRSceneIfConsentRequired(i,e)}return null!==(n=this.adExperienceCache)&&void 0!==n?n:{components:{},statemachine:{id:"ad",initial:"closed",states:{}}}}addGDPRSceneIfConsentRequired(e,t=oB(this.mraidService,this.placementTypeService)){if(e&&t){let t=e.statemachine.initial;e.statemachine.states.gdpr={on:{[v2.NEXT]:{target:t}}},e.statemachine.initial=nq}return e}getAdMachineConfig(){let e=this.getAdExperience();return C(d({},null==e?void 0:e.statemachine),{id:"ad"})}getSceneData(){let e=this.getAdExperience();return(null==e?void 0:e.components)?Object.entries(e.components).map((([e,t])=>C(d({},t),{id:e}))):[]}constructor(e=y(),t=Z(),n=R(),i=j(),r=r3()){this.tokenService=e,this.freeFormReportingService=t,this.mraidService=n,this.placementTypeService=i,this.htmlDecoderService=r}},oW=(e=new oH,t=aj())=>{let n=e.getAdMachineConfig();return n.states=n.states||{},t.forEach((e=>{let t=e.getId();n.states[t]=n.states[t]||{on:{},entry:[],exit:[]},e.getTransitions().forEach((e=>{if(n.states[t].on){var i,r,a;let o=e.name,s=null===(i=e.scene)||void 0===i?void 0:i.getId(),l=null===(r=n.states[t].on)||void 0===r?void 0:r[o],c={actions:Array.from(new Set([...Array.from(null!==(a=null==l?void 0:l.actions)&&void 0!==a?a:[]),...e.actions.map((e=>e.name))])),cond:(null==l?void 0:l.cond)?l.cond:e.cond};s&&(c.target=s),n.states[t].on[o]=d({},null!=l?l:{},c)}})),n.states[t].entry||(n.states[t].entry=[]),n.states[t].entry.push(...e.getEntryActions().map((e=>e.name))),n.states[t].exit||(n.states[t].exit=[]),n.states[t].exit.push(...e.getExitActions().map((e=>e.name)))})),C(d({},n),{context:d({},oV(),n.context)})},ox=()=>Z();(_j||(_j={})).SCENE_BUILDER_COMPLETE="SCENE_BUILDER_COMPLETE";var oF=_j,oK=(e,t,n={})=>{let i=[],r=new Set,a=new Set,o=t.reduce(((e,t)=>(e[t.getId()]=t,e)),{});return function t(s){var l,d,c;let u,E;if(a.has(s))return;a.add(s);let v=o[s],_=v?v.getSceneType():v3.closed,h=!!v&&v.isAlternative();u=1===a.size?"start":_===v3.closed?"end":"intermediate";let T=[];h&&T.push("Alternate"),T.push((E=n[_]||_)?E.charAt(0).toUpperCase()+E.slice(1):E),i.some((e=>e.id===s))||i.push({id:s,label:T.join(" "),type:u,alternative:h,connections:[]});let S=(null===(l=e.states[s])||void 0===l?void 0:l.on)||{},p=null;if("LAST_CHANCE_ENDCARD"in S){p=`${s}_last_chance`,i.some((e=>e.id===p))||i.push({id:p,label:"Last Chance Endcard",alternative:h,type:"intermediate",connections:[]});let e=`${s}->${p}`;r.has(e)||(r.add(e),null===(c=i.find((e=>e.id===s)))||void 0===c||null===(d=c.connections)||void 0===d||d.push(p))}Object.keys(S).forEach((e=>{let n=S[e];if(null==n?void 0:n.target){let e=n.target,l=s;p&&(l=p);let d=`${l}->${e}`;var a,o;if(!r.has(d))r.add(d),null===(o=i.find((e=>e.id===l)))||void 0===o||null===(a=o.connections)||void 0===a||a.push(e),t(e)}}))}(e.initial),{nodes:i.map((e=>{var t;let n=null===(t=e.connections)||void 0===t?void 0:t.filter((t=>{var n;return t!==v3.closed||!(null===(n=e.connections)||void 0===n?void 0:n.some((e=>e!==v3.closed)))}));return C(d({},e),{connections:n})}))}},oY=(e=y(),t=ox())=>{let n;n=e.has(L.AD_EXPERIENCE)?oW():ok();let i={actions:d({},ow())};return e.has(L.IS_RUNNING_INSIDE_EMBED)&&t.emit({type:"scene-builder-event",event:oF.SCENE_BUILDER_COMPLETE,data:oK(n,aj(),{endcard:"Playable"})}),[n,i]};const oG=(e=t2())=>{let t=e.machineMap.get("ad");if(t)return t.machine;let[n,i]=oY();return e.createMachine(n,i)};var oj=(e=t2())=>e.interpret(oG(e)),oX=function(e,t,n=t2()){let i=tv((()=>n.createMachine(e,t)),[e]),r=tX(i.initialState),[a,o]=tv((()=>{let e=n.interpret(i),t=e.subscribe((e=>{r.value=e}));return[e,t]}),[i]);return tu((()=>(a.status!==eu.Running&&a.start(),()=>{o.unsubscribe(),a.stop()})),[a]),[r,a.send,a,e]};(vg=_X||(_X={})).CALL="CALL",vg.DONE="DONE",(vC=_z||(_z={})).IDLE="IDLE",vC.BUSY="BUSY";const oz=e=>({id:`throttle-${e}`,initial:_z.IDLE,context:{},states:{IDLE:{on:{[_X.CALL]:{target:_z.BUSY}}},BUSY:{on:{[_X.DONE]:{target:_z.IDLE}}}}});var o$=()=>document.querySelector("#dynamic");(_$||(_$={})).CLOSE="vungle.events.request.close";var oZ=_$,oq=()=>Z(),oQ=()=>{let e=r.getInstance(),t=aN.getServiceIdentifier();return e.get(t)},oJ=(e,t=aC(),n=aj)=>{if(e.getSceneType()===v3.closed)return;let i=d({name:eg.SCENE_START,scene_id:e.getId(),scene_type:e.getSceneType(),scene_index:n().indexOf(e)},e.getObservabilityData());t.emit(i)},o0=(e=o$())=>{let t=oj(),n=t.send,i=tX(t.state),r=oX(oz("ad")),[a,o]=r,s=tv((()=>e=>{[v2.NEXT,v2.LAST_CHANCE_ENDCARD,v2.LAST_CHANCE_ENDCARD_CLOSE].includes(e.type)?a.value.matches(_z.IDLE)&&(o({type:_X.CALL}),n(e),window.setTimeout((()=>{o({type:_X.DONE})}),500)):n(e)}),[r]);return tu((()=>{let e=t.subscribe((e=>{let t=i.value;if(i.value=e,e.changed&&t.value!==e.value){let n=oO(t),i=oQ();i.end(n);let r=oO(e);z.setValue({scene:r}),i.start(r),oJ(r)}}));return()=>{e.unsubscribe()}}),[t]),tu((()=>{let t=oq(),r=()=>{var e;t.emit({type:"custom-mraid",event:oZ.CLOSE,data:d({isVideoState:(null===(e=oO(i.value))||void 0===e?void 0:e.getSceneType())===v3.video,sendAdEvent:n},i.value.context)})};return null==e||e.addEventListener(oZ.CLOSE,r),()=>{null==e||e.removeEventListener(oZ.CLOSE,r)}}),[e]),[i,s]};const o1="close-or-skip-button",o2="privacy-drawer",o3="shield-icon";_Z="wnLcbW_closeIcon",_q="wnLcbW_fallback";var o5=()=>(tu((()=>{t7().getNewTimer(500,(()=>{nv()})).start()}),[]),aF("div",{id:"app-store-transition-fallback",className:_q,children:aF("button",{title:"Close","aria-label":"Close",id:o1,type:"button",onClick:()=>{nv()},style:_Z,children:aF("div",{className:_Z})})})),o4=class extends ez{componentDidCatch(e,t){Z().emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:e.message,stack:`Stack trace:\n${e.stack}\n\nError info:\n${JSON.stringify(t)}\n`}}})}render(){let{children:e}=this.props;return e}},o6=class{getConsentTitleText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentTitleText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentTitleText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"Ad-Interaction Data Collection"}getConsentBodyText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentBodyText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentBodyText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"With permission, Liftoff collects your ad-interaction data to serve relevant ads to you. Note: you'll see ads independent of your selection, but they may not be as relevant. Do you consent to data tracking for more relevant ads?"}getConsentAcceptButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentAcceptButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentAcceptButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I consent"}getConsentDenyButtonText(){var e,t,n,i,r,a;return null!==(a=null!==(r=null===(t=this.mraidService.getMraidExt())||void 0===t||null===(e=t.getConsentDenyButtonText)||void 0===e?void 0:e.call(t))&&void 0!==r?r:null===(i=this.mraidService.getMraid())||void 0===i||null===(n=i.getConsentDenyButtonText)||void 0===n?void 0:n.call(i))&&void 0!==a?a:"I do not consent"}consentAction(e){var t;null===(t=this.mraidService.getMraidBridgeExt())||void 0===t||t.consentAction(e)}constructor(e=R()){this.mraidService=e}};_Q="C4yOdG_bodyText",_J="C4yOdG_buttons",_0="C4yOdG_content",_1="C4yOdG_gdpr",_2="C4yOdG_header",_3="C4yOdG_icon",_5="C4yOdG_primaryButton",_4="C4yOdG_secondaryButton",_6="C4yOdG_title";var o8=({sendAdEvent:e=()=>{}})=>{let t=new o6,n=n=>{t.consentAction(n),e({type:v2.NEXT})};return aF("div",{className:_1,id:"gdpr",children:[aF("div",{className:_0,children:[aF("header",{className:_2,children:[aF("span",{className:_3}),aF("h3",{id:"gdpr-title",className:_6,children:t.getConsentTitleText()})]}),aF("p",{id:"gdpr-body-text",className:_Q,children:t.getConsentBodyText()})]}),aF("div",{className:_J,children:[aF("button",{type:"button",id:"gdpr-accept",className:_5,onClick:()=>n("opted_in"),children:t.getConsentAcceptButtonText()}),aF("button",{type:"button",id:"gdpr-deny",className:_4,onClick:()=>n("opted_out"),children:t.getConsentDenyButtonText()})]})]})},o7=(e,t)=>{tu((()=>{let n=window.setInterval((()=>{var i;(null===(i=e.current)||void 0===i?void 0:i.complete)&&(t({type:v2.PRIVACY_LOGO_SHOW}),window.clearInterval(n))}),100);return()=>{window.clearInterval(n)}}),[])},o9=(...e)=>e.filter(Boolean).join(" "),se=class{clickHandler(e){this.reportingService.emit({type:"fsc",event:aw.FSC,data:{ctaUrl:e}})}constructor(e=aM()){this.reportingService=e}};_8="_7pzQ5q_hidden",_7="_7pzQ5q_overlayCta";const st=tL(!1),sn=(e,t)=>{st.value=t.event===Q.MINIMIZED},si=e=>e?`${e}-fullscreen-overlay`:"fullscreen-overlay";var sr=({config:e,ctaUrl:t,service:n=new se,reportingService:i=a0(),children:r})=>(tu((()=>(i.addEventHandler("viewability",sn),()=>{i.removeEventHandler("viewability",sn)})),[]),aF(eX,{children:[e.enabled&&aF("button",{className:o9(_7,st.value?_8:""),type:"button",id:si(e.id),"aria-label":"fsc","aria-hidden":st.value,onClick:()=>n.clickHandler(t)}),r]}));(vI=_9||(_9={})).SHOW="ASOD_SHOW",vI.CLOSE="ASOD_CLOSE",(vO=he||(he={})).INITIAL="ASOD_INITIAL",vO.SHOWN="ASOD_SHOWN",(vA=ht||(ht={})).SET_DELAY="ASOD_SET_DELAY",vA.OPEN_APP_STORE="ASOD_OPEN_APP_STORE";var sa=class extends a{fireStoreKitOverlayWithDelay(e){let t=nl();new N(e,(()=>{(null==t?void 0:t.canOpen())&&(null==t||t.open())})).start()}openStoreViewWithDelay(e){if(nT()&&nI())return void this.fireStoreKitOverlayWithDelay(e);let t=t7().getNewTimer(e,(()=>{let e=nh();null==e||e.open(!1)}));t.start(),this.timer=t}reset(){var e;null===(e=this.timer)||void 0===e||e.destroy()}static getServiceIdentifier(){return"AppStoreOnDelayServiceInterface"}},so=()=>{let e=r.getInstance(),t=sa.getServiceIdentifier();return e.get(t)};const ss=e=>({id:`app-store-on-delay-${e}`,initial:he.INITIAL,context:{delay:0},states:{[he.INITIAL]:{on:{[_9.SHOW]:{target:he.SHOWN,actions:[ht.SET_DELAY]}}},[he.SHOWN]:{entry:[ht.OPEN_APP_STORE]}}}),sl={actions:{[ht.SET_DELAY]:p({delay:(e,t)=>t.delay}),[ht.OPEN_APP_STORE]:e=>{so().openStoreViewWithDelay(e.delay)}}};var sd=(e,t,n=!0,i=!0)=>{let[,r]=oX(ss(e),sl);tu((()=>t.enabled&&n&&i?(r({type:_9.SHOW,delay:t.autoShowDelay}),()=>{so().reset()}):()=>{}),[n,i])},sc=(e,t=!0,n=oP(),i=nl())=>{let r=tX(null==i?void 0:i.canOpen()),a=tX(!1);tu((()=>(e.enabled&&r.value&&t&&!a.value&&(null==n||n.startAutoShow(e),a.value=!0),()=>{})),[t,r.value,a.value]),tu((()=>{e.enabled&&(null==n||n.initializeForComponent((e=>{r.value=e}),10,500))}),[]),tu((()=>a.value?()=>null==n?void 0:n.reset():()=>{}),[])},su=(e,t=t6())=>{let n=tX(e),i=tE(void 0),r=()=>{var e;null==i||null===(e=i.current)||void 0===e||e.destroy(),i.current=void 0};return tu((()=>{var e;void 0===i.current&&(i.current=t.getNewInterval(1e3,(()=>{let e=n.value-1;n.value=e<=0?0:e})),null===(e=i.current)||void 0===e||e.start());return()=>r()}),[]),t0((()=>{0===n.value&&r()})),n};hn="NQnIja_countdown";var sE=({delay:e,isVisible:t=!0,children:n})=>{let i=su(e);if(i.value>0&&!t)return aF("div",{id:"countdown"});if(i.value>0&&t){let e=Math.round(i.value);return 0===e?null:aF("div",{id:"countdown",className:hn,children:e})}return aF("div",{children:n})},sv=(e,t,n=Z())=>(tu((()=>(n.addEventHandler(e,t),()=>{n.removeEventHandler(e,t)})),[n,e,t]),()=>{n.removeEventHandler(e,t)});const s_=[ev.MREC,ev.BANNER,ev.IN_LINE];var sh=class{placementSupportsNextButton(){return!s_.includes(this.placementTypeService.getPlacementType())}constructor(e=j()){this.placementTypeService=e}},sT=(e=nz())=>e.getActivityEvents().some((e=>e.activity.name===nY.CLICK_URL||e.activity.name===nY.POSTROLL_CLICK)),sS=class{getButtonPadding(e=0,t=10){return sT()?t:Math.min(Math.max(parseInt(this.tokenService.get(L.CLOSE_BUTTON_PADDING),10)||e,e),t)}constructor(e=y()){this.tokenService=e}};hi="mqB7Ka_closeIcon",hr="mqB7Ka_skipIcon";var sp=({sendEvent:e=()=>{},type:t=nf.CLOSE,service:n=new sS,showLastChanceEndcard:i=!1,beforeClick:r=()=>{}})=>{let a=t===nf.SKIP?hr:hi,o=t===nf.SKIP?"Skip button":"Close button",s=tX(n.getButtonPadding());tu((()=>{e&&e({type:v2.CLOSE_BUTTON_WILL_SHOW})}),[]),sv("tpat",(()=>{s.value=n.getButtonPadding()}));let l=-s.value;return aF("button",{title:o,"aria-label":o,id:o1,type:"button",style:{padding:`${s.value}px`,margin:`${l}px`},onClick:t=>{t.stopPropagation(),e({type:v2.CLOSE_BUTTON_CLICK}),r(),e(i?{type:v2.LAST_CHANCE_ENDCARD}:{type:v2.NEXT})},children:aF("div",{className:a})})};ha="LJWyoG_nextButton";const sg=tL(!0);var sC=({sendAdEvent:e,showLastChanceEndcard:t=!1,config:n,beforeClick:i=()=>{}})=>{let{delay:r=0,countdown:a=!0}=n,o=new sh,s=r>0;return sv("viewability",((e,t)=>{sg.value=t.event===Q.MAXIMIZED})),o.placementSupportsNextButton()?aF("div",{id:t?"last-chance-endcard-next-button":"next-button",className:ha,role:"button",tabIndex:0,"data-countdown-running":sg.value,children:s?aF(sE,{delay:r,isVisible:a,children:aF(sp,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):aF(sp,{sendEvent:e,type:n.style,showLastChanceEndcard:t,beforeClick:i})}):null},sI=e=>{let[t]=oX(om(e),oN);return t};(vf=ho||(ho={})).DOWNLOAD_BUTTON_CTA="DOWNLOAD_BUTTON_CTA",vf.ENDCARD_CTA="ENDCARD_CTA",vf.LAST_CHANCE_ENDCARD_CTA="LAST_CHANCE_ENDCARD_CTA",vf.PERSISTENT_CTA="PERSISTENT_CTA";var sO=ho,sA=class{emitClickEvents(){this.ctaReportingService.emit({type:"cta",event:sO.LAST_CHANCE_ENDCARD_CTA})}constructor(e=Z()){this.ctaReportingService=e}};hs="poFP6W_animate",hl="poFP6W_backgroundNone",hd="poFP6W_button",hc="poFP6W_icon",hu="poFP6W_lastChanceEndCard",hE="poFP6W_name",hv="poFP6W_opaque",h_="poFP6W_overlay";const sf=tL(!1);var sm=({config:e,sendAdEvent:t=()=>{},backgroundNone:n=!1,onVisibilityChange:i})=>{var r,a,o,s,l,d,c,u;let E=new sA,v=tE(null),_=sI(e.id);o7(v,t);let h=()=>{sf.value=!0,E.emitClickEvents()};return tu((()=>{i(e.enabled&&!_.value.matches(_x.HIDDEN))}),[e.enabled,_.value]),!e.enabled||_.value.matches(_x.HIDDEN)?null:aF("div",{className:o9(h_,null!=(null===(r=e.appMeta)||void 0===r?void 0:r.icon)?hv:""),id:"last-chance-endcard-overlay",children:aF(sr,{config:{enabled:!!(null===(a=e.fsc)||void 0===a?void 0:a.enabled)},children:[aF(sC,{sendAdEvent:t,config:null!==(u=e.close)&&void 0!==u?u:{},showLastChanceEndcard:!1}),aF("div",{className:o9(hu,n?hl:""),id:"last-chance-endcard",children:[(null===(o=e.appMeta)||void 0===o?void 0:o.icon)&&aF("img",{className:hc,ref:v,src:null===(s=e.appMeta)||void 0===s?void 0:s.icon,alt:null===(l=e.appMeta)||void 0===l?void 0:l.name,id:"last-chance-endcard-app-icon",onClick:h,"aria-hidden":"true"}),aF("p",{className:hE,id:"last-chance-endcard-app-name",onClick:h,"aria-hidden":"true",children:null===(d=e.appMeta)||void 0===d?void 0:d.name}),aF("button",{type:"button",className:o9(hd,sf.value?"":hs),"data-animate":!sf.value,onClick:h,id:"last-chance-endcard-cta",children:null===(c=e.cta)||void 0===c?void 0:c.text})]})]})})},sN=(e,t=!0)=>{tu((()=>t?(e&&e({type:v2.CLOSE_BUTTON_MOUNT}),()=>{e&&e({type:v2.CLOSE_BUTTON_UNMOUNT})}):()=>{}),[t])},sD=(e=y())=>{var t;return null!==(t=e.get(L.CTA_BUTTON_URL))&&void 0!==t?t:""},sR=class extends a{openCTAWithMraid(){var e;this.url&&(null===(e=this.mraidService.getMraid())||void 0===e||e.open(this.url))}openOverlayView(){var e;null===(e=this.storeKitOverlayService)||void 0===e||e.open()}openProductView(){var e;null===(e=this.productViewService)||void 0===e||e.open()}handleOverlayViewCTA(){var e;this.isStoreKitOverlaySupported?this.openOverlayView():(null===(e=this.productViewService)||void 0===e?void 0:e.canOpen())?this.openProductView():this.openCTAWithMraid()}notifyClickEventToEDsp(){let{isClickEventFromIframe:e,url:t}=this;e&&t&&oh(t)}handleProductViewCTA(){var e,t;null!==(e=this.productViewService)&&void 0!==e&&e.isOpen()||(this.shouldReplaceShowStoreKitOverlay?this.openOverlayView():this.appStoreId&&(null===(t=this.productViewService)||void 0===t?void 0:t.canOpen())?(this.openProductView(),this.notifyClickEventToEDsp()):this.openCTAWithMraid())}invoke(e){let{target:t,url:n,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:r}=e;if((void 0===e.fireMMPEvents||e.fireMMPEvents)&&this.injectedFireMMPEvents(),this.url=n||this.ctaButtonUrl,this.shouldReplaceShowStoreKitOverlay=null!=i&&i,this.isClickEventFromIframe=null!=r&&r,this.environmentService.getOperatingSystem()===eT.iOS)switch(t){case v5.OFF:this.openCTAWithMraid();break;case v5.SKO:this.handleOverlayViewCTA();break;case v5.SKPV:default:this.handleProductViewCTA()}else this.openCTAWithMraid()}static getServiceIdentifier(){return"CallToActionServiceInterface"}constructor(e=R(),t=G(),n=nh(),i=nl(),r=nI(),a=nJ(),o=sD(),s=n$){super(),this.mraidService=e,this.environmentService=t,this.productViewService=n,this.storeKitOverlayService=i,this.isStoreKitOverlaySupported=r,this.appStoreId=a,this.ctaButtonUrl=o,this.injectedFireMMPEvents=s,this.url="",this.shouldReplaceShowStoreKitOverlay=!1,this.isClickEventFromIframe=!1}},sy=()=>{let e=r.getInstance(),t=sR.getServiceIdentifier();return e.get(t)},sL=({trackingEventMapConfig:e,fullScreenClickConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sy(),injectedEmitTrackingEvent:a=oI,sceneEventReportingService:o=iM()})=>sv("fsc",(()=>{(null==t?void 0:t.enabled)&&(r.invoke({target:t.target,url:t.ctaUrl,shouldReplaceShowStoreKitOverlay:i}),a(v4.CLICK_THROUGH,n,e),o.emit(ip.CLICK))})),sP=({callToActionConfig:e,trackingEventMapConfig:t,sceneId:n,shouldReplaceShowStoreKitOverlay:i,callToActionService:r=sy(),injectedEmitTrackingEvent:a=oI,sceneEventReportingService:o=iM()})=>sv("cta",((s,l)=>{if(e){var d,c;let{target:s,url:u}=e,E=l.event===sO.ENDCARD_CTA;r.invoke({target:s,url:null!==(c=null===(d=l.data)||void 0===d?void 0:d.ctaUrl)&&void 0!==c?c:u,shouldReplaceShowStoreKitOverlay:i,isClickEventFromIframe:E}),a(v4.CLICK_THROUGH,n,t),o.emit(ip.CLICK)}}));(hh||(hh={})).APP_META_UPDATE="APP_META_UPDATE";var sb=hh,sw=()=>Z(),sV=(e,t=!0,n=sw())=>{tu((()=>{var i;t&&e&&"function"==typeof e.getCallToActionConfig&&n.emit({type:"app-meta",event:sb.APP_META_UPDATE,data:null!==(i=e.getCallToActionConfig().appMeta)&&void 0!==i?i:{enabled:!1}})}),[t])},sM=(e=document.documentElement)=>"ontouchstart"in e?"touchstart":"click";const sk=e=>{let t=document.querySelector(`#${o1}`);if(null===t)return!1;let{clientX:n,clientY:i}=e,{top:r,right:a,bottom:o,left:s}=t.getBoundingClientRect();return(n<s&&n>=s-30||n>a&&n<=a+30)&&i>=r-30&&i<=o+30||(i<r&&i>=r-30||i>o&&i<=o+30)&&n>=s-30&&n<=a+30},sU=e=>{let t=window.innerWidth-75,n=75;return e.clientX>=t&&e.clientY<=n},sB=(e,t=iM())=>{if(void 0===e)return;let n={clientX:"touches"in e?e.touches[0].clientX:e.clientX,clientY:"touches"in e?e.touches[0].clientY:e.clientY};(document.querySelector(`#${o1}`)?sk(n):sU(n))&&t.emit(ip.NEAR_CLOSE_BUTTON_CLICK)},sH=[ae,o1,o3,o2],sW=(e,t)=>{if(e instanceof Element){var n;let i=null!==(n=e.getAttribute("id"))&&void 0!==n?n:"";return!t.includes(i)&&("body"===e.tagName.toLowerCase()||sW(e.parentElement,t))}return!0},sx=(e,t,n=$())=>{if(!sW(e.target,sH))return;let{clientX:i,clientY:r}="touches"in e?e.touches[0]:e;t.emit({type:"scene-event",event:ip.CLICK,data:{scene_id:n.getId(),scene_type:n.getSceneType(),click_coordinates:{x:i,y:r}}})},sF=(e,t=iM)=>{let n=t();sx(e,n),sB(e,n)};var sK=(e,t=!0,n=sF,i=iM)=>{tu((()=>{if(!t)return()=>{};let e=e=>{n(e,i)};return document.body.addEventListener(sM(),e,!0),()=>{document.body.removeEventListener(sM(),e,!0)}}),[e,t])};hT="J2DrKG_staticImageEndcard";const sY=tL(!1);var sG=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,customClassName:i,useBackgroundImage:r=!1})=>{let a=tE(null);return sd(e.getId(),e.getAppStoreOnDelayConfig()),sc(e.getStoreKitOverlayAutoShowConfig()),o7(a,t),sN(t),oC(),sV(e),sL({fullScreenClickConfig:sY.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sP({callToActionConfig:sY.value?e.getLastChanceEndcardConfig().cta:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),tu((()=>{t({type:v2.CREATIVE_VIEW})}),[]),sK(sY.value),aF(eX,{children:[aF(sm,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{sY.value=e}}),aF("div",{className:null!=i?i:hT,style:r?{backgroundImage:`url(${e.url})`}:{},children:aF(sr,{config:e.getFullScreenClickConfig(),ctaUrl:e.getFullScreenClickConfig().ctaUrl,children:[n&&!sY.value&&aF(sC,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aF("img",{src:e.url,ref:a,alt:"image",id:e.getId()})]})})]})};(vm=hS||(hS={})).Native="native",vm.Custom="custom",vm.NotSupported="not-supported",(vN=hp||(hp={})).Manifest="manifest",vN.Video="video";var sj=(e=z)=>{let t=e.getValue().scene;return ah(t)?X({startSn:void 0},`FragmentLoadingContext_${null==t?void 0:t.getId()}`):null};class sX extends window.Hls.DefaultConfig.loader{openAndSendXhr(e,t,n){let i=new ad;this.hasCachedManifest(t,i)?this.loadFromString(i.getCachedManifest(),e,t):this.hasCachedLevel(t,i)?this.loadFromString(i.getCachedFirstTrack(),e,t):super.openAndSendXhr(e,t,n)}load(e,t,n,i=z,r=sj,a=iF()){let{onSuccess:o}=n;super.load(e,t,C(d({},n),{onSuccess:(e,t,n,s)=>{var l,d;o(e,t,n,s);let c=null===(l=n.levelDetails)||void 0===l?void 0:l.startSN;"level"===n.type&&c&&(a.emit({type:"video",event:iB.HLS_LEVEL_PLAYLIST_LOADED,data:{startingSequenceNumber:c}}),null===(d=r(i))||void 0===d||d.setValue({startSn:c}))}}))}hasCachedLevel(e,t=new ad){return"level"===e.type&&0===e.id&&t.hasCachedFirstTrack()}hasCachedManifest(e,t=new ad){return"manifest"===e.type&&t.hasCachedManifest()}loadFromString(e,t,n){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;let i={url:n.url,data:e,code:200};Promise.resolve().then((()=>{var e;null===(e=this.callbacks)||void 0===e||e.onSuccess(i,this.stats,n,t)}))}}var sz=()=>r.getInstance().get(ab.getServiceIdentifier());class s$ extends window.Hls.DefaultConfig.loader{getLocalFileURL(e,t=sj,n=z){var i,r;let a=new ad,o=Number(e.sn),s=null!==(r=null===(i=t(n))||void 0===i?void 0:i.getValue().startSn)&&void 0!==r?r:1;return a.getCachedVideoSegmentUrls()[o-s]}shouldLoadFromFileURL(e){if("main"!==e.type||"initSegment"===e.sn)return!1;let t=this.getLocalFileURL(e);return(null==t?void 0:t.length)>0&&as(t)}async load(e,t,n){if(this.shouldLoadFromFileURL(e.frag))e.url=this.getLocalFileURL(e.frag),super.load(e,t,n);else{let i=sz(),r=await i.get(e.url);r?(this.context=e,this.loader={readyState:4,status:200,response:r.data},this.config=t,this.callbacks=n,this.loadedFromCache=!0,this.readystatechange()):super.load(e,t,n)}}readystatechange(){let{context:e,loader:t,stats:n}=this;if(e&&t&&!n.aborted){if(4!==t.readyState)return void super.readystatechange();if(this.shouldLoadFromFileURL(this.context.frag)){if(this.callbacks){let{onProgress:i}=this.callbacks;i&&i(n,e,t.response,t);let r={url:t.responseURL,data:t.response,code:200};Promise.resolve().then((()=>{this.callbacks.onSuccess(r,n,e,t)}))}}else{var i;if((null===(i=t.response)||void 0===i?void 0:i.byteLength)>=0&&!this.loadedFromCache){let n=sz();null==n||n.addRecord({url:e.url,data:new Uint8Array(t.response)})}super.readystatechange()}}}}var sZ=e=>"data:application/x-mpegurl;base64,"+btoa(e),sq=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length;e+=1)if(n[e].startsWith("#EXT")&&n[e].includes("URI=")){let i=n[e].indexOf("URI="),r=i+4,a=n[e].charAt(r);for(let t=i+5;t<n[e].length&&r===i+4;t+=1)n[e].charAt(t)===a&&(r=t);let o=n[e].substring(i+5,r);if(!o.toLowerCase().startsWith("http")){let a=t.split("/");a.pop(),a.push(o),n[e]=n[e].substring(0,i+5)+a.join("/")+n[e].substring(r)}}return n.join("\n")},sQ=(e,t,n)=>{let i=!1,r=e.split("\n"),a=n.split("/");a.pop();for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXT-X-STREAM-INF"))if(i){if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=a.concat(t).join("/")}}else i=!0,r[e+1]=t;return r.join("\n")},sJ=(e,t)=>{let n=e.split("\n"),i=t.split("/");i.pop();for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")&&!n[e+1].toLowerCase().startsWith("http")){let t=n[e+1].split("/");n[e+1]=i.concat(t).join("/")}return n.join("\n")},s0=(e,t)=>{let n=e.split("\n");for(let e=0;e<n.length-1;e+=1)if(n[e].startsWith("#EXT-X-STREAM-INF")){if(n[e+1].toLowerCase().startsWith("http"))return n[e+1];let i=t.split("/");return i.pop(),i.push(n[e+1]),i.join("/")}},s1=class{getStreamPlayer(e){if(null===e)return hS.NotSupported;if(window.Hls.isSupported()){let e=this.environmentService.getOperatingSystem(),t=this.environmentService.getSdkVersion();if(e!==eT.iOS||t.isGreaterThanOrEqualTo(new w("7")))return hS.Custom}return""!==e.canPlayType(this.hlsMediaType)?hS.Native:hS.NotSupported}async loadHls(e,t){let n=new window.Hls({maxLoadingDelay:4,maxStarvationDelay:4,pLoader:sX,fLoader:s$,debug:!1});this.onFragLoaded(n),n.loadSource(e),n.attachMedia(t)}async getHlsManifest(e){if(!this.streamPunkService.hasCachedStreamChunks()&&!this.streamPunkService.hasCachedFirstTrack())return this.streamPunkService.hasCachedManifest()?sZ(sJ(this.streamPunkService.getCachedManifest(),e)):e;try{let t;if(this.streamPunkService.hasCachedManifest())t=this.streamPunkService.getCachedManifest();else{let n=await this.getManifest(e);if(void 0===n)return e;t=await n.text()}let n=s0(t,e);if(!n){let n=this.updateStream(t,e);return sZ(n)}try{let i;if(this.streamPunkService.hasCachedFirstTrack())i=this.streamPunkService.getCachedFirstTrack();else{let t=await this.getVideo(n);if(void 0===t)return e;i=await t.text()}let r=this.updateStream(i,n),a=sZ(r),o=sQ(t,a,n),s=sq(o,e);return sZ(s)}catch(t){return this.handleStreamError(t,n,hp.Video),e}}catch(t){return this.handleStreamError(t,e,hp.Manifest),e}}insertCachedVideoSegments(e,t){let n=this.streamPunkService.getCachedVideoSegmentUrls().reverse(),i=t.split("/");i.pop();let r=e.split("\n");for(let e=0;e<r.length-1;e+=1)if(r[e].startsWith("#EXTINF"))if(n.length>0)r[e+1]=n.pop();else if(!r[e+1].toLowerCase().startsWith("http")){let t=r[e+1].split("/");r[e+1]=i.concat(t).join("/")}return r.join("\n")}updateStream(e,t){return sq(this.insertCachedVideoSegments(e,t),t)}handleStreamError(e,t,n){var i;this.errorLoggingService.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:e instanceof TypeError||e.message.includes("ailed to fetch")||(null===(i=e.message)||void 0===i?void 0:i.includes("ross-origin"))?`CORS issue prevented HLS ${n} cache optimization from ${t}`:`Failed to download HLS ${n} from ${t}: ${e.message}`}}})}async getStream(e,t){let n=await window.fetch(e);if(n.ok||0===n.status)return n;this.errorLoggingService.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:`Network ${n.status} while loading HLS ${t}: ${e}`}}})}getManifest(e){return this.getStream(e,hp.Manifest)}getVideo(e){return this.getStream(e,hp.Video)}getBandwidthEstimate(e,t,n){if(!(!1===Number.isFinite(e)||e<=0||e>419430400||t<50||Number.isNaN(n)))return Math.round(n/8/1024)}onFragLoaded(e){e.on(window.Hls.Events.FRAG_LOADED,((t,n)=>{if("main"===n.frag.type){var i;let t=n.frag.stats.bwEstimate,r=n.frag.stats.loading.end-n.frag.stats.loading.start,a=e.bandwidthEstimate,o=null===(i=this.scene)||void 0===i?void 0:i.getId(),s=this.getBandwidthEstimate(t,r,a);o&&s&&this.videoReportingService.emit({type:"video",event:iB.BANDWIDTH_ESTIMATION,data:{scene_id:o,bwe:s}})}}))}constructor(e,t=G(),n=n6(),i=iF(),r=new ad(e)){this.scene=e,this.environmentService=t,this.errorLoggingService=n,this.videoReportingService=i,this.streamPunkService=r,this.hlsMediaType="application/vnd.apple.mpegurl"}},s2=class{monitorVideoHealth(e,t,n){var i;n&&(null!=(null===(i=this.videoMonitorTimer)||void 0===i?void 0:i.getId())&&this.videoMonitorTimer.destroy(),this.videoMonitorTimer=this.timerService.getNewTimer(3e4,(()=>{!e.value.matches(_L.AUTO_PLAY_FAIL)&&(e.value.context.canPlay&&e.value.context.currentTime>=0||t(F))})),this.videoMonitorTimer.start())}startStreamingVideo(e,t,n,i=new s1(this.scene,this.environmentService,this.errorLoggingService,this.videoReportingService)){switch(e.setAttribute("type","application/x-mpegURL"),i.getStreamPlayer(e)){case hS.Custom:i.loadHls(t,e);break;case hS.Native:e.setAttribute("src",t),e.load();break;default:this.observabilityReportingService.emit(eg.HLS_NOT_SUPPORTED),n({type:v2.NEXT})}}getMutedSignal(){return this.muteService.getMutedSignal()}constructor(e,t=t7(),n=G(),i=n6(),r=aC(),a=on(),o=iF()){this.scene=e,this.timerService=t,this.environmentService=n,this.errorLoggingService=i,this.observabilityReportingService=r,this.muteService=a,this.videoReportingService=o}},s3=(e=y())=>ia(e)&&e.has(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS)):e.has(L.CLOSE_BUTTON_DELAY_SECONDS)?Number(e.get(L.CLOSE_BUTTON_DELAY_SECONDS)):0,s5=(e,t=j(),n=s3())=>!!(t.isBanner()||t.isMrec()||t.isInLine())||!!n&&(9999===n||n>e),s4=class extends od{init(){if(!this.initialized)try{var e,t,n;this.initialized=!0;let i=JSON.parse(window.atob(this.rawOmsdkData));if(!i.vendorURL||!i.vendorKey)return;super.init(this.videoElement,i),null===(e=this.adSession)||void 0===e||e.setCreativeType(oc.VIDEO),null===(t=this.adSession)||void 0===t||t.setImpressionType(ou.LOADED),null===(n=this.adSession)||void 0===n||n.registerSessionObserver(this.onSessionChange.bind(this))}catch(e){Z().emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:"Unable to init omsdk video"}}})}}onSessionStarted(){var e,t;this.hasSessionStartRequested&&this.initialized&&this.duration&&!this.hasSessionStarted&&(null===(e=this.adEvents)||void 0===e||e.impressionOccurred(),this.hasSessionStarted=!0,this.isSkippable=!s5(this.duration),this.vastProperties=new this.sessionClient.VastProperties(this.isSkippable,0,!0,"preroll"),null===(t=this.adEvents)||void 0===t||t.loaded(this.vastProperties),this.eventDrain())}onSessionChange(e){if(e.type===oE.SESSION_START)return this.hasSessionStartRequested=!0,void this.onSessionStarted();if(e.type===oE.SESSION_FINISH){let e=Z();e.emit({type:"video",event:_k.REMOVE_HANDLER}),e.emit({type:"cta",event:_k.REMOVE_HANDLER})}}onVideoCheckpoint(){let{currentTime:e,duration:t,muted:n}=this.videoElement;this.pushOrCallFunction((()=>{var i;this.isBuffering&&(this.isBuffering=!1,null===(i=this.mediaEvents)||void 0===i||i.bufferFinish());let r=ix(e,t);if(e>0&&this.mediaEvents){for(let e=this.checkpointsReached.length;e<=r;e+=1)switch(this.checkpointsReached[e]=!0,e){case 0:this.volume=n?0:1,this.mediaEvents.start(t,this.volume);break;case 1:this.mediaEvents.firstQuartile();break;case 2:this.mediaEvents.midpoint();break;case 3:this.mediaEvents.thirdQuartile();break;case 4:this.mediaEvents.complete()}}}))}onVideoTimeUpdate(){this.onSessionStarted()}onSoundChange(e){this.pushOrCallFunction((()=>{var t;this.volume="mute"===e?0:1,null===(t=this.mediaEvents)||void 0===t||t.volumeChange(this.volume)}))}onVideoBuffering(){this.isBuffering||(this.pushOrCallFunction((()=>{var e;null===(e=this.mediaEvents)||void 0===e||e.bufferStart()})),this.isBuffering=!0)}onVideoStateChanged(e){this.pushOrCallFunction((()=>{var t,n;if(this.checkpointsReached[0]){if("pause"===e)return void(null===(n=this.mediaEvents)||void 0===n||n.pause());null===(t=this.mediaEvents)||void 0===t||t.resume()}}))}onVideoDisplayState(e){let{duration:t}=this.videoElement;!this.isVideoReady&&t>0&&(this.isVideoReady=!0,this.pushOrCallFunction((()=>{var t;null===(t=this.mediaEvents)||void 0===t||t.playerStateChange(e)})))}onVideoMetadataAvailable(e){this.duration=e,this.onSessionStarted()}onVideoPageClose(){this.pushOrCallFunction((()=>{var e;this.isSkippable&&(null===(e=this.mediaEvents)||void 0===e||e.skipped())}))}static getServiceIdentifier(){return"OmsdkVideoServiceInterface"}constructor(e,t){super(),this.videoElement=e,this.rawOmsdkData=t,this.checkpointsReached=[],this.volume=0,this.vastProperties=null,this.isBuffering=!1,this.isSkippable=!1,this.isVideoReady=!1,this.videoElement=e,this.init()}};const s6=()=>y().has(L.OM_SDK_DATA)&&os();var s8=e=>{if(s6()){var t;let n=null!==(t=y().get(L.OM_SDK_DATA))&&void 0!==t?t:"";r.getInstance().bind(s4.getServiceIdentifier(),new s4(e,n))}};(vD=hg||(hg={})).SHOWING="SHOWING",vD.HIDDEN="HIDDEN",(vR=hC||(hC={})).SHOW="SHOW",vR.HIDE="HIDE",vR.CLOSE="CLOSE",(vy=hI||(hI={})).PAUSE_VIDEO="pauseVideo",vy.PLAY_VIDEO="playVideo",vy.FORFEIT_REWARD="forfeitReward";const s7="incentivized-dialog",s9=()=>({id:s7,initial:hg.HIDDEN,context:{},states:{[hg.HIDDEN]:{on:{[hC.SHOW]:{target:hg.SHOWING,actions:[hI.PAUSE_VIDEO,v6.PAUSE_INTERVALS,v8.STANDBY_TIMERS]}}},[hg.SHOWING]:{on:{[hC.HIDE]:{target:hg.HIDDEN,actions:[hI.PLAY_VIDEO,v6.START_INTERVALS,v8.WAKE_TIMERS]},[hC.CLOSE]:{target:hg.HIDDEN,actions:[hI.FORFEIT_REWARD,v6.START_INTERVALS,v8.WAKE_TIMERS]}}}}}),le={actions:d({},t9(),{pauseVideo:()=>{let e=ot();null==e||e.send({type:_y.PAUSE})},playVideo:()=>{let e=ot();null==e||e.send({type:_y.PLAY})},forfeitReward:()=>{Z().emit({type:"incentivized-event",event:io.FORFEIT_REWARD,fireOnlyOnce:!0}),aC().emit(eg.FORFEIT_REWARD)}},t8())};var lt=e=>(null!=e?e:t2()).interpreterMap.get(s7),ln=(e,t,n=$(),i=ot(),r=oj(),a=lt())=>{if(!ah(n))return;let o=!1;r.state.context.isPrivacyDrawerOpen&&(o=!0),(null==a?void 0:a.state.value)===hg.SHOWING&&(o=!0),t.event!==Q.MAXIMIZED||o?t.event===Q.MINIMIZED&&(null==i||i.send({type:_y.MINIMIZE})):null==i||i.send({type:_y.MAXIMIZE,hasHlsVideo:n.videoType===_m.HLS})},li=(e=j())=>!e.isBanner();hO="S2LOeW_icon",hA="S2LOeW_muted",hf="S2LOeW_unmuted";const lr={marginLeft:"0px",marginTop:"0px"},la=tL(lr);var lo=({sendAdEvent:e,isMuted:t,isVisible:n,videoPlayerHeight:i})=>{let r=()=>{if(!n)return;let e=document.querySelector("video");if(!e)return;let t=d({},lr),{videoWidth:i,videoHeight:r}=e,{clientWidth:a,clientHeight:o}=null==e?void 0:e.parentElement,s=i/r;a/o>s?t.marginLeft=(a-o*s)/2+"px":t.marginTop=(o-a/s)/2+"px",la.value=t};return tu((()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}))),tu((()=>{r()}),[n,i]),n?aF("button",{type:"button",className:t?hA:hf,id:ae,title:t?"Unmute":"Mute","aria-label":"Mute button",style:la.value,onClick:()=>{e({type:t?v2.UNMUTE:v2.MUTE})},children:aF("span",{className:hO})}):null};hm="OaF7uW_paused",hN="OaF7uW_videoProgress";var ls=({value:e,duration:t,progressBarConfig:{show:n,color:i},paused:r})=>n?aF("div",{role:"progressbar",title:"Video progress",className:hN,"aria-label":"Video progress",children:aF("span",{className:!r&&e>0?"":hm,style:{backgroundColor:i,animationDuration:`${t}s`},id:"video-progress-bar"})}):null,ll=e=>!!e.next&&e.next.getSceneType()!==v3.closed;hD="ok_seq_videoPlayer",hR="ok_seq_videoPlayerWrap";var ld=({sendVideoEvent:e,sendAdEvent:t,videoState:n,scene:i,onMetadataLoaded:r})=>{var a;let o=new s2(i),s=new s1(i),l=tv((()=>a0()),[]),{url:d}=i,c=tE(null),u=tE(null),E=tE(null),v=tX(0),_=tX(d),h=o.getMutedSignal(),T=tX(""),S=t=>{e({type:t,eventTarget:c.current,url:_.value})},p=()=>{S(_y.CAN_PLAY),t({type:v2.PRIVACY_LOGO_SHOW})},g=e=>{t({type:v2.VIDEO_ERROR,error:Error(e),videoUrl:_.value}),t({type:v2.VIDEO_FAILURE})},C=()=>{setTimeout((()=>{c.current&&(c.current.muted=h.value)}),100)},I=()=>{let e=t7();u.current=e.getNewTimer(1e4,(()=>{n.value.value!==_L.AUTO_PLAY_FAIL&&(!n.value.context.canPlay||n.value.context.currentTime<=0)&&g(x)})),u.current.start()};return tu((()=>{var r,a,o;switch(n.value.value){case _L.PLAYING:null===(a=u.current)||void 0===a||null===(r=a.destroy)||void 0===r||r.call(a),(()=>{var t;let i=null===(t=c.current)||void 0===t?void 0:t.play();i?i.then(C).catch((t=>{let n=t.name.toLowerCase();"notallowederror"===n?e({type:_y.AUTO_PLAY_FAIL}):"aborterror"===n||g(K)})):window.setTimeout((()=>{var t;n.value.value===_L.PLAYING&&0===(null===(t=document.getElementsByTagName("video")[0])||void 0===t?void 0:t.currentTime)&&e({type:_y.AUTO_PLAY_FAIL})}),2500)})();break;case _L.LOAD_FAIL_RETRY:(()=>{e({type:_y.RETRY});let t=i.originalVideoUrl;t&&t!==_.value?_.value=t:g(W)})();break;case _L.PAUSED:null===(o=c.current)||void 0===o||o.pause();break;case _L.ENDED:if(i.loopVideo)e({type:_y.PLAY});else{let n=i.getLastChanceEndcardConfig().enabled;e({type:_y.CLOSE}),t(n?{type:v2.LAST_CHANCE_ENDCARD}:{type:v2.COMPLETE})}}}),[n.value.value]),t0((()=>{c.current&&_.value&&(s8(c.current),c.current.setAttribute("muted","true"),i.videoType===_m.PROGRESSIVE&&(e=>{c.current&&e&&(c.current.setAttribute("src",e),c.current.load(),ll(i)?I():o.monitorVideoHealth(n,g,c.current))})(_.value))})),t0((()=>{let e=s.getStreamPlayer(c.current);if(_.value&&i.videoType===_m.HLS&&e!==hS.NotSupported){let t=async()=>{e===hS.Native?T.value=await s.getHlsManifest(_.value):T.value=_.value};ll(i)?I():o.monitorVideoHealth(n,g,c.current),t()}})),t0((()=>{""!==T.value&&(null==c?void 0:c.current)&&o.startStreamingVideo(c.current,T.value,t)})),t0((()=>{var e,t;c.current&&(null===(e=(t=n.value).matches)||void 0===e?void 0:e.call(t,_L.PLAYING))&&!c.current.paused&&!c.current.ended&&(c.current.muted=h.value)})),tu((()=>(l.addEventHandler("viewability",ln),()=>{l.removeEventHandler("viewability",ln)})),[e,l]),tu((()=>{let e=t=>{c.current&&(c.current.readyState>2?p():t7().getNewTimer(t,(()=>{e(t)})).start())};e(200)}),[]),aF("div",{className:o9(hR,"videoPlayer"),ref:E,id:i.getId(),children:[aF(lo,{sendAdEvent:t,isMuted:h.value,isVisible:n.value.context.canPlay&&li(),videoPlayerHeight:null===(a=E.current)||void 0===a?void 0:a.clientHeight}),aF("video",{title:"Video player",id:"video-player",ref:c,muted:!0,playsInline:!0,className:hD,poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQAAAAA3bvkkAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAd0SU1FB+YHDAoSGnw+PegAAAAKSURBVAjXY2AAAAACAAHiIbwzAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIyLTA3LTEyVDEwOjE4OjI2KzA4OjAww+Ou8wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMi0wNy0xMlQxMDoxODoyNiswODowMLK+Fk8AAAAASUVORK5CYII=",onError:()=>{_.value===d?S(_y.LOAD_FAIL):g(B)},onDurationChange:()=>{S(_y.DURATION_CHANGE)},onWaiting:()=>{S(_y.WAITING)},onSuspend:()=>{S(_y.SUSPEND)},onCanPlay:p,onCanPlayThrough:()=>{iF().emit({type:"video",event:iB.CAN_PLAY_THROUGH})},onTimeUpdate:t=>{let{target:i}=t,r=n.value.value!==_L.PLAYING;Number.isNaN(i.duration)||0===i.duration||i.seeking||r||(v.value=i.currentTime,e({eventTarget:i,type:_y.TIME_UPDATE}))},onEnded:()=>{v.value=0,e({type:_y.END})},onSeeking:e=>{let t=e.target,n=t.currentTime-v.value;!(t.readyState<3)&&Math.abs(n)>3&&(t.currentTime=v.value)},"data-loop-count":n.value.context.loopCount,"data-scene-id":i.getId(),disableRemotePlayback:!0,onLoadedMetadata:()=>{null==r||r()}}),aF(ls,{value:n.value.context.progress,duration:n.value.context.duration,paused:n.value.value===_L.PAUSED,progressBarConfig:i.getProgressBarConfig()})]})},lc=(e,t=G())=>{var n;let i=t.getOperatingSystem();if(i===eT.Android)return!!(null!==(n=null==e?void 0:e.filter)&&void 0!==n?n:null==e?void 0:e.webkitFilter);if(i===eT.iOS){let e=document.createElement("div");if("webkitFilter"in e.style||"filter"in e.style)return!0}return!1};hy="RypQCq_videoBlurWrap";var lu=({isInLine:e=!1})=>{var t,n,i,r;let a=tE(null),o=tE(null),s=tE(),l=tE(),d=tX(!1),c=tX(window.document.body.clientWidth),u=tX(window.document.body.clientHeight),E=tX(0),v=tX(0),_=tX(0),h=tX(0),T=null===(t=ot())||void 0===t?void 0:t.state.context.videoElement,S=null===(n=ot())||void 0===n?void 0:n.state.context.canPlay,p=null===(i=ot())||void 0===i?void 0:i.state.context.videoWidth,g=null===(r=ot())||void 0===r?void 0:r.state.context.videoHeight,C=()=>{var e,t;a.current&&(c.value=null===(e=a.current)||void 0===e?void 0:e.clientWidth,u.value=null===(t=a.current)||void 0===t?void 0:t.clientHeight)},I=()=>{if(!T)return;let t=T.videoHeight>T.videoWidth;d.value=(e||t)&&!!T&&(!!e||T.videoWidth/T.videoHeight<c.value/u.value)&&lc(s.current)},O=()=>{C(),(()=>{var e;null===(e=s.current)||void 0===e||e.clearRect(0,0,_.value,h.value)})(),I()};return tu((()=>{T&&(E.value=T.clientHeight,v.value=T.clientWidth),I()}),[null==T?void 0:T.clientHeight,null==T?void 0:T.clientWidth,s.current]),tu((()=>{if(S){window.addEventListener("resize",O),C(),(()=>{if(o.current&&c&&u&&p&&g&&u){var e;let t=p/c.value,n=g/u.value,i=p/g<c.value/u.value?t:n,r=Math.floor(Number(p/i)),a=Math.floor(Number(g/i));s.current=null===(e=o.current)||void 0===e?void 0:e.getContext("2d"),_.value=r,h.value=a}})();let e=t6();l.current=e.getNewInterval(60,(()=>{d.value&&s.current&&s.current.drawImage(T,0,0,_.value,h.value)})),l.current.start()}return()=>{var e;window.removeEventListener("resize",O),null===(e=l.current)||void 0===e||e.destroy()}}),[S]),aF("div",{id:"video-blur",ref:a,className:hy,children:aF("canvas",{id:"video-blur-canvas",ref:o,width:_,height:h})})};hL="dDtiqq_tapToPlayContainer",hP="dDtiqq_tapToPlayIcon",hb="dDtiqq_tapToPlayMask",hw="dDtiqq_tapToPlayText";var lE=({isVisible:e,sendVideoEvent:t})=>e?aF("div",{role:"none",className:hb,onClick:()=>{var e;null===(e=document.getElementsByTagName("video")[0])||void 0===e||e.play(),t({type:_y.PLAY})},id:"tap-to-play",title:"tap-to-play",children:aF("div",{className:hL,children:[aF("div",{className:hP}),aF("div",{className:hw,children:"Tap to play"})]})}):null;hV="Zz6y0G_download",hM="Zz6y0G_downloadIcon";const lv=e=>{e.emit({type:"cta",event:sO.DOWNLOAD_BUTTON_CTA})};var l_=({callToActionReportingService:e})=>aF("button",{className:hV,"aria-label":"cta",id:"download-button",type:"button",onClick:()=>{lv(e)},children:aF("span",{className:hM})}),lh=({id:e="star",index:t=0,size:n,offset:i=100})=>{let r=`${e}-gradient-${t}`;return aF("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 100 100",children:[aF("defs",{children:aF("linearGradient",{id:r,x1:"0",x2:"100%",y1:"0",y2:"0",children:[aF("stop",{offset:"0%","stop-color":"#ffd055"}),aF("stop",{offset:`${i}%`,"stop-color":"#ffd055"}),aF("stop",{offset:`${i}%`,"stop-color":"#ddd"})]})}),aF("path",{d:"M50,0,64.69463130731182,29.774575140626315,97.55282581475768,34.54915028125263,73.77641290737884,57.72542485937368,79.38926261462366,90.45084971874736,50,75,20.61073738537635,90.45084971874738,26.223587092621162,57.72542485937369,2.447174185242318,34.549150281252636,35.30536869268816,29.774575140626318Z",fill:`url(#${r})`,"stroke-linejoin":"round","stroke-linecap":"round"})]})},lT=class{getOffsetPercent(e,t){let n=Math.floor(t);return e<n?100:e>n?0:Math.ceil(t%1*100/this.unitValue)*this.unitValue}constructor(){this.unitValue=10}};const lS=12,lp=5,lg=0;var lC=({id:e,size:t=12,count:n=5,value:i=0})=>{let r=[],a=new lT;for(let o=0;o<n;o+=1){let n=a.getOffsetPercent(o,i);r.push(aF(lh,{id:e,index:o,size:t,offset:n},o))}return aF("span",{id:e,children:r})},lI=class{getVideoComputedHeight(){let e=ot(),t=null==e?void 0:e.state.context.videoElement;if(!t)return 0;let n=t.videoWidth/t.videoHeight;return parseFloat(window.getComputedStyle(t).getPropertyValue("width"))/n}updateScreenshotsHeight(e){if(!e.current)return;let t=this.getVideoComputedHeight();if(0===t)return;let n=window.innerHeight-t-120;n>=100?e.current.style.height=`${n}px`:e.current.style.display="none"}handleClick(e,t,n){let i=e.target;if(n.some((e=>null!==i.closest(`#${e}`))))return this.ctaReportingService.emit({type:"cta",event:sO.PERSISTENT_CTA}),void this.sceneEventReportingService.emit(ip.CTA_BUTTON_CLICK);t.enabled&&this.fullCtaReportingService.emit({type:"fsc",event:aw.FSC})}constructor(e=aV(),t=aM(),n=iM()){this.ctaReportingService=e,this.fullCtaReportingService=t,this.sceneEventReportingService=n}};hk="UUyEIq_appDetail",hU="UUyEIq_appIcon",hB="UUyEIq_persistentSimpleCta",hH="UUyEIq_persistentSimpleCtaBtn",hW="UUyEIq_slideIn";const lO=tL(!1);var lA=({fullScreenClickConfig:e,callToActionConfig:t,sceneEventReportingService:n=iM(),timerService:i=t7(),ctaReportingService:r=aV(),fullCtaReportingService:a=aM()})=>{var o,s,l,d;return tu((()=>{i.getNewTimer(t.delay,(()=>{lO.value=!0,n.emit(ip.CTA_BUTTON_SHOW)})).start()}),[]),aF("div",{id:"persistent-simple-cta",className:o9(hB,lO.value?hW:""),"aria-hidden":"true",onClick:t=>{new lI(r,a,n).handleClick(t,e,["persistent-simple-cta-app-name","persistent-simple-cta-app-icon","persistent-simple-cta-app-company","persistent-simple-cta-app-rating","persistent-simple-cta-button"])},children:[(null===(o=t.appMeta)||void 0===o?void 0:o.icon)&&aF("img",{className:hU,id:"persistent-simple-cta-app-icon",alt:"app-icon",src:t.appMeta.icon}),((null===(s=t.appMeta)||void 0===s?void 0:s.name)||(null===(l=t.appMeta)||void 0===l?void 0:l.company))&&aF("div",{className:hk,id:"persistent-simple-cta-app-detail",children:[t.appMeta.name&&aF("h1",{id:"persistent-simple-cta-app-name",children:t.appMeta.name}),t.appMeta.company&&aF("h2",{id:"persistent-simple-cta-app-company",children:t.appMeta.company}),t.appMeta.isRatingGreaterThanMinimum&&aF(lC,{value:t.appMeta.rating,id:"persistent-simple-cta-app-rating"})]}),aF("button",{className:hH,style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},type:"button",id:"persistent-simple-cta-button",children:t.text})]})};hx="DwKKSa_appIcon",hF="DwKKSa_appInfo",hK="DwKKSa_persistentRichCta",hY="DwKKSa_persistentRichCtaBtn";var lf=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n,i,r,a,o,s,l,d;tu((()=>{let e=document.createElement("style");return e.textContent="\n    .videoPlayer {\n      width: 100%;\n      height: auto;\n      margin-top: 120px;\n    }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}}),[]),tu((()=>{iM().emit(ip.CTA_BUTTON_SHOW)}),[]);let c=null===(n=t.appMeta)||void 0===n?void 0:n.isRatingGreaterThanMinimum;return aF("div",{id:"persistent-rich-cta",className:hK,onClick:t=>{(new lI).handleClick(t,e,["persistent-rich-cta-app-name","persistent-rich-cta-app-icon","persistent-rich-cta-company-name","persistent-rich-cta-app-rating","persistent-rich-cta-button"])},"aria-hidden":"true",children:[(null===(i=t.appMeta)||void 0===i?void 0:i.icon)&&aF("img",{className:hx,alt:"app-icon",id:"persistent-rich-cta-app-icon",src:null===(r=t.appMeta)||void 0===r?void 0:r.icon}),aF("div",{className:hF,children:[(null===(a=t.appMeta)||void 0===a?void 0:a.name)&&aF("h1",{id:"persistent-rich-cta-app-name",children:null===(o=t.appMeta)||void 0===o?void 0:o.name}),c&&aF(lC,{value:null===(s=t.appMeta)||void 0===s?void 0:s.rating,id:"persistent-rich-cta-app-rating"}),!c&&aF("p",{id:"persistent-rich-cta-company-name",children:null===(l=t.appMeta)||void 0===l?void 0:l.company}),aF("button",{className:hY,type:"button",style:(null===(d=t.background)||void 0===d?void 0:d.color)?{backgroundColor:t.background.color}:{},id:"persistent-rich-cta-button",children:t.text})]})]})};hG="dalDea_persistentRichCtaScreenshots",hj="dalDea_slide";const lm=e=>{e.enabled?aM().emit({type:"fsc",event:aw.FSC}):aV().emit({type:"cta",event:sO.PERSISTENT_CTA})};var lN=({fullScreenClickConfig:e,callToActionConfig:t})=>{var n;let i=new lI,r=tE(null);tu((()=>{i.updateScreenshotsHeight(r)}),[window.innerHeight,window.innerWidth]);let a=null===(n=t.appMeta)||void 0===n?void 0:n.screenshots;return a&&0!==a.length?aF("div",{id:"persistent-rich-cta-screenshots",ref:r,className:hG,onClick:()=>lm(e),"aria-hidden":"true",children:a.map((e=>e&&aF("div",{className:hj,children:aF("img",{alt:e,src:e})},e)))}):null},lD=({videoOrientation:e,viewportOrientation:t,scene:n,disableRichCta:i=!1})=>{var r,a;return e===_R.UNKNOWN?null:!i&&e===_R.LANDSCAPE&&t===eS.PORTRAIT&&(null!==(a=null===(r=n.getCallToActionConfig().appMeta)||void 0===r?void 0:r.screenshots)&&void 0!==a?a:[]).length>0?aF(eX,{children:[aF(lf,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()}),aF(lN,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})]}):aF(lA,{fullScreenClickConfig:n.getFullScreenClickConfig(),callToActionConfig:n.getCallToActionConfig()})};(vL=hX||(hX={})).PERCENTAGE="percentage",vL.ABSOLUTE="absolute";const lR=e=>{let t,n,i;return e.includes("_")?[t,n,i]=e.split("_"):e.includes(":")?[t,n,i]=e.split(":"):(t=e.substring(0,2),n=e.substring(2,2),i=e.substring(4,2)),3600*Number(t)+60*Number(n)+Number(i)},ly=e=>e.endsWith("p")?Number(e.replace("p","")):e.endsWith("%")?Number(e.replace("%","")):Number(e),lL=e=>e.endsWith("p")||e.endsWith("%")?"percentage":"absolute",lP=e=>{let t=r.getInstance(),n=t.has(e)?t.get(e):void 0;if(n)return n;let i=e.split(";").filter((e=>e&&""!==e));return i&&0!==i.length?(n=i.map((e=>{let t=e.split(".")[1],n=lL(t);return{type:n,tpat_event:e,value:"percentage"===n?ly(t):lR(t)}})),t.bind(e,n),n):[]};var lb=(e,t)=>{let n=y();t.event===iB.PROGRESS&&n.has(L.TPAT_PROGRESS_EVENTS)&&lP(n.get(L.TPAT_PROGRESS_EVENTS)).forEach((n=>{var i,r;if((null===(i=t.data)||void 0===i?void 0:i.currentTime)&&(null===(r=t.data)||void 0===r?void 0:r.duration)){let{currentTime:i,duration:r}=t.data,a=Math.floor(i/r*100),o=Math.floor(i);("percentage"===n.type&&a>=n.value||"absolute"===n.type&&n.value<=r&&o>=n.value)&&e.emit({type:"tpat",event:n.tpat_event,fireOnlyOnce:!0})}}))};const lw=[nY.CHECKPOINT_0,nY.CHECKPOINT_25,nY.CHECKPOINT_50,nY.CHECKPOINT_75,nY.CHECKPOINT_100],lV=(e,t)=>lw[ix(e,t)],lM=(e,t=Z())=>{let n=[];return lw.slice(0,e).forEach((e=>{t.hasExistingEvent({type:"tpat",event:e})||n.push(e)})),n};var lk=(e,t,n,i=nz())=>{let r=lV(e,t);lM(ix(e,t)).forEach((r=>{i.emit(r,!0,{progress:n,currentTime:e,duration:t})})),i.emit(r,!0,{progress:n,currentTime:e,duration:t})},lU=(e,t,n,i=oT())=>{if((null==n?void 0:n.getSceneType())!==v3.video)return;let r=[v4.START,v4.FIRST_QUARTILE,v4.MIDPOINT,v4.THIRD_QUARTILE,v4.COMPLETE][ix(e,t)];r&&oI(r,n.getId(),n.getTrackingEventMapConfig(),!0,i)};const lB=e=>({id:e.getId(),initial:_L.LOADING,context:{currentTime:0,duration:0,progress:0,videoHeight:0,videoWidth:0,videoElement:null,canPlay:!1,loopCount:0,orientation:_R.UNKNOWN},states:{[_L.LOADING]:{entry:_P.EMIT_LOAD,on:{[_y.LOAD_FAIL]:{target:_L.LOAD_FAIL_RETRY},[_y.CAN_PLAY]:{target:_L.PLAYING,actions:[_P.SET_CAN_PLAY,_P.REPORT_VIDEO_START]},[_y.PAUSE]:_L.PAUSED,[_y.DURATION_CHANGE]:{actions:_P.EMIT_DURATION_CHANGE},[_y.WAITING]:{actions:_P.EMIT_WAITING},[_y.SUSPEND]:{actions:_P.EMIT_SUSPEND}}},[_L.LOAD_FAIL_RETRY]:{on:{[_y.RETRY]:_L.LOADING}},[_L.PLAYING]:{entry:_P.EMIT_PLAY,on:{[_y.MINIMIZE]:{target:_L.PAUSED,actions:[_P.UPDATE_CURRENT_TIME]},[_y.PAUSE]:_L.PAUSED,[_y.END]:_L.ENDED,[_y.AUTO_PLAY_FAIL]:_L.AUTO_PLAY_FAIL,[_y.TIME_UPDATE]:{actions:[_P.UPDATE_PROGRESS,_P.EMIT_PROGRESS,_P.EMIT_CHECKPOINT_TPAT_EVENT,_P.EMIT_SCENE_EVENT,_P.EMIT_TIME_UPDATE]},[_y.SUSPEND]:{actions:_P.EMIT_SUSPEND},[_y.WAITING]:{actions:_P.EMIT_WAITING},[_y.CLOSE]:{target:_L.FINAL,actions:_P.EMIT_CLOSE}}},[_L.PAUSED]:{entry:_P.EMIT_PAUSE,on:{[_y.MINIMIZE]:{actions:[_P.UPDATE_CURRENT_TIME]},[_y.CAN_PLAY]:{actions:_P.SET_CAN_PLAY},[_y.MAXIMIZE]:{target:_L.PLAYING,actions:[_P.RESET_CURRENT_TIME]},[_y.PLAY]:_L.PLAYING,[_y.TIME_UPDATE]:{actions:[_P.UPDATE_PROGRESS,_P.EMIT_PROGRESS,_P.EMIT_CHECKPOINT_TPAT_EVENT,_P.EMIT_SCENE_EVENT]},[_y.AUTO_PLAY_FAIL]:_L.AUTO_PLAY_FAIL,[_y.CLOSE]:{target:_L.FINAL,actions:_P.EMIT_CLOSE}}},[_L.AUTO_PLAY_FAIL]:{entry:[v8.STANDBY_TIMERS,v6.PAUSE_INTERVALS],on:{[_y.PLAY]:{target:_L.PLAYING,actions:[v8.WAKE_TIMERS,v6.START_INTERVALS]}}},[_L.ENDED]:{on:{[_y.PLAY]:{target:_L.PLAYING,actions:[_P.INCREMENT_LOOP_COUNT]},[_y.PAUSE]:_L.PAUSED,[_y.CLOSE]:{target:_L.FINAL,actions:_P.EMIT_CLOSE_FULLY_PLAYED}}},[_L.FINAL]:{}}}),lH={actions:d({[_P.UPDATE_PROGRESS]:p({currentTime:(e,t)=>t.eventTarget.currentTime,duration:(e,t)=>t.eventTarget.duration,progress:(e,t)=>{let{currentTime:n,duration:i}=t.eventTarget;return Math.round(n/i*100)}}),[_P.EMIT_PROGRESS]:e=>{void 0!==e.duration&&iF().emit({type:"video",event:iB.PROGRESS,data:{progress:e.progress,currentTime:e.currentTime,duration:e.duration}})},[_P.EMIT_CHECKPOINT_TPAT_EVENT]:e=>{void 0!==e.duration&&lk(e.currentTime,e.duration,e.progress)},[_P.EMIT_SCENE_EVENT]:e=>{void 0!==e.duration&&lU(e.currentTime,e.duration,$())},[_P.EMIT_PAUSE]:()=>{iF().emit({type:"video",event:iB.PAUSE})},[_P.EMIT_PLAY]:e=>{iF().emit({type:"video",event:iB.PLAY,data:{duration:e.duration}})},[_P.REPORT_VIDEO_START]:()=>{let e=on();aC().emit({name:eg.VIDEO_START,is_muted:e.isMuted()}),iM().emit(ip.LOAD_COMPLETE)},[_P.INCREMENT_LOOP_COUNT]:p({loopCount:e=>e.loopCount+1}),[_P.EMIT_CLOSE]:e=>{let t=e.loopCount>0,n=t?null==e?void 0:e.duration:null==e?void 0:e.currentTime;iF().emit({type:"video",event:iB.CLOSE,data:{isVideoFullyPlayed:t,maximumViewingTime:n}})},[_P.EMIT_CLOSE_FULLY_PLAYED]:e=>{iF().emit({type:"video",event:iB.CLOSE,data:{isVideoFullyPlayed:!0,maximumViewingTime:null==e?void 0:e.duration}})},[_P.SET_CAN_PLAY]:p({canPlay:()=>!0,duration:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.duration},videoWidth:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoWidth},videoHeight:(e,t)=>{var n;return null===(n=t.eventTarget)||void 0===n?void 0:n.videoHeight},videoElement:(e,t)=>t.eventTarget,orientation:(e,t)=>{var n;let{videoWidth:i,videoHeight:r}=null!==(n=t.eventTarget)&&void 0!==n?n:{};return i/r>1?_R.LANDSCAPE:_R.PORTRAIT}}),[_P.EMIT_DURATION_CHANGE]:(e,t)=>{var n;Z().emit({type:"video",event:iB.DURATION_CHANGE,data:{duration:null===(n=t.eventTarget)||void 0===n?void 0:n.duration}})},[_P.EMIT_WAITING]:()=>{Z().emit({type:"video",event:iB.WAITING})},[_P.EMIT_SUSPEND]:(e,t)=>{var n;Z().emit({type:"video",event:iB.SUSPEND,data:{readyState:null===(n=t.eventTarget)||void 0===n?void 0:n.readyState}})},[_P.EMIT_TIME_UPDATE]:()=>{Z().emit({type:"video",event:iB.TIME_UPDATE})},[_P.UPDATE_CURRENT_TIME]:p({currentTime:e=>e.videoElement?e.videoElement.currentTime:0}),[_P.RESET_CURRENT_TIME]:e=>{e.videoElement&&(e.videoElement.currentTime=e.currentTime)},[_P.EMIT_LOAD]:()=>{iM().emit(ip.LOAD_START)}},t8(),t9())};var lW=e=>oX(lB(e),lH),lx=class{getCloseButtonDelaySeconds(e,t){return void 0===e?6:s5(e,this.placementTypeService,t)?e:t}getCloseButtonCountDown(e,t){return!(void 0===e||Number.isNaN(e))&&!(e<=0)&&t}getCloseButtonStyle(e,t){return e?nf.CLOSE:t}getCloseButtonConfig(e,t){let n=e.getCloseButtonConfig(),i=e.isLastPage();return{delay:this.getCloseButtonDelaySeconds(t,n.delay),style:this.getCloseButtonStyle(i,n.style),countdown:this.getCloseButtonCountDown(t,n.countdown)}}shouldReplaceShowStoreKitOverlay(){var e;return this.isStoreKitOverlaySupported&&this.placementTypeService.isFullscreen()&&(null===(e=this.productViewService)||void 0===e?void 0:e.isDone())}constructor(e=nI(),t=nh(),n=j()){this.isStoreKitOverlaySupported=e,this.productViewService=t,this.placementTypeService=n}},lF=(e,t=lt(),n=Z())=>i=>{if([v2.NEXT,v2.LAST_CHANCE_ENDCARD].includes(i.type)){if(!n.hasExistingEvent({type:"incentivized-event",event:io.GRANT_REWARD}))return void(null==t||t.send({type:hC.SHOW}));null==t||t.send({type:hC.HIDE})}e(i)},lK=()=>{let e=r.getInstance(),t=s4.getServiceIdentifier();if(e.has(t))return e.get(t)};const lY=(e,t)=>{var n,i;let r=lK();if(r)switch(t.event){case iB.DURATION_CHANGE:{let e=(null===(n=t.data)||void 0===n?void 0:n.duration)||0;r.onVideoMetadataAvailable(e),r.onVideoDisplayState("fullscreen");break}case iB.WAITING:case iB.SUSPEND:r.onVideoBuffering();break;case iB.TIME_UPDATE:r.onVideoTimeUpdate(),r.onVideoCheckpoint();break;case iB.MUTE:case iB.UNMUTE:r.onSoundChange(t.event);break;case iB.PLAY:case iB.PAUSE:r.onVideoStateChanged(t.event);break;case iB.CLOSE:(null===(i=t.data)||void 0===i?void 0:i.isVideoFullyPlayed)||r.onVideoPageClose();break;case sO.DOWNLOAD_BUTTON_CTA:case"FSC":r.onCtaClick();break;case _k.REMOVE_HANDLER:q().removeEventHandler(t.type,lY)}};hz="W6zMza_dialog",h$="W6zMza_dialogActions",hZ="W6zMza_dialogBody",hq="W6zMza_dialogBox",hQ="W6zMza_dialogContent",hJ="W6zMza_dialogText",h0="W6zMza_dialogTitle";var lG=({titleText:e,bodyText:t,isVisible:n,identifier:i,children:r})=>aF("div",{id:null!=i?i:"dialog",role:"dialog",className:hq,style:{visibility:n?"visible":"hidden"},children:aF("div",{className:hz,children:aF("div",{className:hQ,children:[aF("div",{className:h0,children:e}),aF("div",{className:hZ,children:[aF("div",{className:hJ,children:t}),aF("div",{className:h$,children:r})]})]})})}),lj=class{getTitleText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_TITLE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close this video?":"Close this ad?"}getBodyText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_BODY_TEXT))&&void 0!==e?e:`Are you sure you want to skip this ${this.hasFollowUpAdExperience?"video":"ad"}? Finish watching to claim your reward.`}getCloseText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CLOSE_TEXT))&&void 0!==e?e:this.hasFollowUpAdExperience?"Close Video":"Close Ad"}getContinueText(){var e;return null!==(e=this.tokenService.get(L.INCENTIVIZED_CONTINUE_TEXT))&&void 0!==e?e:"Continue"}constructor(e,t=y(),n=$()){var i;this.tokenService=t,this.hasFollowUpAdExperience=(null==n||null===(i=n.next)||void 0===i?void 0:i.getSceneType())!==v3.closed||e}},lX=()=>{let[e,t]=oX(s9(),le);return[e,t]};h1="eDiOmG_continueIcon",h2="eDiOmG_primaryButton",h3="eDiOmG_secondaryButton";var lz=({sendAdEvent:e,showLastChanceEndcard:t=!1})=>{let[n,i]=lX(),r=new lj(t);return aF(lG,{identifier:"incentivized-dialog",titleText:r.getTitleText(),bodyText:r.getBodyText(),isVisible:n.value.matches(hg.SHOWING),children:aF(eX,{children:[aF("div",{className:h2,children:aF("button",{className:"primary",type:"button",id:"incentivized-dialog-continue",onClick:()=>{i({type:hC.HIDE})},children:[r.getContinueText(),aF("span",{className:h1,id:"incentivized-dialog-continue-icon"})]})}),aF("div",{className:h3,children:aF("button",{className:"secondary",type:"button",id:"incentivized-dialog-close",onClick:()=>{i({type:hC.CLOSE}),e({type:t?v2.LAST_CHANCE_ENDCARD:v2.NEXT})},children:r.getCloseText()})})]})})};const l$=tL(!1),lZ=tL(!1);var lq=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0,isFreeForm:i,isComposite:r=!1,showVideoBlur:a=!1})=>{let o=new lx,[s,l]=lW(e),d=ia()&&!i?lF(t):t,c=e.getStoreKitOverlayAutoShowConfig().enabled;return sd(e.getId(),e.getAppStoreOnDelayConfig(),s.value.context.canPlay),sc(e.getStoreKitOverlayAutoShowConfig(),lZ.value),sv("video",lb),sK(l$.value),sN(t),oC(),sV(e),sP({callToActionConfig:l$.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),sL({fullScreenClickConfig:l$.value?e.getLastChanceEndcardConfig().fsc:e.getFullScreenClickConfig(),trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId(),shouldReplaceShowStoreKitOverlay:o.shouldReplaceShowStoreKitOverlay()}),sv("cta",((e,t)=>{l$.value||lY(e,t)})),sv("fsc",((e,t)=>{l$.value||lY(e,t)})),aF(eX,{children:[aF(lz,{sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aF(sm,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{l$.value=e}}),aF(sr,{config:e.getFullScreenClickConfig(),children:[s.value.context.canPlay&&n&&!l$.value&&aF(sC,{config:o.getCloseButtonConfig(e,s.value.context.duration),sendAdEvent:d,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),aF(lE,{isVisible:s.value.matches(_L.AUTO_PLAY_FAIL),sendVideoEvent:l}),aF(lu,{isInLine:j().isInLine()||a}),aF(ld,{scene:e,videoState:s,sendVideoEvent:l,sendAdEvent:t,onMetadataLoaded:()=>{lZ.value=!0}}),e.showDownloadButton&&aF(sE,{delay:e.getCallToActionConfig().delay,isVisible:!1,children:aF(l_,{callToActionReportingService:Z()})}),e.getCallToActionConfig().isPersistent&&!c&&s.value.context.canPlay&&aF(lD,{scene:e,videoOrientation:s.value.context.orientation,viewportOrientation:G().getOrientation(),disableRichCta:r})]})]})};const lQ=e=>4===e.length?e:lQ(`0${e}`),lJ=e=>e.split("").map((e=>lQ(parseInt(e,16).toString(2)))).join("").split("");var l0=class{constructor(e=y()){this.tokenService=e,this.getBits=()=>{let e=this.tokenService.get(L.SESSION_ID);if(!e){let e=[];for(let t=0;t<96;t+=1)e.push("0");return e}return lJ(e)}}};h5="_0zGmtq_bit",h4="_0zGmtq_leading",h6="_0zGmtq_one",h8="_0zGmtq_watermark",h7="_0zGmtq_zero";const l1=(e,t)=>`bit-${e}-${t}`;var l2=()=>{let e=new l0;return j().isFullscreen()?aF("div",{className:h8,id:"watermark",children:[aF("div",{className:`${h6}  ${h4} ${h5}`}),e.getBits().map(((e,t)=>aF("div",{className:`${h5} ${"0"===e?h7:h6}`,id:l1(e,t)},l1(e,t))))]}):null};h9="m2_mMq_privacyButton";const l3={[P.ACCELERATE]:"#96633d",[P.EDSP]:"#853d96",[P.UNKNOWN]:"#333"};var l5=({handleClick:e,adSource:t})=>aF("button",{type:"button",id:o3,title:"Liftoff Privacy",className:h9,onClick:e,"aria-label":"Liftoff Privacy",children:aF("svg",{id:"j",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 302 340",children:[aF("path",{d:"M274.04,32.82L160.56,7.74c-2.53-.42-5.1-.43-7.62,0L28.59,32.87c-12.39,2.04-21.55,13.63-21.55,27.27v165.78c0,7.75,2.99,15.14,8.25,20.36l55.61,55.27c44.48,44.21,116.29,44.21,160.77,0l55.61-55.27c5.26-5.22,8.25-12.62,8.25-20.36V60.08c0-13.62-9.13-25.19-21.49-27.26Z",fill:l3[null!=t?t:P.UNKNOWN],opacity:".6",strokeWidth:"0"}),aF("path",{d:"M275.5,26.22L161.67,1.07c-3.25-.55-6.56-.54-10.08.03L27.37,26.22C11.67,28.88.29,43.11.29,60.13v143.34c0,23.78,9.29,46.64,25.47,62.73l51.82,46.31c41.98,37.52,105.43,37.52,147.41,0l51.82-46.32c16.19-16.09,25.47-38.95,25.47-62.73V60.08c0-17.03-11.41-31.3-26.79-33.86ZM288.78,203.48c0,20.2-7.83,39.57-21.48,53.14l-32.94,29.99c-8.73-9.02-16.42-17.46-16.42-17.46-10.8-11.49-24.61-2.92-24.61-2.92-1.95,1.13-4.12,2.13-6.42,3.02-3.77,1.29-8.66,2.76-14.21,4-9.02,1.83-17.27,2.47-20.08,2.65-.44.01-.87.04-1.3.05-.44,0-.87-.04-1.3-.05-2.82-.18-11.06-.82-20.08-2.65-5.55-1.24-10.44-2.71-14.21-4-2.3-.89-4.47-1.88-6.42-3.02,0,0-13.82-8.57-24.61,2.92,0,0-7.28,7.89-16.44,17.48l-32.96-30.01c-13.65-13.56-21.48-32.93-21.48-53.14V60.13c0-10.25,6.83-19.11,15.89-20.6l124.34-25.14c.96-.15,1.92-.22,2.82-.22.8,0,1.57.05,2.25.16l113.83,25.15c9.04,1.51,15.85,10.36,15.85,20.59v143.4Z",fill:"#f3f4f5",strokeWidth:"0"}),aF("path",{d:"M188.96,142.21c-6.2,0-9.55,5-10.07,15.01l-.06,3.69c0,11.44,3.34,17.16,10.01,17.16,4.45,0,7.62-1.87,9.53-5.6v-24.54c-1.83-3.81-4.96-5.72-9.41-5.72Z",fill:"#f3f4f5",strokeWidth:"0"}),aF("polygon",{points:"107.78 160.02 126.43 160.02 117.07 129.93 107.78 160.02",fill:"#f3f4f5",strokeWidth:"0"}),aF("path",{d:"M151,57c-51.36,0-93,41.64-93,93s41.64,93,93,93,93-41.64,93-93-41.64-93-93-93ZM136.49,192.36l-5.06-16.2h-28.65l-5,16.2h-22.34l31.81-86.73h19.66l32.05,86.73h-22.46ZM200.46,192.36l-1.01-6.91c-4.13,5.4-9.37,8.1-15.73,8.1-7.67,0-13.74-2.94-18.23-8.82-4.49-5.88-6.73-14.24-6.73-25.08,0-10.21,2.2-18.25,6.61-24.13,4.41-5.88,10.56-8.82,18.47-8.82,5.76,0,10.6,2.26,14.54,6.79v-32.64h20.13v91.5h-18.05Z",fill:"#f3f4f5",strokeWidth:"0"})]})});(vP=Te||(Te={}))[vP.LEFT=0]="LEFT",vP[vP.RIGHT=1]="RIGHT",vP[vP.UP=2]="UP",vP[vP.DOWN=3]="DOWN",(vb=Tt||(Tt={}))[vb.HORIZONTAL=0]="HORIZONTAL",vb[vb.VERTICAL=1]="VERTICAL";const l4=tL(0),l6=tL(0),l8=tL(!1),l7=tL(0);var l9=({children:e,onSwipeLeft:t,onSwipeRight:n,onSwipeUp:i,onSwipeDown:r})=>{let a=tE(null),o=(e,t)=>Math.abs(e)>Math.abs(t),s=(e,t)=>o(e,t)?e>0?1:0:t>0?3:2,l=(e,t)=>o(e,t)?Math.abs(e):Math.abs(t),d=(e,t)=>{let n=e-l4.value,i=t-l6.value;return{Direction:s(n,i),Orientation:o(n,i)?0:1,Distance:l(n,i),DeltaX:n,DeltaY:i}};return aF("div",{ref:a,title:"swipe",onTouchStart:e=>{l8.value=!0;let t=0,n=0;e instanceof TouchEvent?(t=e.touches[0].clientX,n=e.touches[0].clientY):e instanceof MouseEvent?(t=e.clientX,n=e.clientY):(t=e.detail.clientX,n=e.detail.clientY),l4.value=t,l6.value=n,l7.value=Date.now()},onTouchEnd:e=>{var o;let s=null==a||null===(o=a.current)||void 0===o?void 0:o.childNodes;if(!l8||!s)return;let{endX:l,endY:c}=(e=>{var t,n,i,r;return e instanceof TouchEvent?{endX:e.changedTouches[0].clientX,endY:e.changedTouches[0].clientY}:e instanceof MouseEvent?{endX:e.clientX,endY:e.clientY}:{endX:null!==(i=null===(t=e.detail)||void 0===t?void 0:t.clientX)&&void 0!==i?i:0,endY:null!==(r=null===(n=e.detail)||void 0===n?void 0:n.clientY)&&void 0!==r?r:0}})(e),u=d(l,c),E=s[0];if(((e,t)=>e.Distance>=.05*t)(u,0===u.Orientation?E.clientWidth:E.clientHeight)){switch(u.Direction){case 0:t&&t();break;case 1:n&&n();break;case 3:r&&r();break;default:i&&i()}l8.value=!1}},children:e})};(vw=Tn||(Tn={}))[vw.LOVE=1]="LOVE",vw[vw.BROKEN=2]="BROKEN",vw[vw.OFFENSIVE=3]="OFFENSIVE";var de=class{getAdSource(){return this.placementTypeService.getAdSource()}getCreativeId(){var e;return null!==(e=this.tokenService.get(L.CREATIVE_ID))&&void 0!==e?e:""}getEventId(){var e;return null!==(e=this.tokenService.get(L.SESSION_ID))&&void 0!==e?e:""}getVersions(){var e;return`SDK ${this.environmentService.getSdkVersion().toString()}, VM ${null!==(e=window.appVersion)&&void 0!==e?e:"0.0.0"}, OS ${this.environmentService.getOsVersion().toString()}`}handleDrawerClose(e){e({type:v2.PRIVACY_BOTTOM_DRAWER_CLOSE})}handleIconClick(e){e({type:v2.PRIVACY_BOTTOM_DRAWER_OPEN})}handleReadMoreClick(e){e({type:v2.PRIVACY_BOTTOM_DRAWER_CLOSE}),window.setTimeout((()=>{e({type:v2.OPEN_PRIVACY_PAGE})}),50)}privacyDrawerEnabled(){return this.placementTypeService.isFullscreen()}constructor(e=y(),t=j(),n=G(),i=aC()){this.tokenService=e,this.placementTypeService=t,this.environmentService=n,this.observabilityReportingService=i,this.handleFeedbackSubmit=e=>{this.observabilityReportingService.emit({name:eg.AD_FEEDBACK,ad_feedback:e})}}};Ti="_0LRN8a_complete",Tr="_0LRN8a_completeContainer",Ta="_0LRN8a_container",To="_0LRN8a_emoji",Ts="_0LRN8a_option",Tl="_0LRN8a_optionText",Td="_0LRN8a_options",Tc="_0LRN8a_popup",Tu="_0LRN8a_question",TE="_0LRN8a_thanks",Tv="_0LRN8a_title";const dt=[{type:Tn.LOVE,text:"Love it",emoji:""},{type:Tn.BROKEN,text:"Broken",emoji:""},{type:Tn.OFFENSIVE,text:"Offensive",emoji:""}];var dn=({handleFeedbackSubmit:e})=>{let t=tX(null),n=n=>{t.value=n,e(t.value)};return aF("div",{className:Ta,children:t.value?aF("div",{className:Tr,children:[aF("div",{className:o9(Tv,TE),children:"Thank you"}),aF("span",{className:Ti})]}):aF("div",{className:Tc,children:[aF("div",{className:o9(Tv,Tu),children:"What do you think of this ad?"}),aF("div",{className:Td,children:dt.map((e=>aF("button",{type:"button",className:Ts,onClick:()=>n(e.type),children:[aF("span",{className:Tl,children:e.text}),aF("span",{className:To,children:e.emoji})]},e.type)))})]})})};T_="FbTWOG_adInfoLabel",Th="FbTWOG_adInfoRow",TT="FbTWOG_adInfoTitle",TS="FbTWOG_adInfoValue",Tp="FbTWOG_closeIcon",Tg="FbTWOG_debug",TC="FbTWOG_displayNone",TI="FbTWOG_hide",TO="FbTWOG_mask",TA="FbTWOG_popupBody",Tf="FbTWOG_popupContainer",Tm="FbTWOG_popupContainerDisplay",TN="FbTWOG_popupFooter",TD="FbTWOG_popupHeader",TR="FbTWOG_privacyPolicy",Ty="FbTWOG_privacyPopup",TL="FbTWOG_readMore",TP="FbTWOG_show";const di=({label:e,value:t,id:n})=>aF("div",{className:Th,id:n,children:[aF("div",{className:T_,children:e}),aF("div",{className:TS,children:t})]});var dr=({isOpen:e,handleReadMoreClick:t,closeHandler:n,creativeID:i,eventID:r,versions:a,handleFeedbackSubmit:o,allowDebug:s=!1})=>{let l=tX([]);return sv("debug",((e,t)=>{var n;s&&(null===(n=t.data)||void 0===n?void 0:n.message)&&(l.value=[...l.value,t.data.message])})),aF("div",{className:o9(Tf,e?Tm:""),id:o2,children:[aF("div",{className:e?TO:TC,id:"privacy-popup-mask",onClick:n,role:"none"}),aF(l9,{onSwipeDown:n,children:aF("div",{id:"privacy-popup",role:"dialog","aria-label":"Privacy popup","aria-hidden":e?"false":"true",className:o9(Ty,e?TP:TI),children:[aF("div",{className:TD,children:aF("button",{type:"button","aria-label":"Close privacy popup","aria-hidden":e?"false":"true",onClick:n,id:"privacy-close-button",children:aF("span",{className:Tp})})}),aF("div",{className:TA,children:aF(dn,{handleFeedbackSubmit:o})}),aF("div",{className:TR,children:aF("button",{type:"button",className:TL,"aria-hidden":e?"false":"true",onClick:t,id:"privacy-read-more-button",children:"Privacy Policy"})}),aF("div",{className:TN,children:[aF("div",{className:o9(TT,Th),children:"Ad Info"}),aF(di,{label:"Creative ID:",value:i,id:"privacy-drawer-creative-id"}),aF(di,{label:"Event ID:",value:r,id:"privacy-drawer-event-id"}),aF(di,{label:"Versions:",value:a,id:"privacy-drawer-versions"}),l.value.length>0&&aF("div",{className:Tg,children:[aF("h3",{children:"Debug Messages"}),aF("div",{className:"debug-container",children:l.value.map((e=>aF("div",{className:"debug-message",children:e},e)))})]})]})]})})]})};const da=tL(!1);var ds=({sendAdEvent:e,privacyService:t=new de,customMraidEventReportingService:n=oq(),allowDebug:i=!1})=>{let r=()=>{da.value=!1,t.handleDrawerClose(e)};return sv("custom-mraid",((e,t)=>{t.event===oZ.CLOSE&&da&&r()}),n),aF(eX,{children:[aF(l5,{handleClick:()=>{t.handleIconClick(e),da.value=!0},adSource:t.getAdSource()}),t.privacyDrawerEnabled()&&aF(dr,{isOpen:da.value,closeHandler:r,handleReadMoreClick:()=>{da.value=!1,t.handleReadMoreClick(e)},creativeID:t.getCreativeId(),eventID:t.getEventId(),versions:t.getVersions(),handleFeedbackSubmit:t.handleFeedbackSubmit,allowDebug:i})]})},dl=function(e,t){let n=tE(0),i=tE(0);return tu((()=>{let r=r=>{let a=Date.now();a-i.current>800&&(n.current=0),n.current+=1,i.current=a;let{clientX:o,clientY:s}=r;n.current>=3&&(e(o,s,t),n.current=0)};return window.addEventListener("pointerdown",r),()=>window.removeEventListener("pointerdown",r)}),[e,t]),null};const dd=(e,t)=>{let n=(new DOMParser).parseFromString(e,"text/html"),i=e=>{var n;if(!e)return null;if(e.nodeType===Node.TEXT_NODE)return(null===(n=e.nodeValue)||void 0===n?void 0:n.trim())?e.nodeValue:null;if(e.nodeType!==Node.ELEMENT_NODE)return null;let r=e.tagName.toLowerCase(),a={};return Array.from(e.attributes).forEach((e=>{a[e.name]=e.value})),"vm-component"===r?aF(t,{sceneId:a["scene-id"]||""}):eG(r,a,...Array.from(e.childNodes).map(i).filter((e=>!!e)))};return i(n.body.firstChild)};var dc=({htmlString:e,VmComponent:t})=>{let[n,i]=(te=1,tc(tg,null));return tu((()=>{i(dd(e,t))}),[e]),n},du=e=>{if(/Android/i.test(e.navigator.userAgent)){let t,n=e.addEventListener;e.addEventListener=(t,i,r)=>{n.call(e,"load"===t?"DOMContentLoaded":t,i,r)},Object.defineProperty(e,"onload",{set:n=>{t=n,e.addEventListener("DOMContentLoaded",t)},get:()=>t})}},dE=(e=j(),t=y())=>t.has(L.ADM_HTML)&&(e.isBanner()||e.isMrec()||e.isInLine()),dv=e=>{e.addEventListener("error",(t=>{var n,i,r;e.parent.postMessage({title:"playable-error",content:{message:null!==(r=null==t?void 0:t.message)&&void 0!==r?r:null==t||null===(n=t.error)||void 0===n?void 0:n.message,stack:null==t||null===(i=t.error)||void 0===i?void 0:i.stack}},"*")})),e.addEventListener("unhandledrejection",(t=>{e.parent.postMessage({title:"playable-error",content:{message:null==t?void 0:t.reason}},"*")}))};(vV=Tb||(Tb={})).ADD_EVENT_LISTENER="addEventListener",vV.CACHE_FILE="cacheFile",vV.CLOSE="close",vV.CLOSE_STOREKIT_OVERLAY_VIEW="closeStoreKitOverlayView",vV.EXIT_ALTERNATIVE="exitAlternative",vV.FETCH_FILE="fetchFile",vV.GET_CURRENT_POSITION="getCurrentPosition",vV.GET_DEFAULT_POSITION="getDefaultPosition",vV.GET_EXPAND_PROPERTIES="getExpandProperties",vV.GET_MAX_SIZE="getMaxSize",vV.GET_PLACEMENT_TYPE="getPlacementType",vV.GET_SCREEN_SIZE="getScreenSize",vV.GET_STATE="getState",vV.GET_VIEWABLE="getViewable",vV.GRANT_REWARD="grantReward",vV.IS_VIEWABLE="isViewable",vV.NEXT="next",vV.OPEN="open",vV.OPEN_STOREKIT_OVERLAY_VIEW="openStoreKitOverlayView",vV.OPEN_STOREKIT_PRODUCT_VIEW="openStoreKitProductView",vV.REMOVE_EVENT_LISTENER="removeEventListener",vV.SET_ORIENTATION_PROPERTIES="setOrientationProperties",vV.SHOW_ALTERNATIVE="showAlternative",(vM=Tw||(Tw={})).CREATE_CALENDAR_EVENT="createCalendarEvent",vM.EXPAND="expand",vM.GET_CONSENT_ACCEPT_BUTTON_TEXT="getConsentAcceptButtonText",vM.GET_CONSENT_BODY_TEXT="getConsentBodyText",vM.GET_CONSENT_DENY_BUTTON_TEXT="getConsentDenyButtonText",vM.GET_CONSENT_REQUIRED="getConsentRequired",vM.GET_CONSENT_TITLE_TEXT="getConsentTitleText",vM.GET_ORIENTATION_PROPERTIES="getOrientationProperties",vM.GET_RESIZE_PROPERTIES="getResizeProperties",vM.GET_VERSION="getVersion",vM.PLAY_VIDEO="playVideo",vM.RESIZE="resize",vM.SET_EXPAND_PROPERTIES="setExpandProperties",vM.SET_RESIZE_PROPERTIES="setResizeProperties",vM.STORE_PICTURE="storePicture",vM.USE_CUSTOM_CLOSE="useCustomClose";var d_=()=>({[Tw.CREATE_CALENDAR_EVENT]:()=>{},[Tw.EXPAND]:()=>{},[Tw.GET_CONSENT_ACCEPT_BUTTON_TEXT]:()=>{},[Tw.GET_CONSENT_BODY_TEXT]:()=>{},[Tw.GET_CONSENT_DENY_BUTTON_TEXT]:()=>{},[Tw.GET_CONSENT_REQUIRED]:()=>{},[Tw.GET_CONSENT_TITLE_TEXT]:()=>{},[Tw.GET_ORIENTATION_PROPERTIES]:()=>{},[Tw.GET_RESIZE_PROPERTIES]:()=>{},[Tw.GET_VERSION]:()=>()=>"1.0",[Tw.PLAY_VIDEO]:()=>{},[Tw.RESIZE]:()=>{},[Tw.SET_EXPAND_PROPERTIES]:()=>{},[Tw.SET_RESIZE_PROPERTIES]:()=>{},[Tw.STORE_PICTURE]:()=>{},[Tw.USE_CUSTOM_CLOSE]:()=>()=>!1}),dh=()=>({width:window.innerWidth,height:window.innerHeight}),dT=()=>C(d({},dh()),{useCustomClose:!1,isModal:!1}),dS=()=>d({x:0,y:0},dh());const dp=new w("5.0.0");var dg=(e=G())=>e.getMraidVersion().isGreaterThanOrEqualTo(dp);const dC=(e=aC())=>e.getEventCount(eg.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND)>=2;var dI=async(e,t=nh(),n=dC(),i=dg(),r=aC())=>{if(n)return!1;if(r.emit(eg.OPEN_STOREKIT_PRODUCT_VIEW_COMMAND),null==t||t.open(),i)try{await am((()=>null==t?void 0:t.isOpen()),e)}catch(e){return!1}return!0},dO=e=>!!e&&!![v3.video,v3.image,v3.endcard].includes(e.getSceneType())&&e.getLastChanceEndcardConfig().enabled,dA=()=>({[Tb.CACHE_FILE]:(e,t,n=sz)=>(e,t)=>{var i;return!!(e&&t&&"string"==typeof e&&e.toLowerCase().startsWith("http")&&ArrayBuffer.isView(t))&&(null===(i=n())||void 0===i||i.addRecord({url:e,data:t}),!0)},[Tb.EXIT_ALTERNATIVE]:(e,t,n=oj,i=dO)=>()=>{if(oR.getValue().isLastChanceEndcardOverlayShowing)return;let e=$(),t={type:v2.NEXT};e&&i(e)&&(t={type:v2.LAST_CHANCE_ENDCARD}),n().send(t)},[Tb.FETCH_FILE]:(e,t,n=sz)=>async e=>{var t;if(!e||"string"!=typeof e||!e.toLowerCase().startsWith("http"))return;let i=await(null===(t=n())||void 0===t?void 0:t.get(e));return null==i?void 0:i.data},[Tb.GRANT_REWARD]:(e,t,n=R,i=aC(),r=nz())=>{let a=n().getMraidBridgeExt();return i.emit(eg.GRANT_REWARD),null==a||a.notifySuccessfulViewAd(),r.emit(nY.REWARD_GRANTED,!0),()=>null},[Tb.NEXT]:(e,t,n=oj)=>e=>{oR.getValue().isLastChanceEndcardOverlayShowing||n().send(e)},[Tb.OPEN_STOREKIT_OVERLAY_VIEW]:(e,t,n=nI,i=nl)=>async()=>{if(!n())return!1;let e=i();if(!e.isIdle())return!1;if(e.isOpen())return!0;e.open({fallback:_n.OFF});try{return await am((()=>e.isOpen()),3e3),!0}catch(e){return!1}},[Tb.OPEN_STOREKIT_PRODUCT_VIEW]:(e,t,n=na,i=nh,r=dI)=>async()=>{if(!n())return!1;let e=i();return null!=e&&!!e.isOpen()||(null==e||e.open(),await r(3e3))},[Tb.SHOW_ALTERNATIVE]:(e,t,n=oj,i=aC())=>e=>{oR.getValue().isLastChanceEndcardOverlayShowing||(i.emit(eg.ALTERNATIVE_VIEW),n().send(e))},[Tb.CLOSE_STOREKIT_OVERLAY_VIEW]:(e,t,n=nI,i=nl)=>async()=>{if(!n())return!1;let e=i();if(!e.isOpen())return!0;e.close();try{return await am((()=>!e.isOpen()),3e3),!0}catch(e){return!1}}}),df=()=>{if(dE())return!1;let e=G();if(e.getOperatingSystem()===eT.Android||e.getOperatingSystem()===eT.Unknown)return!1;let t=new w("6.12.0");return!e.getSdkVersion().isLessThanOrEqualTo(t)},dm=(vk=e=>{aV().emit({type:"cta",event:sO.ENDCARD_CTA,data:{ctaUrl:e}})},t=!1,function(...n){!t&&(e||(vk.apply(this,n),t=!0,e=window.setTimeout((()=>{t=!1,e=void 0}),300)))}),dN=()=>d({[Tb.CLOSE]:(e,t,n=oj)=>()=>n().send(v2.CLOSE),[Tb.ADD_EVENT_LISTENER]:(e,t)=>(e,n,i=a5)=>{i().addEventListener(t,e,n)},[Tb.IS_VIEWABLE]:(e,t,n=aJ,i=a2)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[Tb.GET_VIEWABLE]:(e,t,n=aJ,i=a2)=>()=>!i().isHTMLPreloading(t)&&n().isViewable(),[Tb.GET_CURRENT_POSITION]:()=>dS,[Tb.GET_DEFAULT_POSITION]:()=>dS,[Tb.GET_EXPAND_PROPERTIES]:()=>dT,[Tb.GET_MAX_SIZE]:()=>dh,[Tb.GET_PLACEMENT_TYPE]:e=>e.getPlacementType.bind(e),[Tb.GET_SCREEN_SIZE]:()=>dh,[Tb.GET_STATE]:e=>e.getState.bind(e),[Tb.OPEN]:(e,t,n=dE,i=iM,r=dm)=>n()?e=>0===i().getEventCount(ip.CLICK)?null:r(e):e=>{r(e,"CTA")},[Tb.REMOVE_EVENT_LISTENER]:(e,t)=>(e,n,i=a5)=>{i().removeEventListener(t,e,n)},[Tb.SET_ORIENTATION_PROPERTIES]:(e,t,n=df)=>n()?e.setOrientationProperties.bind(e):()=>null},dA()),dD=()=>C(d({},dN(),d_()),{supports:()=>e=>Object.values(Tb).includes(e)}),dR=class{getProxyMraid(){return new Proxy(this.originalMraid,this.getProxyHandler())}constructor(e,t=R().getMraid(),n=dD(),i=aC()){this.sceneId=e,this.originalMraid=t,this.commandHandlers=n,this.observabilityEventReportingService=i,this.getProxyHandler=()=>{let{commandHandlers:e,observabilityEventReportingService:t,sceneId:n}=this;return{get:(i,r)=>e[r]?e[r](i,n):i[r]?i[r]:(t.emit({name:eg.UNKNOWN_MRAID_COMMAND,value:r}),()=>!1)}}}},dy=(e,t=iM())=>{e.addEventListener("load",(()=>{t.emit(ip.LOAD_COMPLETE)}))},dL=(e,t,n,i=sF,r=oI)=>{e&&e.document.addEventListener(sM(),(e=>{(null==e?void 0:e.isTrusted)&&r(v4.CLICK_THROUGH,n,t),i(e)}),!0)};(vU=TV||(TV={}))[vU.MUTE=0]="MUTE",vU[vU.UNMUTE=1]="UNMUTE";var dP=class{interceptAudioContext(){let e=this;function t(){let t=new e.originAudioContext,n=t.createGain();n.gain.setValueAtTime(e.shouldMute?0:1,t.currentTime),n.connect(t.destination);try{Object.defineProperty(t,"destination",{get:()=>n,configurable:!0})}catch(e){}return e.instances.set(t,n),t}t.prototype=this.originAudioContext.prototype,Object.defineProperty(this.targetWindow,"AudioContext",{value:t,configurable:!0})}muteAll(){this.shouldMute=!0,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(0,t.currentTime)}))}unmuteAll(){this.shouldMute=!1,this.instances.forEach(((e,t)=>{e.gain.setValueAtTime(1,t.currentTime)}))}constructor(e,t){this.instances=new Map,this.targetWindow=e,this.originAudioContext=e.AudioContext||e.webkitAudioContext,this.shouldMute=t,this.interceptAudioContext()}};(vB=TM||(TM={})).AUDIO="audio",vB.VIDEO="video",vB.IFRAME="iframe",vB.DEFAULT="default";var db=e=>{let t=e.nodeName.toLowerCase();switch(t){case"audio":case"video":case"iframe":return t;default:return"default"}},dw=class{isNodeAllowed(e){return[TM.AUDIO,TM.VIDEO].includes(db(e))}preventSoundResume(e){Object.defineProperty(e,"muted",{set:()=>{},get:()=>!0,configurable:!0})}mute(e,t=!0){(!t||this.isNodeAllowed(e))&&(e.muted=!0,this.preventSoundResume(e),this.storeElement(e))}unmute(e,t=!0){if(t&&!this.isNodeAllowed(e))return;let n=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"muted");n&&Object.defineProperty(e,"muted",n),e.muted=!1,this.storeElement(e)}muteAll(){this.instances.forEach((e=>{this.mute(e,!1)})),Array.from(this.targetWindow.document.querySelectorAll("audio, video")).forEach((e=>{this.mute(e,!1)}))}unmuteAll(){this.instances.forEach((e=>{this.unmute(e,!1)}))}storeElement(e){this.instances.has(e)||this.instances.add(e)}constructor(e){this.targetWindow=e,this.instances=new Set}};class dV{interceptStaticIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleIframeNode(e)}))}doMuteAllIfMute(){this.mute&&this.muteAllMedias()}unmuteAllMedias(){this.mute=!1,this.silencers.forEach((e=>e.unmuteAll()))}muteAllMedias(){this.mute=!0,this.silencers.forEach((e=>e.muteAll()))}handleIframeNode(e){var t;dV.isWindowAccessible(e.contentWindow)&&dV.interceptAllMediaElements(e.contentWindow,this.mute);let n=!dV.hasIframeCrossOriginUrl(e);this.iframeEventReportingService.emit({type:"iframe",event:i5.NESTED_IFRAME_TYPE,data:{nested_iframe_type:n?_O.NESTED_IFRAME_WITHOUT_CORS:_O.NESTED_IFRAME_WITH_CORS,scene_id:null===(t=this.injectedGetCurrentScene())||void 0===t?void 0:t.getId()}})}handleNewNode(e){db(e)===TM.IFRAME&&this.handleIframeNode(e),this.mute?this.silencers.forEach((t=>{var n;return null===(n=t.mute)||void 0===n?void 0:n.call(t,e)})):this.silencers.forEach((t=>{var n;return null===(n=t.unmute)||void 0===n?void 0:n.call(t,e)}))}interceptCreateElement(){let e=this.targetWindow.document.createElement;Object.defineProperty(this.targetWindow.document,"createElement",{value:(t,...n)=>{let i=e.call(this.targetWindow.document,t,...n);return this.handleNewNode(i),i},configurable:!0})}observeDomMutation(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;for(let e=0;e<t.length;e+=1)this.handleNewNode(t[e])}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t,n=!1,i=i3(),r=$){this.targetWindow=e,this.silencers=t,this.mute=n,this.iframeEventReportingService=i,this.injectedGetCurrentScene=r,this.interceptCreateElement(),"complete"===this.targetWindow.document.readyState?(this.doMuteAllIfMute(),this.observeDomMutation()):this.targetWindow.document.addEventListener("DOMContentLoaded",(()=>{this.doMuteAllIfMute(),this.observeDomMutation()})),this.interceptStaticIframes(),this.doMuteAllIfMute()}}dV.instances=new Map,dV.hasIframeCrossOriginUrl=e=>{var t;return null===(t=e.src)||void 0===t?void 0:t.toLowerCase().startsWith("http")},dV.isWindowAccessible=e=>{try{return!!(null==e?void 0:e.document)}catch(e){return!1}},dV.interceptAllMediaElements=(e,t,n=i3(),i=$)=>{let r=new dV(e,[new dw(e),new dP(e,t)],t,n,i);dV.instances.set(e,r)},dV.muteAllMedias=()=>{dV.instances.forEach((e=>{dV.isWindowAccessible(e.targetWindow)&&e.muteAllMedias()}))},dV.unmuteAllMedias=()=>{dV.instances.forEach((e=>{dV.isWindowAccessible(e.targetWindow)&&e.unmuteAllMedias()}))};var dM=(e,t)=>{Object.defineProperty(e,t,{configurable:!1,enumerable:!0,value:e[t],writable:!1})},dk=e=>{let t=e.addEventListener;e.addEventListener=(n,i,r)=>{"beforeunload"!==n&&t.call(e,n,i,r)}},dU=(e,t)=>{e.document.addEventListener("click",(e=>{let n=e.target.closest("a");if(n){if(!e.isTrusted)return void e.preventDefault();n.href&&(e.preventDefault(),t(n.href))}}),{capture:!0})},dB=e=>null!==e.contentDocument;class dH{intercept(){this.interceptors.forEach((e=>e(this.targetWindow))),this.checkExistingIframes(),this.observeNestedIframes()}static init(e,t){dB(e)&&new dH(e.contentWindow,t).intercept()}checkExistingIframes(){Array.from(this.targetWindow.document.querySelectorAll("iframe")).forEach((e=>{this.handleNewIframe(e)}))}handleNewIframe(e){db(e)===TM.IFRAME&&dH.init(e,this.interceptors)}observeNestedIframes(){new this.targetWindow.MutationObserver((e=>{e.forEach((e=>{let{addedNodes:t}=e;t.forEach((e=>{this.handleNewIframe(e)}))}))})).observe(this.targetWindow.document,{subtree:!0,childList:!0})}constructor(e,t){this.targetWindow=e,this.interceptors=t}}var dW=class extends sh{getIframeContentData(){return this.scene.getIframeContentData()}getCloseButtonConfig(){return this.scene.getCloseButtonConfig()}initMraidInIframeForFullscreen(e){if(!e)return;let t=this.proxyMraidService.getProxyMraid();e.mraid=t,dM(e,"mraid"),e.open=e=>t.open(e)}initMraidInIframeForNonFullscreen(e){let t=e.contentWindow;t.mraid=this.proxyMraidService.getProxyMraid(),dM(t,"mraid"),t.open=()=>null;let n=e=>{if(e.isTrusted){var i,r,a;t.document.removeEventListener("click",n,!0),t.open=e=>dm(e);let o=e.target.closest("a");(null==o||null===(i=o.href)||void 0===i?void 0:i.startsWith("http"))?e.preventDefault():null===(r=(a=e.target).click)||void 0===r||r.call(a)}},i=()=>{var e;"loading"!==(null===(e=t.document)||void 0===e?void 0:e.readyState)?t.document.addEventListener("click",n,{capture:!0}):requestAnimationFrame(i)};requestAnimationFrame(i)}injectMethodToIframe(e){this.injectedIsHtmlNonFullscreen?this.initMraidInIframeForNonFullscreen(e):this.initMraidInIframeForFullscreen(e.contentWindow)}getLastChanceEndcardConfig(e,t){let n=this.scene.getLastChanceEndcardConfig();return n.enabled&&e?C(d({},n),{enabled:t}):n}getInsertIframeTags(e){return`<base target="_parent" ${e?`href=${e}`:""}><style>body {margin: 0;padding: 0;overflow: hidden;}</style>`}loadNestedIframe(e,t){if(!(null==t?void 0:t.content))return;let n=()=>{this.loadNestedIframe(e,t)},i=e.querySelector("iframe");if(!i)return void e.addEventListener("DOMContentLoaded",n);e.removeEventListener("DOMContentLoaded",n),i.width="100%",i.height="100%";let{content:r,baseUrl:a}=t,o=this.getInsertIframeTags(a);this.loadIframe(i,r,o)}async loadIframe(e,t,n){try{let i=e.contentWindow,r=null==i?void 0:i.document;du(i),dk(i),this.injectMethodToIframe(e),r.open(),this.injectedAddErrorListenerToIframe(i),this.injectedAddLoadListenerToIframe(i),r.write(n+t),r.close(),dH.init(e,[this.addEndcardClickListener,this.blockFullScreenNativeVideoPlayer]),dU(i,dm),this.injectedInterceptAllMediaElements(i,this.muteService.isMuted())}catch(e){this.errorLoggingService.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:"Failed to write endcard to iframe"}}})}}async updateIframeContent(e,t){if(null==e?void 0:e.current){let{content:n,nestedFrameContent:i}=t,r=this.getInsertIframeTags();await this.loadIframe(e.current,n,r);let a=e.current.contentWindow;this.loadNestedIframe(a.document,i)}}constructor(e,t=n6(),n=j(),i=new dR(e.getId()),r=on(),a=dE(),o=dv,s=dy,l=dV.interceptAllMediaElements){super(n),this.scene=e,this.errorLoggingService=t,this.placementTypeService=n,this.proxyMraidService=i,this.muteService=r,this.injectedIsHtmlNonFullscreen=a,this.injectedAddErrorListenerToIframe=o,this.injectedAddLoadListenerToIframe=s,this.injectedInterceptAllMediaElements=l,this.blockFullScreenNativeVideoPlayer=e=>{let t=Array.from(e.document.querySelectorAll("video"));0!==t.length?t.forEach((e=>e.setAttribute("playsinline",""))):"complete"!==e.document.readyState&&e.document.addEventListener("DOMContentLoaded",(()=>{this.blockFullScreenNativeVideoPlayer(e)}))},this.addEndcardClickListener=e=>{let t=this.scene;dL(e,t.getTrackingEventMapConfig(),t.getId())}}},dx=(e=on())=>{tu((()=>{e.isMuted()?dV.muteAllMedias():dV.unmuteAllMedias()}),[e.getMutedSignal().value])};Tk="oAV7cW_endcard",TU="oAV7cW_endcardIframe";var dF=({sendAdEvent:e,htmlService:t,scene:n})=>{let i=tE(null),[r,a]=(te=1,tc(tg,!1));return tu((()=>{r&&requestAnimationFrame((async()=>{t.getIframeContentData(n).then((e=>{t.updateIframeContent(i,e)}))}))}),[r]),dx(),aF("iframe",{id:"endcardIframe",title:"endcard",onLoad:()=>{e({type:v2.PRIVACY_LOGO_SHOW}),a(!0)},ref:i,className:TU,allow:"autoplay",scrolling:"no",frameBorder:"0"})},dK=()=>{let e=r.getInstance(),t=ov.getServiceIdentifier();if(e.has(t))return e.get(t)};const dY=(e,t)=>{let n=dK();if(n)switch(t.event){case sO.ENDCARD_CTA:n.onCtaClick();break;case _k.REMOVE_HANDLER:q().removeEventHandler(t.type,dY)}};(TB||(TB={})).PRELOAD="preload";var dG=TB;const dj=e=>Object.values(dG).includes(e);class dX extends nG{emit(e,t=!1,n){let i=this.createEventToEmit(e);i&&(t&&(i.fireOnlyOnce=!0),n&&(i.data=n),this.wrappedService.emit(i))}createEventToEmit(e){return"string"==typeof e&&dj(e)?{type:"debug",event:e}:"object"==typeof e?e:void 0}}var dz=e=>new dX(null!=e?e:Z());const d$=(e,t)=>({id:t,context:{id:t,preloadSuccess:!1},initial:e?vJ.INITIAL:vJ.SHOWING,states:{[vJ.INITIAL]:{on:{[vQ.SHOW]:{target:vJ.SHOWING},[vQ.PRELOAD]:{target:vJ.PRELOADING,actions:[v0.INITIALIZE_PRELOAD]}}},[vJ.PRELOADING]:{on:{[vQ.SHOW]:{target:vJ.SHOWING,actions:[v0.MARK_PRELOAD_SUCCESS,v0.EMIT_SHOW,v0.TRIGGER_VIEWABLE_CHANGE]},[vQ.CANCEL_PRELOAD]:{target:vJ.INITIAL,actions:[v0.CANCEL_PRELOAD,v0.FLUSH_MRAID_EVENTS]}}},[vJ.SHOWING]:{}}}),dZ=(e=a5(),t=aJ(),n=iM())=>({actions:{[v0.INITIALIZE_PRELOAD]:()=>{n.emit(ip.PRELOAD_START)},[v0.FLUSH_MRAID_EVENTS]:()=>{let t=oO(oj().state);e.flushAllEventCallbacks(t.getId())},[v0.EMIT_SHOW]:e=>{n.emit(ip.PRELOAD_COMPLETE),dz().emit(dG.PRELOAD,!1,{message:`preloading finished succesfully for ${e.id}`})},[v0.CANCEL_PRELOAD]:e=>{n.emit(ip.PRELOAD_CANCELLED),dz().emit(dG.PRELOAD,!1,{message:`preloading got cancelled for ${e.id}`})},[v0.TRIGGER_VIEWABLE_CHANGE]:()=>{let n=oO(oj().state);e.triggerEvent(n.getId(),_V.VIEWABLE_CHANGE,t.isViewable())},[v0.MARK_PRELOAD_SUCCESS]:p({preloadSuccess:!0})}});var dq=(e,t)=>oX(d$(e,t),dZ());(vH=TH||(TH={}))[vH.Eligible=1]="Eligible",vH[vH.Not_Eligible=2]="Not_Eligible",vH[vH.Started=3]="Started",vH[vH.Canceled=4]="Canceled";var dQ=(e,t=a2())=>{let n=tX(e?1:2);return[e=>{1===n.value&&(n.value=3,t.startPreloading(e))},e=>{3===n.value&&(n.value=4,t.cancelPreloading(e))}]},dJ=(e=iM())=>{let t=tX(e.getEventCount({type:"scene-event",event:ip.CLICK,data:{scene_id:"",scene_type:v3.endcard}})>0);return sv("scene-event",((e,n)=>{n.event===ip.CLICK&&(t.value=!0)}),e),[t.value]},d0=()=>{tu((()=>{let e=e=>{e.preventDefault=()=>{},e.stopImmediatePropagation=()=>{},e.stopPropagation=()=>{}};return window.addEventListener("touchstart",e),window.addEventListener("touchend",e),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchend",e)}}),[])};const d1=tL(!1),d2=(e,t)=>{if(t)return d1.value?e.getLastChanceEndcardConfig().cta:e.getCallToActionConfig()};var d3=({scene:e,sendAdEvent:t,shouldRenderIFrame:n=!0,isCloseButtonVisible:i=!0,eligibleToPreload:r=!1,startPreloading:a=!1,customClassName:o,sceneEventReportingService:s})=>{let l=new dW(e),[d]=dq(r,e.getId()),c=d.value.matches(vJ.SHOWING);sd(e.getId(),e.getAppStoreOnDelayConfig(),!0,c),sc(e.getStoreKitOverlayAutoShowConfig(),c),sP({callToActionConfig:d2(e,c),trackingEventMapConfig:e.isAlternative()?void 0:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sL({fullScreenClickConfig:c&&d1.value?e.getLastChanceEndcardConfig().fsc:void 0,trackingEventMapConfig:e.getTrackingEventMapConfig(),sceneId:e.getId()}),sv("cta",((e,t)=>{c&&!d1.value&&dY(e,t)}));let[u,E]=dQ(r);sv("video",((t,n)=>{if(r)switch(n.event){case iB.SUSPEND:var i,a;(null===(i=n.data)||void 0===i?void 0:i.readyState)&&(null===(a=n.data)||void 0===a?void 0:a.readyState)<HTMLMediaElement.HAVE_FUTURE_DATA&&E(e.getId());break;case iB.WAITING:E(e.getId());break;case iB.CAN_PLAY_THROUGH:u(e.getId())}})),sN(t,c),oC(c),sV(e,c),sK(d1.value,c),tu((()=>{c&&t({type:v2.CREATIVE_VIEW})}),[c]),tu((()=>{a&&u(e.getId())}),[e,a]);let[v]=dJ(s),_=l.getLastChanceEndcardConfig(r7.isEndcardOnly(),v);return d0(),d.value.matches(vJ.INITIAL)?null:aF(eX,{children:[c&&aF(sm,{config:_,sendAdEvent:t,onVisibilityChange:e=>{d1.value=e}}),aF("div",{className:null!=o?o:Tk,id:e.getId(),style:{visibility:d.value.matches(vJ.PRELOADING)?"hidden":""},children:[i&&!d1.value&&aF(sC,{sendAdEvent:t,config:l.getCloseButtonConfig(),showLastChanceEndcard:_.enabled}),n&&aF(dF,{sendAdEvent:t,htmlService:l,scene:e})]})]})},d5=class extends nU{getTransitions(){let e=super.getTransitions();return e.push(nB,nH,nW,nP,nb,nw,nV),e}getId(){return this.id}getHtml(){return this.html}getDecodedHtml(){return V(this.html)}getSceneType(){return this.sceneType}addScenes(e){this.scenes.push(...e)}getScenes(){return this.scenes}getSceneById(e){return this.scenes.find((t=>t.getId()===e))}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nf.CLOSE:this.closeButtonConfig.style})}getLastChanceEndcardConfig(){return this.lastChanceEndcardConfig}setLastChanceEndcardConfig(e){this.lastChanceEndcardConfig=e}static getInstances(){return[]}constructor({id:e,html:t,children:n,closeButtonConfig:i,lastChanceEndcardConfig:r,placementTypeService:a=j()}){super({isFullscreen:null==a?void 0:a.isFullscreen()}),this.scenes=[],this.id=e,this.html=t,this.children=n,this.closeButtonConfig=i,this.lastChanceEndcardConfig=r,this.placementTypeService=a,this.sceneType=v3.composite}},d4=(e,t=$)=>tv((()=>{let n=t();return n instanceof d5&&n.getSceneType()===v3.composite&&n.getScenes().find((t=>t.getId()===e))||null}),[e]),d6=(e=oj)=>tv((()=>e().send),[]);TW="_37VDnG_component",Tx="_37VDnG_composite",TF="_37VDnG_compositeHtml",TK="_37VDnG_compositeImage";var d8=({sceneId:e,injectedGetCurrentScene:t,injectedGetAdMachineInterpreter:n})=>{let i=d4(e,t),r=d6(n);return aF("div",{className:TW,children:[aT(i)&&aF(d3,{scene:i,sendAdEvent:r,shouldRenderIFrame:!0,isCloseButtonVisible:!1,eligibleToPreload:!1,customClassName:TF,startPreloading:!1},i.getId()),i instanceof r7&&i.getSceneType()===v3.image&&aF(sG,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,customClassName:TK,useBackgroundImage:!0},i.getId()),ah(i)&&aF(lq,{scene:i,sendAdEvent:r,isCloseButtonVisible:!1,isFreeForm:!0,isComposite:!0,showVideoBlur:!0},i.getId())]})};const d7=tL(!1);var d9=({scene:e,sendAdEvent:t,isCloseButtonVisible:n=!0})=>{sN(t),oC(),sV(e);let i=tv((()=>e.getDecodedHtml()),[e]);return aF("div",{className:Tx,children:[aF(sm,{config:e.getLastChanceEndcardConfig(),sendAdEvent:t,onVisibilityChange:e=>{d7.value=e}}),n&&!d7.value&&aF(sC,{config:e.getCloseButtonConfig(),sendAdEvent:t,showLastChanceEndcard:e.getLastChanceEndcardConfig().enabled}),e&&e.getSceneType()===v3.composite&&aF("div",{className:Tx,children:aF(dc,{htmlString:i,VmComponent:d8})})]})},ce=(e=oi())=>{let t=e.getVideoInterpreter(),n=tX(null==t?void 0:t.state);return tu((()=>{if(!t)return()=>{};let{state:e,status:i}=t;i!==eu.Running&&t.start({context:e.context,value:e.value});let r=t.subscribe((e=>{n.value=e}));return()=>{r.unsubscribe()}}),[t]),[n]},ct=()=>Z();TY="i0Mp0G_animatingVideo",TG="i0Mp0G_animationEnded",Tj="i0Mp0G_pictureInPictureContainer",TX="i0Mp0G_slideLeft",Tz="i0Mp0G_slideUp";var cn=({isPrivacyDrawerOpen:e,service:t=oi(),pictureInPictureReportingService:n=ct()})=>{var i;let r=tE(null),[a]=ce(t),o=tv((()=>a0()),[]),s=tX(!1),l=tX(!1),d=tX(!1),c=e=>{e===Te.LEFT&&(d.value=!0),e===Te.UP&&(l.value=!0)},u=()=>{n.emit({type:"picture-in-picture",event:nE.CLOSE,fireOnlyOnce:!0})};tu((()=>{let e=t.getVideoElement(),n=r.current;e&&n&&(n.appendChild(e),s.value=!0,e.onended=()=>{u()})}),[]);let E=(n,i)=>{t.videoAdViewableChange(n,i,e)};return tu((()=>(o.addEventHandler("viewability",E),()=>{o.removeEventHandler("viewability",E)})),[o]),tu((()=>{var e;let n=t.getVideoElement();if(n)switch(null===(e=a.value)||void 0===e?void 0:e.value){case _L.PLAYING:n.play();break;case _L.PAUSED:n.pause()}}),[null===(i=a.value)||void 0===i?void 0:i.value]),tu((()=>{r.current&&(t.isPortrait()?r.current.style.height="auto":r.current.style.width="auto")}),[t.isPortrait()]),sL(t.getFullScreenCallToActionEventHandlerProps()),aF(l9,{onSwipeUp:()=>c(Te.UP),onSwipeLeft:()=>c(Te.LEFT),children:aF("button",{type:"button","aria-label":"Picture in Picture",ref:r,onClick:()=>t.clickHandler(),onAnimationEnd:()=>{s.value=!1},onTransitionEnd:u,className:o9(Tj,`${s.value?TY:TG}`,`${d.value?TX:""}`,`${l.value?Tz:""}`)})})},ci=({isCloseButtonVisible:e,scene:t,sendEvent:n,shouldRenderIFrame:i,preloadService:r=a2()})=>{let a=r.getHTMLScenesToPreload(t);return(null==a?void 0:a.length)?aF("div",{children:a.map((e=>aF(d3,{scene:e.scene,sendAdEvent:n,shouldRenderIFrame:e.shouldRenderIFrame,isCloseButtonVisible:e.isCloseButtonVisible,eligibleToPreload:!0,startPreloading:e.startPreloading},e.scene.getId())))}):aT(t)&&aF(d3,{scene:t,sendAdEvent:n,shouldRenderIFrame:i,isCloseButtonVisible:e,eligibleToPreload:!1,startPreloading:!1},t.getId())},cr=(e,t,n,i=aC())=>{i.emit({name:eg.FRUSTRATION_CLICKS,scene_id:null==n?void 0:n.getId(),scene_type:null==n?void 0:n.getSceneType(),coordinates:[e,t].join(",")})};T$="gRz7DW_ad";var ca=()=>{let[e,t]=o0(),n=oO(e.value),i=n.getSceneType();dl(cr,n);let{isCloseButtonVisible:r,isPrivacyButtonVisible:a,isPrivacyDrawerOpen:o,shouldRenderIFrame:s,shouldRenderPictureInPicture:l,isFreeForm:d,allowDebug:c}=e.value.context,u=a&&i!==v3.closed;return aF("div",{id:T$,children:aF(o4,{children:[aF(l2,{}),l&&aF(cn,{isPrivacyDrawerOpen:o}),u&&aF(ds,{sendAdEvent:t,allowDebug:c}),i===v3.gdpr&&aF(o8,{sendAdEvent:t}),i===v3.image&&aF(sG,{scene:n,sendAdEvent:t,isCloseButtonVisible:r},n.getId()),i===v3.video&&aF(lq,{scene:n,sendAdEvent:t,isCloseButtonVisible:r,isFreeForm:d},n.getId()),aF(ci,{isCloseButtonVisible:r,scene:n,sendEvent:t,shouldRenderIFrame:s}),i===v3.composite&&aF(d9,{scene:n,sendAdEvent:t,isCloseButtonVisible:r},n.getId()),i===v3.closed&&aF(o5,{})]})})},co=(e=oj(),t=oQ(),n=oJ,i=oO)=>{let r=i(e.state);z.setValue({scene:r}),t.start(r),n(r),e.start()},cs=()=>r.getInstance().get(aH.getServiceIdentifier()),cl=async(e,t,n)=>{var i;let r={adCount:0,sameCreative:0,sameVideo:0},a=n.getPlacementType(),o=t.get(L.AD_SOURCE),s=t.get(L.CREATIVE_ID),l=null!==(i=t.get(L.ORIGINAL_VIDEO_URL))&&void 0!==i?i:t.get(L.MAIN_STREAM);return(await e.getAllRecords()).forEach((({placementType:e,creativeId:t,adSource:n,videoUrl:i})=>{e===a&&(r.adCount+=1),t===s&&n===o&&(r.sameCreative+=1),i===l&&(r.sameVideo+=1)})),{ad_count:r.adCount,same_creative:r.sameCreative,same_video:r.sameVideo}};const cd=async(e=cs(),t=y(),n=j(),i=aC(),a=cl)=>{let o={name:eg.AD_START,elapsed:Date.now()-r.getInstance().startTimestamp},s=a4(t)?d({},o,a6(t)):o;await e.addRecord();let l=await a(e,t,n);i.emit(d({},s,l))};var cc=()=>{let e=r.getInstance(),t=new sa;e.bind(sa.getServiceIdentifier(),t)},cu=()=>{let e=r.getInstance(),t=new sR;e.bind(sR.getServiceIdentifier(),t)},cE=(e=G(),t=R())=>{let n=r.getInstance(),i=a3.getServiceIdentifier(),a=Object.values(_V);e.getMraidVersion().isLessThan(aK.V5_2_1)&&(a=a.filter((e=>e!==_V.SILENT_CHANGE)));let o=new a3(a,t);n.bind(i,o),o.init()};const cv=(e,t,n,i)=>{let r=t.getOperatingSystem()===eT.iOS,a=a$(i),o=t.getSdkVersion(),s=n.isInLine();return!(!r||a||!(o.isEqualTo(new w("7.4.0"))&&s||o.isGreaterThanOrEqualTo(new w("7.4.1"))))||e};var c_=(e=aX(),t=aG(),n=on(),i=G(),r=j(),a=q())=>{let o=!!i.getMraidVersion().isGreaterThanOrEqualTo(aK.V5_2_1)&&cv(t,i,r,a);e||o?n.mute():n.unmute()},ch=()=>{let e=r.getInstance(),t=eU.getServiceIdentifier();return e.get(t)},cT=X({adType:void 0},"AdTypeContext"),cS=(e,t,n,i,a,o)=>{var s,l,c,u,E,v,_,h,T,S,p,g,C,I,O,A;let f=r.getInstance(),m=d({ad_duration:o(f.startTimestamp,i),ad_source:null!==(l=e.get(L.AD_SOURCE))&&void 0!==l?l:"",ad_type:null!==(c=cT.getValue().adType)&&void 0!==c?c:"",advertiser_domain:null!==(u=e.get(L.ADVERTISER_DOMAIN))&&void 0!==u?u:"",app_environment:"production",app_name:"View Master Loki",browser_name:t.getBrowserName(),browser_version:t.getBrowserVersion(),creative_format:null!==(E=e.get(L.CREATIVE_FORMAT))&&void 0!==E?E:"",creative_format_version:null!==(v=e.get(L.CREATIVE_FORMAT_VERSION))&&void 0!==v?v:"",creative_id:null!==(_=e.get(L.CREATIVE_ID))&&void 0!==_?_:"",device_country_code:t.getDeviceCountryCode(),device_model:t.getDeviceModel(),device_type:t.getDeviceType(),dsp:n.getAdSource()===P.ACCELERATE?"accelerate":"others",elapsed:Date.now()-f.startTimestamp,event_id:null!==(h=e.get(L.SESSION_ID))&&void 0!==h?h:"",is_header_bidding:nx(e.get(L.HEADER_BIDDING)),is_incentivized:ia(e),mediation_name:null!==(T=e.get(L.MEDIATION_NAME))&&void 0!==T?T:"",nautilus_version:null!==(S=e.get(L.NAUTILUS_VERSION))&&void 0!==S?S:"0.0.0",observed_experiments:null!==(p=e.get(L.OBSERVED_EXPERIMENTS))&&void 0!==p?p:"",os_version:t.getOsVersion().toString(),placement_id:null!==(g=e.get(L.PLACEMENT_ID))&&void 0!==g?g:"",placement_type:n.getPlacementType(),platform:t.getOperatingSystem(),pub_id:null!==(C=e.get(L.PUB_ID))&&void 0!==C?C:"",sdk_version:t.getSdkVersion().toString(),session_id:null!==(I=e.get(L.SESSION_ID))&&void 0!==I?I:"",template_version:null!==(O=window.appVersion)&&void 0!==O?O:"0.0.0"},null===(s=a())||void 0===s?void 0:s.getObservabilityData()),N=null!==(A=e.get(L.ACC_TESTS))&&void 0!==A?A:"";return n.getAdSource()===P.ACCELERATE&&N&&(m.acc_tests=V(N)),m},cp=class{getUrl(){return`${this.endpoint}/vm/logs`}pushEvent(e,t,n){this.sendLog(d(C(d({},cS(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:ep.EVENT,timestamp:null!=n?n:new Date,name:e}),t))}pushError(e,t,n){let i="",r="";var a,o;"string"==typeof e?i=e:(r=null!==(a=null==e?void 0:e.stack)&&void 0!==a?a:"",i=null!==(o=null==e?void 0:e.message)&&void 0!==o?o:"");this.sendLog(d(C(d({},cS(this.tokenService,this.environmentService,this.placementTypeService,this.reportingService,this.getCurrentScene,this.getAdDuration)),{kind:ep.ERROR,timestamp:null!=n?n:new Date,message:i,stack:r}),t))}isObserved(){return nx(this.tokenService.get(L.OBSERVABILITY))}sendLog(e){this.isObserved()&&navigator.sendBeacon(this.getUrl(),JSON.stringify(e))}constructor(e,t,n,i,r,a,o){this.endpoint=e,this.tokenService=t,this.environmentService=n,this.placementTypeService=i,this.reportingService=r,this.getCurrentScene=a,this.getAdDuration=o}},cg=(e,t,n,i,r,a)=>new cp("https://logs.ads.vungle.com",e,t,n,i,r,a),cC=(e=ch())=>{e.init(cg)},cI="product-view";(vW=TZ||(TZ={})).ADD_VIEWABILITY_HANDLER="addViewabilityHandler",vW.CLOSE_STORE_VIEW="closeStoreView",vW.OPEN_STORE_VIEW="openStoreView",vW.REMOVE_VIEWABILITY_HANDLER="removeViewabilityHandler",vW.SHOW_FALLBACK="showFallback",vW.UPDATE_OPEN_COUNT="updateOpenCount";var cO=TZ,cA=(e,t)=>e.interpreterMap.get(t),cf=(e=t2(),t=cI)=>cA(e,t);const cm=e=>"store-kit-orchestration"===e.type&&null!=e.event;var cN=class extends nG{emit(e){cm(e)?this.wrappedService.emit(e):this.wrappedService.emit({type:"store-kit-orchestration",event:e})}},cD=e=>new cN(null!=e?e:Z());(vx=Tq||(Tq={})).SKPV_FALLBACK_TO_SKO="SKPV_FALLBACK_TO_SKO",vx.SKO_FALLBACK_TO_SKPV="SKO_FALLBACK_TO_SKPV",vx.STORE_KIT_FALLBACK_TO_MRAID="STORE_KIT_FALLBACK_TO_MRAID";var cR=Tq,cy=()=>Z();const cL=()=>({id:cI,initial:_l.HIDDEN,context:{delay:0,openCount:0},states:{[_l.SHOWING]:{on:{[_s.CLOSE]:{target:_l.HIDDEN,actions:[cO.CLOSE_STORE_VIEW,cO.REMOVE_VIEWABILITY_HANDLER]},[_s.SET_FALLBACK]:{target:_l.FALLBACK,actions:[cO.REMOVE_VIEWABILITY_HANDLER]}}},[_l.HIDDEN]:{on:{[_s.OPEN]:{target:_l.SHOWING,actions:[cO.ADD_VIEWABILITY_HANDLER,cO.UPDATE_OPEN_COUNT,cO.OPEN_STORE_VIEW]}}},[_l.FALLBACK]:{on:{[_s.OPEN]:{actions:[cO.SHOW_FALLBACK]}}},[_l.INITIAL]:{},[_l.PREPARING]:{},[_l.DONE]:{}}}),cP=(e,t)=>{var n;t.event===Q.MAXIMIZED&&(null===(n=cf())||void 0===n||n.send({type:_s.CLOSE}))},cb=(e=R(),t=a0(),n=cy(),i=cD())=>({actions:{[cO.OPEN_STORE_VIEW]:()=>{var t,i;n.emit({type:"store-kit-product-view",event:eM.APP_STORE_OPEN}),null===(i=e.getMraidExt())||void 0===i||null===(t=i.openAppStore)||void 0===t||t.call(i,0)},[cO.CLOSE_STORE_VIEW]:()=>{n.emit({type:"store-kit-product-view",event:eM.APP_STORE_CLOSE})},[cO.ADD_VIEWABILITY_HANDLER]:()=>{t.addEventHandler("viewability",cP)},[cO.REMOVE_VIEWABILITY_HANDLER]:()=>{t.removeEventHandler("viewability",cP)},[cO.UPDATE_OPEN_COUNT]:p({openCount:e=>e.openCount?e.openCount+1:1}),[cO.SHOW_FALLBACK]:()=>{i.emit(cR.SKPV_FALLBACK_TO_SKO)}}});(vF=TQ||(TQ={})).PREPARE_STORE_VIEW="prepareStoreView",vF.SET_APP_STORE_ID="setAppStoreId";const cw=d({},cO,TQ),cV=()=>({id:cI,initial:_l.INITIAL,context:{delay:0,openCount:0,appStoreId:void 0},states:{[_l.INITIAL]:{on:{[_s.READY]:{target:_l.PREPARING,actions:[cw.SET_APP_STORE_ID,cw.PREPARE_STORE_VIEW]}}},[_l.PREPARING]:{on:{[_s.PREPARE_SUCCESS]:{target:_l.HIDDEN}}},[_l.SHOWING]:{on:{[_s.CLOSE]:{target:_l.INITIAL,actions:[cO.CLOSE_STORE_VIEW,cO.REMOVE_VIEWABILITY_HANDLER]}}},[_l.HIDDEN]:{on:{[_s.OPEN]:{target:_l.SHOWING,actions:[cO.ADD_VIEWABILITY_HANDLER,cO.UPDATE_OPEN_COUNT,cO.OPEN_STORE_VIEW]}}},[_l.FALLBACK]:{},[_l.DONE]:{}}}),cM=(e=R(),t=a0(),n=cy(),i=cD())=>({actions:C(d({},cb(e,t,n,i).actions),{[cw.SET_APP_STORE_ID]:p({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[cw.PREPARE_STORE_VIEW]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreView)||void 0===n||n.call(i,t.appStoreId)},[cw.OPEN_STORE_VIEW]:t=>{var i,r;t.appStoreId&&(n.emit({type:"store-kit-product-view",event:eM.APP_STORE_OPEN}),null===(r=e.getMraidExt())||void 0===r||null===(i=r.presentStoreView)||void 0===i||i.call(r,t.appStoreId))}})});var ck=class extends n_{init(e){var t;null===(t=this.interpreter)||void 0===t||t.send(d({type:_s.READY},e))}close(){var e,t;null===(e=this.interpreter)||void 0===e||e.send({type:_s.CLOSE}),null===(t=this.interpreter)||void 0===t||t.send({type:_s.READY})}constructor(e=cV,t=cM,n=t2()){super(e(),t(),n)}};const cU=()=>{let e=cL(),t=e.states[_l.SHOWING];return t.on=C(d({},t.on),{[_s.CLOSE]:{target:_l.DONE,actions:[cO.CLOSE_STORE_VIEW,cO.REMOVE_VIEWABILITY_HANDLER]}}),e},cB=()=>cU();var cH=class extends n_{fallback(){var e;!1!==this.hasFallback&&(null===(e=this.interpreter)||void 0===e||e.send({type:_s.SET_FALLBACK}),this.open())}constructor(e=cL,t=cb,n=t2()){super(e(),t(),n)}},cW=class extends cH{constructor(e=cB,t=cb,n=t2()){super(e,t,n)}};const cx=()=>{let e=cV(),t=e.states[_l.SHOWING];return t.on=C(d({},t.on),{[_s.CLOSE]:{target:_l.DONE,actions:[cO.CLOSE_STORE_VIEW,cO.REMOVE_VIEWABILITY_HANDLER]}}),e},cF=()=>cx();var cK=class extends ck{constructor(e=cF,t=cM,n=t2()){super(e,t,n)}},cY=class extends cH{constructor(e=cU,t=cb,n=t2()){super(e,t,n)}},cG=class extends ck{constructor(e=cx,t=cM,n=t2()){super(e,t,n)}},cj=class{withAppStoreId(e){let t=nJ(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){let e=new w("17.2"),t=new w("7.0"),n=new w("7.1"),i=new w("7.2.1");if(this.environmentService.getOsVersion().isGreaterThanOrEqualTo(e)){let e=this.environmentService.getSdkVersion();if(dg()&&e.isLessThan(i))return new cW;if(e.isGreaterThanOrEqualTo(t)&&e.isLessThan(n))return this.withAppStoreId(new cK)}return M.isAffectedByStoreKitProductViewMaskIssue(this.environmentService)?dg()?new cY:this.withAppStoreId(new cG):dg()?new cH:this.withAppStoreId(new ck)}constructor(e=G(),t=y()){this.environmentService=e,this.tokenService=t}},cX=class{resolve(){if(this.environmentService.getOperatingSystem()===eT.iOS)return new cj(this.environmentService).resolve()}constructor(e=G()){this.environmentService=e}};(vK=TJ||(TJ={})).RESET_VIEWABLE="resetViewable",vK.SET_VIEWABLE_TO_FALSE="setViewableToFalse";var cz=e=>({resetViewable:()=>{(e||aJ()).resetViewable()},setViewableToFalse:()=>{(e||aJ()).setViewable(!1)}});const c$=()=>({id:cI,initial:_l.HIDDEN,context:{delay:0},states:{[_l.SHOWING]:{on:{[_s.CLOSE]:{target:_l.HIDDEN,actions:[TJ.RESET_VIEWABLE,v6.START_INTERVALS]}}},[_l.HIDDEN]:{on:{[_s.OPEN]:{target:_l.SHOWING,actions:[TJ.SET_VIEWABLE_TO_FALSE,v6.PAUSE_INTERVALS]}}},[_l.INITIAL]:{},[_l.PREPARING]:{},[_l.FALLBACK]:{},[_l.DONE]:{}}}),cZ=(e=aJ(),t=t6())=>({actions:d({},cz(e),t8(t))});var cq=class extends n_{constructor(e=c$,t=cZ,n=t2(),i=aJ(),r=t6()){super(e(),t(i,r),n)}},cQ=(e=G())=>{let t=r.getInstance(),n=new cX(e).resolve();return n&&t.bind(cq.getServiceIdentifier(),n),n};class cJ extends t4{static getInstances(e=oB()){return e?[new cJ(nq)]:[]}getId(){return this.id}getSceneType(){return this.sceneType}constructor(e){super(),this.id=e,this.sceneType=v3.gdpr}}var c0=class extends nK{getFullScreenClickConfig(){var e;return{enabled:void 0!==this.ecImageTokenValue||super.getFullScreenClickConfig().enabled,ctaUrl:null!==(e=this.ecCtaUrlTokenValue)&&void 0!==e?e:"",id:this.id,target:super.getFullScreenClickConfig().target}}constructor({id:e,ecImageTokenValue:t,ecCtaUrlTokenValue:n,skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,placementType:s}){super({skOverlayAutoTokenValue:i,fullCtaOptionTokenValue:r,fullCtaTokenValue:a,skFullCtaTokenValue:o,id:e,placementType:s}),this.ecImageTokenValue=t,this.ecCtaUrlTokenValue=n}},c1=(e,t=!1,n=q(),i=t7())=>{let r=i_(n,n4.RESOURCE,__.IMAGE).pipe(ih()).pipe(iT(iS(n,ip.SCENE_END))),a=C(d({},ik(n,t)),{error_count:r});return e.enabled&&(a.grant_reward=i1(v3.image,e,n,i)),a};class c2 extends r7{getSceneType(){return this.sceneType}getFullScreenClickConfig(){return this.fullScreenClickConfig}getCloseButtonConfig(){return C(d({},this.closeButtonConfig),{style:this.isLastPage()?nf.CLOSE:this.closeButtonConfig.style})}getCallToActionConfig(){return this.callToActionConfig}getEventStreams(){return this.eventStreams?this.eventStreams:c1(this.incentivizedConfig,this.lastChanceEndcardConfig.enabled)}static getInstances(e=y(),t=j(),n=G(),i=n6(),r=r3(),a=r4()){let o=[],s=[L.EC_IMAGE,L.EC_IMAGE_2],l=e.has(L.EC_HTML);return s.filter((t=>e.has(t))).forEach(((r,s)=>{var d;let c=`image_${s}`,u=l?s+1:s,E=new ie(n9(c,e,t),i);o.push(new c2({id:c,url:null!==(d=e.get(r))&&void 0!==d?d:"",index:u,fullScreenClickConfig:new c0({id:c,ecImageTokenValue:e.get(L.EC_IMAGE),ecCtaUrlTokenValue:e.get(L.EC_CTA_URL),skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:new n2(u,this.isEndcardOnly(e),nJ(e),e.get(L.FULL_CTA_OPTION),e.get(L.SKOVERLAY_AUTO),e.get(L.SKOVERLAY_DELAY_SECONDS),e.get(L.EC_SKOVERLAY_DELAY_SECONDS),e.get(L.SKOVERLAY_AUTO_CLOSE),e.get(L.EC_SKOVERLAY_DISABLE_AUTO_MMP),n,t).getStoreKitOverlayAutoShowConfig(),appStoreOnDelayConfig:new n3(u,nJ(e),e.get(L.APP_STORE_ON_ENDCARD_AUTO_DELAY),n).getAppStoreOnDelayConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),trackingEventMapConfig:new ii(!1).getTrackingEventMapConfig(),closeButtonConfig:new it({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:1===u}).getCloseButtonConfig(),callToActionConfig:new ir({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:i7(e,i)}).getCallToActionConfig(),placementTypeService:t,shouldSplitVideoEndcardClick:nx(e.get(L.VIDEO_ENDCARD_CLICK_SPLIT)),incentivizedConfig:new i9({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:a}))})),o}constructor({id:e,url:t,index:n,fullScreenClickConfig:i,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,closeButtonConfig:s,trackingEventMapConfig:l,callToActionConfig:d,placementTypeService:c=j(),shouldSplitVideoEndcardClick:u=!1,eventStreams:E,incentivizedConfig:v,iframeService:_=r4()}){super({id:e,endcardContent:t,index:n,isAlternative:!1,compressionType:_f.NONE,storeKitOverlayAutoShowConfig:r,appStoreOnDelayConfig:a,lastChanceEndcardConfig:o,omsdkEnabled:!1,trackingEventMapConfig:l,callToActionConfig:d,closeButtonConfig:s,placementTypeService:c,eligibleToPreload:!1,shouldSplitVideoEndcardClick:u,eventStreams:E,incentivizedConfig:v,iframeService:_}),this.sceneType=v3.image,this.id=e,this.url=t,this.index=n,this.fullScreenClickConfig=i,this.storeKitOverlayAutoShowConfig=r,this.appStoreOnDelayConfig=a,this.lastChanceEndcardConfig=o,this.trackingEventMapConfig=l,this.callToActionConfig=d,this.closeButtonConfig=s,this.placementTypeService=c,this.eventStreams=E}}var c3=class{static getInstances(e=y(),t=j(),n=n6()){let i="ALT_MAIN_STREAM_",r="ALT_MAIN_VIDEO_",a=[];return[...e.getSeriesTokens(i),...e.getSeriesTokens(r)].forEach(((o,s)=>{var l;let d=o.startsWith(i),c=o.split(d?i:r),u=c[c.length-1],E=new ie(n9(u,e,t),n);a.push(new a_({id:u,url:null!==(l=e.get(o))&&void 0!==l?l:"",index:s,isAlternative:!0,videoType:d?_m.HLS:_m.PROGRESSIVE,fullScreenClickConfig:new nK({skOverlayAutoTokenValue:e.get(L.SKOVERLAY_AUTO),fullCtaOptionTokenValue:e.get(L.FULL_CTA_OPTION),fullCtaTokenValue:e.get(L.FULL_CTA),skFullCtaTokenValue:e.get(L.SK_FSC),placementType:t.getPlacementType()}).getFullScreenClickConfig(),storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:new ar(ai(e,t,n)).getCallToActionConfig(),lastChanceEndcardConfig:E.getLastChanceEndcardConfig(),progressBarConfig:new an({videoProgressBarTokenValue:e.get(L.VIDEO_PROGRESS_BAR),videoProgressBarColorTokenValue:e.get(L.VIDEO_PROGRESS_BAR_COLOR),ctaButtonBackgroundTokenValue:e.get(L.CTA_BUTTON_BACKGROUND),isBanner:t.isBanner()}).getProgressBarConfig(),closeButtonConfig:new r9({closeButtonDelaySecondsTokenValue:e.get(L.CLOSE_BUTTON_DELAY_SECONDS),incentivizedCloseButtonDelaySecondsTokenValue:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),incentivizedTokenValue:e.get(L.INCENTIVIZED),videoCloseButtonAsSkipTokenValue:e.get(L.VIDEO_CLOSE_BUTTON_AS_SKIP),showVideoCloseButtonCountDownTokenValue:e.get(L.SHOW_VIDEO_CLOSE_BUTTON_COUNTDOWN)}).getCloseButtonConfig(),trackingEventMapConfig:new ii(!1).getTrackingEventMapConfig(),loopVideo:!1,isFullscreen:t.isFullscreen(),showDownloadButton:nx(L.VIDEO_SHOW_CTA),incentivizedConfig:new i9({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig()}))})),a}},c5=class{static getInstances(e=y(),t=j(),n=n6(),i=r3(),r=r4()){let a="ALT_EC_",o=[],s=e.getSeriesTokens(a),l=e=>{let t=e.split(a);return t[t.length-1]};return s.forEach(((a,s)=>{var d;let c=l(a),u=new ie(n9(c,e,t),n);o.push(new r7({id:c,endcardContent:i.decode(null!==(d=e.get(a))&&void 0!==d?d:"",!1),index:s,isAlternative:!0,compressionType:_f.BASE64_ENCODED,storeKitOverlayAutoShowConfig:{enabled:!1,isAutoClose:!1,autoShowDelay:0,openCallback:()=>{}},appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:u.getLastChanceEndcardConfig(),omsdkEnabled:!1,closeButtonConfig:new it({ecCloseButtonDelaySecondsTokenValue:e.get(L.EC_CLOSE_BUTTON_DELAY_SECONDS),staticEcCloseButtonDelaySecondsTokenValue:e.get(L.STATIC_EC_CLOSE_BUTTON_DELAY_SECONDS),showECCloseButtonCountDownTokenValue:e.get(L.SHOW_EC_CLOSE_BUTTON_COUNTDOWN),endcardCloseButtonAsSkipTokenValue:e.get(L.ENDCARD_CLOSE_BUTTON_AS_SKIP),isSecondEndcard:!1}).getCloseButtonConfig(),trackingEventMapConfig:{enabled:!1},callToActionConfig:new ir({skEcCtaOnlyTokenValue:e.get(L.SK_EC_CTA_ONLY),appMetaProviderParams:i7(e,n)}).getCallToActionConfig(),placementTypeService:t,eligibleToPreload:!1,incentivizedConfig:new i9({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))}).getIncentivizedConfig(),iframeService:r}))})),o}},c4=class{addTransformer(e){return this.transformers.push(e),this}build(){return this.mainScenes=this.buildMainScenes(),this.alternativeScenes=this.buildAlternativeScenes(),this.transformers.forEach((e=>{e.transform(this.mainScenes)})),this.mainScenes}buildMainScenes(){return[...cJ.getInstances(),...a_.getInstances(),...r7.getInstances(),...c2.getInstances(),...id.getInstances()]}buildAlternativeScenes(){let e,t=[...c3.getInstances(),...c5.getInstances()],n=this.mainScenes.findIndex((e=>e.getSceneType()===v3.endcard)),i=this.mainScenes[n+1];return i&&(e=i),t.forEach((t=>{let n=t.getTransitions().find((e=>e.name===v2.NEXT));n?n.scene=e:t.addTransition({name:v2.NEXT,scene:e,actions:[]}),t.next=e})),t}constructor(){this.transformers=[],this.mainScenes=[],this.alternativeScenes=[],this.tokenService=y()}},c6=class{transform(e){return e.forEach(((t,n)=>{var i,r;if(n===e.length-1)return;let a=t.getTransitions().find((e=>e.name===v2.NEXT));a?a.scene=null!==(i=e[n+1])&&void 0!==i?i:void 0:t.addTransition({name:v2.NEXT,scene:null!==(r=e[n+1])&&void 0!==r?r:void 0,actions:[]})})),e}},c8=()=>!!na()&&nx(y().get(L.APP_STORE_ON_FIRST_TRANSITION)),c7=class{transform(e){return e.length&&this.insertionHelper(e[0],this.index),e}insertionHelper(e,t){var n;if(0===t)return;let i=null===(n=e.getTransitions())||void 0===n?void 0:n.find((e=>e.name===v2.NEXT&&e.scene)),r=null==i?void 0:i.scene;if(i&&r){if(this.ineligibleSceneTypes.includes(e.getSceneType()))return void this.insertionHelper(r,t);if(1===t)return void(i.actions.some((e=>e.name===_d.SHOW_PRODUCT_VIEW))||i.actions.push({name:_d.SHOW_PRODUCT_VIEW}));this.insertionHelper(r,t-1)}}constructor(e){this.index=e,this.ineligibleSceneTypes=[v3.gdpr]}},c9=()=>!!na()&&nx(y().get(L.APP_STORE_ON_SECOND_TRANSITION)),ue=class{transform(e){return this.addCloseAdAction(e,0),e}addCloseAdAction(e,t){var n,i;if(void 0===e[t+1])return;let r=null===(n=e[t].getTransitions())||void 0===n?void 0:n.find((e=>e.name===v2.NEXT&&e.scene));if(r&&r.actions.find((e=>e.name===_d.SHOW_PRODUCT_VIEW))&&(null==r||null===(i=r.scene)||void 0===i?void 0:i.getSceneType())===v3.closed){r.actions.push({name:_d.END_AD_ON_PRODUCT_VIEW_CLOSE});let e=r.scene.getEntryActions().findIndex((e=>e.name===_T.CLOSE_AD));-1!==e&&r.scene.getEntryActions().splice(e,1)}this.addCloseAdAction(e,t+1)}},ut=class{transform(e){if(0===e.length)return[];if(1===e.length)return e[0].prev=void 0,e[0].next=void 0,e;for(let t=0;t<e.length;t+=1)e[t].prev=0===t?void 0:e[t-1],e[t].next=t===e.length-1?void 0:e[t+1];return e}},un=class{transform(e){return e.forEach((e=>{this.sceneTypesToAddPostrollView.includes(e.getSceneType())&&e.addEntryAction({name:t5.POSTROLL_VIEW})})),e}constructor(){this.sceneTypesToAddPostrollView=[v3.video,v3.image,v3.endcard]}},ui=class{transform(e){let t=e.filter((e=>e.getSceneType()===v3.endcard&&!e.isAlternative())),n=e.filter((e=>e.isAlternative()));return t.forEach((e=>{n.forEach((t=>{e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),n.forEach((e=>{n.forEach((t=>{e.getId()!==t.getId()&&e.addTransition({name:t.getId(),target:t.getId(),scene:t,actions:[]})}))})),e}},ur=class{transform(e){return e.forEach((e=>{this.sceneTypesToInitCheckPoint.includes(e.getSceneType())&&e.addEntryAction({name:il.INIT_CHECKPOINTS})})),e}constructor(){this.sceneTypesToInitCheckPoint=[v3.image,v3.endcard]}},ua=class{transform(e){return e.forEach((e=>{this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY.includes(e.getSceneType())&&e.addExitAction({name:_T.CLOSE_STOREKIT_OVERLAY})})),e}constructor(){this.SCENE_TYPES_TO_CLOSE_STOREKIT_OVERLAY=[v3.video,v3.endcard]}},uo=class{transform(e){return e.forEach((e=>{var t;if(!ah(e))return;let n=e.getTransitions().find((e=>e.name===v2.NEXT)),i=null==n?void 0:n.actions.filter((e=>e.name!==_d.SHOW_PRODUCT_VIEW)),r={name:v2.VIDEO_FAILURE,scene:null==n?void 0:n.scene,actions:null!=i?i:[]};(null===(t=e.next)||void 0===t?void 0:t.getSceneType())!==v3.closed?r.actions.push({name:t5.SEND_EVENT_VIDEO_SKIP_TO_NEXT_SCENE}):r.actions.push({name:t5.SEND_FATAL_VIDEO_ERROR}),e.addTransition(r)})),e}},us=class{transform(e){return e.filter((e=>{var t;return(null===(t=e.next)||void 0===t?void 0:t.getSceneType())===v3.closed})).forEach((e=>{if(nk(e)){var t;e.setLastChanceEndcardConfig(C(d({},e.getLastChanceEndcardConfig()),{enabled:!0}));let n=[{name:_i.CLOSE_OVERLAY_VIEW},{name:_Y.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_K.SHOW_LAST_CHANCE_ENDCARD},{name:_u.SET_CLOSE_BUTTON_HIDDEN},{name:t5.CLOSE_VIDEO_CURRENT_SCENE}];e.addTransition({name:v2.LAST_CHANCE_ENDCARD,actions:n}),e.addExitAction({name:_K.CLOSE_LAST_CHANCE_ENDCARD});let i=e.getTransitions().find((e=>e.name===v2.NEXT));if(!i)return;e.addOrUpdateTransition({name:v2.NEXT,actions:[{name:_u.SET_CLOSE_BUTTON_VISIBLE},...null!==(t=null==i?void 0:i.actions)&&void 0!==t?t:[]],scene:null==i?void 0:i.scene});let r=null==i?void 0:i.actions.find((e=>e.name===_d.SHOW_PRODUCT_VIEW));if(r&&(e.addOrUpdateTransition({name:v2.LAST_CHANCE_ENDCARD,actions:[r]}),i.actions=i.actions.filter((e=>e.name!==_d.SHOW_PRODUCT_VIEW))),i.actions.some((e=>e.name===t5.SHOW_PICTURE_IN_PICTURE))){let t=e.getTransitions().find((e=>e.name===v2.LAST_CHANCE_ENDCARD));t&&(e.addOrUpdateTransition({name:v2.LAST_CHANCE_ENDCARD,actions:[{name:t5.SHOW_PICTURE_IN_PICTURE},{name:t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}]}),t.actions=null==t?void 0:t.actions.filter((e=>e.name!==t5.CLOSE_VIDEO_CURRENT_SCENE)),i.actions=i.actions.filter((e=>e.name!==t5.SHOW_PICTURE_IN_PICTURE&&e.name!==t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))}}})),e}},ul=(e=y())=>nx(e.get(L.VX_ENDCARD)),ud=class{transform(e){return e.forEach((e=>{var t;if(!ah(e)||e.getTransitions().some((e=>e.name===v2.COMPLETE&&void 0!==e.scene)))return;let n=e.getTransitions().find((e=>e.name===v2.NEXT));n&&e.addOrUpdateTransition({name:v2.COMPLETE,scene:null==n?void 0:n.scene,actions:[...null!==(t=n.actions.filter((e=>e.name!==t5.SHOW_PICTURE_IN_PICTURE&&e.name!==t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT)))&&void 0!==t?t:[]]})})),e}},uc=class{transform(e){let t=e[0];if(!t||t.getSceneType()!==v3.video)return e;let n=t.getTransitions().find((e=>e.name===v2.NEXT));return n&&(n.actions=n.actions.filter((e=>e.name!==t5.CLOSE_VIDEO)),n.actions.push({name:t5.SHOW_PICTURE_IN_PICTURE},{name:t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}},uu=(e=y())=>nx(e.get(L.PICTURE_IN_PICTURE)),uE=()=>{let e=new c4;e.addTransformer(new c6),e.addTransformer(new ut),c8()&&e.addTransformer(new c7(1)),c9()&&e.addTransformer(new c7(2)),uu()&&e.addTransformer(new uc),e.addTransformer(new un),e.addTransformer(new ue),e.addTransformer(new ur),e.addTransformer(new ua),e.addTransformer(new uo),e.addTransformer(new ud);let t=[...e.build(),...e.alternativeScenes];return t=(new ui).transform(t),ul()&&(t=(new us).transform(t)),r.getInstance().bind(nZ,t),t},uv=e=>{let t={enabled:!1,isAutoClose:!1};if(!e)return t;let{overlay:n}=e,i=(null==n?void 0:n.autoShowDelay)?1e3*n.autoShowDelay:0,r=!!((null==n?void 0:n.autoCloseDelay)&&n.autoCloseDelay>0),a=(null==n?void 0:n.autoCloseDelay)?1e3*n.autoCloseDelay:0;return d(C(d({},t),{autoShowDelay:i,isAutoClose:r}),r&&{autoCloseDelay:a})},u_=e=>{var t,n,i;return{delay:null!==(t=null==e?void 0:e.delay)&&void 0!==t?t:0,countdown:null===(n=null==e?void 0:e.countdown)||void 0===n||n,style:null!==(i=null==e?void 0:e.style)&&void 0!==i?i:nf.CLOSE}},uh=(e,t=y())=>void 0===e?"":"string"==typeof e?e:t.get(e.token);const uT=e=>(Object.keys(e).forEach((t=>{let n=e[t];(void 0===n||""===n||Array.isArray(n)&&0===n.length)&&delete e[t]})),e);var uS=(e,t=y())=>{var n;let i=uh(null==e?void 0:e.icon,t),r=null==e||null===(n=e.screenshots)||void 0===n?void 0:n.map((e=>uh(e,t))).filter((e=>void 0!==e));return uT({enabled:!(!(null==e?void 0:e.name)||!i),downloads:null==e?void 0:e.downloads,icon:i,name:null==e?void 0:e.name,price:null==e?void 0:e.price,ratingCount:null==e?void 0:e.rating,screenshots:r})},up=(e,t,n,i=y())=>{var r,a,o,s,l,c,u,E,v,_,h,T,S;let p=!1,g={id:e,enabled:!1};if(!t||0===Object.keys(t).length)return g;let I=null!==(E=null==t?void 0:t.fsc)&&void 0!==E&&E,O=null!==(v=null==t||null===(r=t.cta)||void 0===r?void 0:r.text)&&void 0!==v?v:"Open";Object.keys(null!==(_=null==n?void 0:n.on)&&void 0!==_?_:{}).includes(v2.LAST_CHANCE_ENDCARD)&&(p=!0);let A=uS(t.appMeta,i),f=C(d({},A),{enabled:!(!A.name||!A.icon)}),m=4e3;return(null==t||null===(a=t.cta)||void 0===a?void 0:a.delay)&&(m=1e3*t.cta.delay),C(d({},g),{enabled:p,fsc:{enabled:I,ctaUrl:null!==(h=null==t||null===(o=t.cta)||void 0===o?void 0:o.url)&&void 0!==h?h:"",target:null==t||null===(s=t.storeKit)||void 0===s?void 0:s.fscTarget},appMeta:f,close:u_(null==t?void 0:t.close),cta:{text:O,url:null!==(T=null==t||null===(l=t.cta)||void 0===l?void 0:l.url)&&void 0!==T?T:"",isPersistent:null!==(S=null==t||null===(c=t.cta)||void 0===c?void 0:c.isPersistent)&&void 0!==S&&S,delay:m,appMeta:f,target:null==t||null===(u=t.storeKit)||void 0===u?void 0:u.ctaTarget}})},ug=(e,t,n=y())=>{var i;return{url:null==e?void 0:e.url,text:null==e?void 0:e.text,isPersistent:null==e?void 0:e.isPersistent,delay:(null==e?void 0:e.delay)?1e3*e.delay:0,background:null==e?void 0:e.background,appMeta:(null==e?void 0:e.appMeta)?uS(e.appMeta,n):void 0,target:null!==(i=null==t?void 0:t.ctaTarget)&&void 0!==i?i:v5.SKPV}},uC=e=>{let t=null==e?void 0:e.events;return t?{enabled:!0,events:t}:{enabled:!1}},uI=e=>{if("string"==typeof e)return;let{originalUrl:t}=e;return t&&""!==t.trim()?t:void 0},uO=(e=y())=>({enabled:nx(e.get(L.INCENTIVIZED)),incentivizedCloseButtonDelaySeconds:e.get(L.INCENTIVIZED_CLOSE_BUTTON_DELAY_SECONDS),isIncentiveTiedToCloseButtonDelay:nx(e.get(L.IS_INCENTIVE_TIED_TO_CLOSE_BUTTON_DELAY))});const uA={composite:(e,t,n,i=j(),r=y())=>new d5({id:e.id,html:e.html,children:e.children,closeButtonConfig:u_(e.close),lastChanceEndcardConfig:up(e.id,e.lastChanceEndcard,n,r),placementTypeService:i}),endcard:(e,t,n,i=j(),r=y(),a=r3(),o=r4())=>{var s;let l=e.compressed?_f.GZIP:_f.BASE64_ENCODED;return new r7({id:e.id,endcardContent:a.decode(e.html,e.compressed),index:t,isAlternative:!1,compressionType:l,storeKitOverlayAutoShowConfig:uv(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:up(e.id,e.lastChanceEndcard,n,r),omsdkEnabled:!1,trackingEventMapConfig:uC(e),callToActionConfig:ug(e.cta,e.storeKit,r),placementTypeService:i,closeButtonConfig:u_(e.close),eligibleToPreload:null!==(s=e.preload)&&void 0!==s&&s,incentivizedConfig:uO(r),iframeService:o})},image:(e,t,n,i=j(),r=y(),a=r4())=>{var o,s;return new c2({id:e.id,url:uh(e.url,r),index:t,fullScreenClickConfig:{enabled:e.fsc,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url,target:null===(s=e.storeKit)||void 0===s?void 0:s.fscTarget},storeKitOverlayAutoShowConfig:uv(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},lastChanceEndcardConfig:up(e.id,e.lastChanceEndcard,n,r),trackingEventMapConfig:uC(e),placementTypeService:i,closeButtonConfig:u_(e.close),callToActionConfig:ug(e.cta,e.storeKit,r),incentivizedConfig:uO(r),iframeService:a})},video:(e,t,n,i=j(),r=y())=>{var a,o,s,l,d,c;let u=uh(e.url,r).endsWith(".m3u8")?_m.HLS:_m.PROGRESSIVE,E={enabled:e.fsc,target:null===(a=e.storeKit)||void 0===a?void 0:a.fscTarget,ctaUrl:null===(o=e.cta)||void 0===o?void 0:o.url},v={manifest:null===(s=e.streamManifest)||void 0===s?void 0:s.manifest,track_0:null===(l=e.streamManifest)||void 0===l?void 0:l.track_0,chunks:null===(c=e.streamManifest)||void 0===c||null===(d=c.chunks)||void 0===d?void 0:d.map((e=>uh(e,r))).filter((e=>""!==e))};return new a_({id:e.id,url:uh(e.url,r),isAlternative:!1,showDownloadButton:!1,index:t,videoType:u,streamManifest:v,progressBarConfig:(()=>{var t,n,i;let r=null!==(i=null==e||null===(t=e.progressBar)||void 0===t?void 0:t.show)&&void 0!==i&&i;return{show:r,color:r&&(null===(n=e.progressBar)||void 0===n?void 0:n.color)?e.progressBar.color:at}})(),fullScreenClickConfig:E,storeKitOverlayAutoShowConfig:uv(e.storeKit),appStoreOnDelayConfig:{enabled:!1,autoShowDelay:0},callToActionConfig:ug(e.cta,e.storeKit,r),lastChanceEndcardConfig:up(e.id,e.lastChanceEndcard,n,r),closeButtonConfig:u_(e.close),originalVideoUrl:uI(e.url),loopVideo:e.looping,muted:e.muted,trackingEventMapConfig:uC(e),isFullscreen:i.isFullscreen(),incentivizedConfig:uO(r)})}};var uf=class{addTransformer(e){return this.transformers.push(e),this}build(){let e=cJ.getInstances();return this.scenes.unshift(...e),this.transformers.forEach((e=>{this.scenes=e.transform(this.scenes)})),this.scenes}constructor(e=new oH,t=uA,n=j()){this.converters=t,this.placementTypeService=n,this.transformers=[],this.scenes=[],this.scenesMap=new Map;let i=e.getSceneData(),r=e.getAdMachineConfig(),a=new Map;i.forEach((e=>{a.has(e.type)||a.set(e.type,[]),a.get(e.type).push(e)})),a.forEach(((e,t)=>{let n=this.converters[t];n&&e.forEach(((e,t)=>{let i=n(e,t,r.states[e.id],this.placementTypeService);this.scenes.push(i),this.scenesMap.set(e.id,i)}))}));let o=new id;this.scenesMap.set(o.getId(),o),this.scenes.push(o),this.scenes.forEach((e=>{let t=r.states[e.getId()];(null==t?void 0:t.on)&&Object.keys(t.on).forEach((n=>{let i=t.on[n],r={name:n,actions:i.actions?i.actions.map((e=>({name:e}))):[],scene:i.target?this.scenesMap.get(i.target):void 0};e.addOrUpdateTransition(r)}))}))}},um=class{transform(e){return e.filter((e=>!!nk(e)&&e.getLastChanceEndcardConfig().enabled)).forEach((e=>{var t;e.addOrUpdateTransition({name:v2.NEXT,actions:[{name:_K.CLOSE_LAST_CHANCE_ENDCARD},{name:_u.SET_CLOSE_BUTTON_VISIBLE}]});let n=[{name:_i.CLOSE_OVERLAY_VIEW},{name:_Y.RESET_AUTO_SHOW_OVERLAY_SERVICE},{name:_u.SET_CLOSE_BUTTON_HIDDEN},{name:il.FLUSH_MRAID_EVENTS_PROXY_CALLBACKS}],i=null===(t=e.getTransitions().find((e=>e.name===v2.LAST_CHANCE_ENDCARD)))||void 0===t?void 0:t.actions.some((e=>e.name===t5.SHOW_PICTURE_IN_PICTURE));e.getSceneType()===v3.video&&(i?n.push({name:t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT}):n.push({name:t5.CLOSE_VIDEO_CURRENT_SCENE})),e.addOrUpdateTransition({name:v2.LAST_CHANCE_ENDCARD,actions:n})})),e}},uN=class{transform(e,t=new oH){let n=t.getAdMachineConfig(),i=t=>e.find((e=>e.getId()===t));return e.forEach((e=>{var t,r,a;let o=e.getId(),s=i(null===(t=null===(a=n.states[o])||void 0===a||null===(r=a.on)||void 0===r?void 0:r.NEXT)||void 0===t?void 0:t.target);s&&(e.next=s,s.prev=e)})),e}},uD=class{transform(e,t=new oH){let n=t.getSceneData(),i=[];return e.forEach((t=>{if(t.getSceneType()===v3.composite){let r=n.find((e=>e.id===t.getId()));if(!r)return;let a=r.children,o=[];a.forEach((t=>{let n=e.find((e=>e.getId()===t));n&&o.push(n)})),t.addScenes(o),i.push(t)}})),e.forEach((e=>{e.getSceneType()===v3.composite||i.some((t=>t.getSceneType()===v3.composite&&t.getScenes().includes(e)))||i.push(e)})),i}},uR=class{transform(e){var t;let n=(null===(t=e[0])||void 0===t?void 0:t.getSceneType())===v3.video?e[0]:null,i=null==n?void 0:n.getTransitions().find((e=>e.name===v2.NEXT));return(null==i?void 0:i.actions.some((e=>e.name===t5.SHOW_PICTURE_IN_PICTURE)))&&(i.actions=i.actions.filter((e=>e.name!==t5.CLOSE_VIDEO)).concat({name:t5.SET_PICTURE_IN_PICTURE_VIDEO_CONTEXT})),e}};const uy=[new uN,new un,new ur,new ua,new um,new uR,new uo,new ud,new uD];var uL=(e=new oH,t=uy)=>{let n=new uf(e);t.forEach((e=>{n.addTransformer(e)}));let i=n.build();return r.getInstance().bind(nZ,i),i},uP=(e=y(),t=[])=>{if(e.has(L.AD_EXPERIENCE))return"free-form";let n=t.filter((e=>e.getSceneType()!==v3.closed)).map((e=>e.getSceneType().toString()));switch(ul(e)&&n.push("lcec"),n.length){case 0:return"unknown";case 1:return`${n[0]}-only`;default:return n.join("-plus-")}},ub=(e=y(),t=uL,n=uE,i=cT)=>{let r;r=e.has(L.AD_EXPERIENCE)?t():n(),i.setValue({adType:uP(e,r)})},uw=()=>{if(!nI())return;let e=r.getInstance(),t=nl();if(!t)return;let n=new oL(t);return e.bind(oL.getServiceIdentifier(),n),n};(vY=T0||(T0={})).BOTTOM="bottom",vY.BOTTOM_RAISED="bottom-raised";const uV=(e=y())=>{let t=e.get(L.SKOVERLAY_POSITION);switch(t){case"bottom":case"bottom-raised":return t;default:return}},uM=(e=y())=>{var t,n;switch(null===(n=e.get(L.SKOVERLAY_DISMISSIBLE))||void 0===n||null===(t=n.trim())||void 0===t?void 0:t.toLowerCase()){case"true":return!0;case"false":return!1;default:return}},uk=()=>({position:"bottom",dismissible:!0});var uU=(e=y())=>{let t=uk(),n=uV(e);void 0!==n&&(t.position=n);let i=uM(e);return void 0!==i&&(t.dismissible=i),t};(vG=T1||(T1={})).EMIT_PREPARE_ERROR="EMIT_PREPARE_ERROR",vG.PREPARE_OVERLAY="PREPARE_OVERLAY",vG.SET_APP_STORE_ID="SET_APP_STORE_ID";const uB=d({},cO,T1);(vj=T2||(T2={})).CLOSE="CLOSE",vj.FINISH="FINISH",vj.INTERRUPT="INTERRUPT",vj.PREPARE_SUCCESS="PREPARE_SUCCESS",vj.READY="READY",vj.RESUME="RESUME",vj.START_DELAY_SHOW="START_DELAY_SHOW",vj.START_IMMEDIATE_SHOW="START_IMMEDIATE_SHOW",(vX=T3||(T3={})).CLOSED="CLOSED",vX.DELAY_SHOW="DELAY_SHOW",vX.DELAYED_SKO_INTERRUPTED="DELAYED_SKO_INTERRUPTED",vX.IDLE="IDLE",vX.INITIAL="INITIAL",vX.IMMEDIATE_SHOW="IMMEDIATE_SHOW",vX.IMMEDIATE_SHOW_INTERRUPTED="IMMEDIATE_SHOW_INTERRUPTED",vX.PREPARING="PREPARING";var uH="store-kit-overlay";const uW=(e=uk(),t=_n.APP_STORE)=>({id:uH,initial:_e.IDLE,context:{displayOptions:e,fallback:t},states:{[_e.IDLE]:{on:{[v9.START_DELAY_SHOW]:{target:_e.DELAY_SHOW,actions:[_t.ASSIGN_FALLBACK]},[v9.START_IMMEDIATE_SHOW]:{target:_e.IMMEDIATE_SHOW,actions:[_t.ASSIGN_FALLBACK,_t.SHOW_SKO]},[v9.SET_DISPLAY_OPTIONS]:{actions:_t.ASSIGN_DISPLAY_OPTIONS}}},[_e.DELAY_SHOW]:{on:{[v9.CLOSE]:{target:_e.IDLE},[v9.INTERRUPT]:{target:_e.DELAY_SHOW_INTERRUPTED},[v9.SHOW]:{target:_e.DELAY_SHOW_IMMEDIATE,actions:_t.SHOW_SKO},[v9.START_IMMEDIATE_SHOW]:{target:_e.IMMEDIATE_SHOW,actions:[_t.ASSIGN_FALLBACK,_t.CANCEL_DELAY_SHOW,_t.SHOW_SKO]}}},[_e.DELAY_SHOW_IMMEDIATE]:{on:{[v9.SET_VISIBLE]:{target:_e.DELAY_SHOW_VISIBLE,actions:_t.EMIT_OBSERVABILITY_EVENT},[v9.CLOSE]:{target:_e.IDLE}}},[_e.DELAY_SHOW_VISIBLE]:{on:{[v9.CLOSE]:{target:_e.CLOSING,actions:_t.CLOSE_SKO},[v9.FINISH]:{target:_e.IDLE},[v9.INTERRUPT]:{target:_e.DELAY_SHOW_INTERRUPTED,actions:_t.CLOSE_SKO}}},[_e.DELAY_SHOW_INTERRUPTED]:{on:{[v9.RESUME]:{target:_e.DELAY_SHOW_IMMEDIATE,actions:_t.SHOW_SKO},[v9.CLOSE]:{target:_e.IDLE}}},[_e.IMMEDIATE_SHOW]:{on:{[v9.SET_VISIBLE]:{target:_e.IMMEDIATE_SHOW_VISIBLE,actions:_t.EMIT_OBSERVABILITY_EVENT},[v9.INTERRUPT]:{target:_e.CLOSING,actions:_t.CLOSE_SKO},[v9.SET_FALLBACK]:{target:_e.FALLBACK}}},[_e.IMMEDIATE_SHOW_VISIBLE]:{on:{[v9.CLOSE]:{target:_e.CLOSING,actions:_t.CLOSE_SKO},[v9.FINISH]:{target:_e.IDLE},[v9.INTERRUPT]:{target:_e.CLOSING,actions:_t.CLOSE_SKO}}},[_e.FALLBACK]:{on:{[v9.START_IMMEDIATE_SHOW]:{actions:_t.SHOW_FALLBACK}}},[_e.CLOSING]:{on:{[v9.FINISH]:{target:_e.IDLE}}},[_e.ERROR]:{},[_e.INITIAL]:{},[_e.PREPARING]:{}}}),ux=(e,t,n,i)=>({actions:{[_t.EMIT_OBSERVABILITY_EVENT]:()=>{t.emit(eg.STORE_KIT_OVERLAY)},[_t.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.openAppStore)||void 0===n||n.call(i,1,t.displayOptions)},[_t.CLOSE_SKO]:()=>{var t,n;null===(n=e.getMraidExt())||void 0===n||null===(t=n.dismissStoreOverlayView)||void 0===t||t.call(n)},[_t.ASSIGN_FALLBACK]:p(((e,t)=>{var n;return C(d({},e),{fallback:null!==(n=t.fallback)&&void 0!==n?n:e.fallback})})),[_t.ASSIGN_DISPLAY_OPTIONS]:p(((e,t)=>{var n;return C(d({},e),{displayOptions:null!==(n=t.displayOptions)&&void 0!==n?n:e.displayOptions})})),[_t.SHOW_FALLBACK]:e=>{switch(e.fallback){case _n.SKPV:n.emit(cR.SKO_FALLBACK_TO_SKPV);break;case _n.APP_STORE:n.emit(cR.STORE_KIT_FALLBACK_TO_MRAID)}},[_t.CANCEL_DELAY_SHOW]:()=>{null==i||i.reset()}}}),uF=(e=uk(),t=_n.APP_STORE)=>{let n=uW(e,t);return C(d({},n),{initial:_e.INITIAL,context:{appStoreId:void 0,displayOptions:e,fallback:t},states:C(d({},n.states),{[_e.INITIAL]:{on:{[v9.READY]:{target:_e.PREPARING,actions:[uB.SET_APP_STORE_ID,uB.PREPARE_OVERLAY]}}},[_e.PREPARING]:{on:{[v9.SET_PREPARED]:{target:_e.IDLE},[v9.SET_ERROR]:{target:_e.ERROR,actions:uB.EMIT_PREPARE_ERROR}}},[_e.DELAY_SHOW_VISIBLE]:{on:{[v9.CLOSE]:{target:_e.CLOSING,actions:_t.CLOSE_SKO},[v9.FINISH]:{target:_e.INITIAL},[v9.INTERRUPT]:{target:_e.DELAY_SHOW_INTERRUPTED,actions:_t.CLOSE_SKO}}},[_e.IMMEDIATE_SHOW_VISIBLE]:{on:{[v9.CLOSE]:{target:_e.CLOSING,actions:_t.CLOSE_SKO},[v9.FINISH]:{target:_e.INITIAL},[v9.INTERRUPT]:{target:_e.CLOSING,actions:_t.CLOSE_SKO}}},[_e.CLOSING]:{on:{[v9.FINISH]:{target:_e.INITIAL}}}})})},uK=(e=R(),t=aC(),n=oP(),i=cD())=>({actions:C(d({},ux(e,t,i,n).actions),{[uB.PREPARE_OVERLAY]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.prepareStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[uB.SET_APP_STORE_ID]:p({appStoreId:(e,t)=>t.appStoreId||e.appStoreId}),[uB.EMIT_PREPARE_ERROR]:()=>{t.emit(eg.STORE_KIT_OVERLAY_PREPARE_ERROR)},[_t.SHOW_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.presentStoreOverlayView)||void 0===n||n.call(i,t.appStoreId,t.displayOptions)},[_t.CLOSE_SKO]:t=>{var n,i;null===(i=e.getMraidExt())||void 0===i||null===(n=i.dismissStoreOverlayView)||void 0===n||n.call(i,t.appStoreId)}})});var uY=class extends ns{init(e){this.interpreter.send(d({type:v9.READY},e))}close(){super.close(),this.interpreter.send({type:v9.READY})}finish(){super.finish(),this.interpreter.send({type:v9.READY})}constructor(e=uF,t=uK,n=t2(),i=y(),r=G(),a=R()){super(e(uU(i),no(r)),t(a),n),this.stateMachineService=n,this.tokenService=i,this.environmentService=r,this.mraidService=a}},uG=class extends ns{constructor(e=uW,t=ux,n=t2(),i=y(),r=G(),a=R(),o=aC(),s=cD(),l=oP()){super(e(uU(i),no(r)),t(a,o,s,l),n)}},uj=class{withAppStoreId(e){let t=nJ(this.tokenService);return t&&e.init({appStoreId:t}),e}resolve(){if(this.environmentService.getOperatingSystem()===eT.iOS)return dg(this.environmentService)?new uG:this.withAppStoreId(new uY)}constructor(e=G(),t=y()){this.environmentService=e,this.tokenService=t}},uX=(e=G(),t=y())=>{let n=r.getInstance(),i=new uj(e,t).resolve();return i&&n.bind(ns.getServiceIdentifier(),i),i},uz=(e=or())=>{e.init()};const u$={options:void 0,lastActivity:void 0,volume:void 0,sessionContent:void 0,state:void 0,nativeView:void 0},uZ=()=>{if(window.omidBridge){var e,t,n,i,r,a,o,s,l,d,c,u;let{options:E,lastActivity:v,volume:_,sessionContent:h,state:T,nativeView:S}=u$;E&&(null===(e=(t=window.omidBridge).init)||void 0===e||e.call(t,...E)),v&&(null===(n=(i=window.omidBridge).setLastActivity)||void 0===n||n.call(i,...v)),_&&(null===(r=(a=window.omidBridge).setDeviceVolume)||void 0===r||r.call(a,..._)),h&&(null===(o=(s=window.omidBridge).startSession)||void 0===o||o.call(s,...h)),T&&(null===(l=(d=window.omidBridge).setState)||void 0===l||l.call(d,...T)),S&&(null===(c=(u=window.omidBridge).setNativeViewHierarchy)||void 0===c||c.call(u,...S))}};var uq=e=>new Promise(((t,n)=>{let i=document.createElement("script");i.src=e,document.head.appendChild(i),i.onload=t,i.onerror=()=>n(Error(`Failed to load script url ${e}`))}));const uQ=new w("6.9.1"),uJ=async(e=y(),t=G(),n=uq,i=Z(),r=uZ)=>{if(nx(e.get(L.OM_ENABLED))&&!t.getSdkVersion().isLessThan(uQ))try{await n("omsdk.js"),await n("omsdk-session.js"),r()}catch(e){i.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:{message:"Load OMSDK files failed"}}})}},u0=e=>{var t,n;null!=(null==e||null===(t=e.data)||void 0===t?void 0:t.currentTime)&&null!=(null==e||null===(n=e.data)||void 0===n?void 0:n.duration)&&ij(e.data.currentTime,e.data.duration,Math.round(e.data.currentTime))},u1=e=>{let t=$();ah(t)&&oI(e,t.getId(),t.getTrackingEventMapConfig())},u2=e=>{var t,n;let i=ch();(null==e||null===(t=e.data)||void 0===t?void 0:t.error)&&i.pushError(e.data.error,{url:null===(n=e.data)||void 0===n?void 0:n.videoUrl,error_source:eC.RESOURCE})};var u3=(e,t)=>{let n=nz(e);switch(t.event){case iB.PROGRESS:u0(t);break;case iB.MUTE:case iB.UNMUTE:n.emit(t.event===iB.MUTE?nY.VIDEO_MUTE:nY.VIDEO_UNMUTE),u1(t.event===iB.MUTE?v4.MUTE:v4.UNMUTE);break;case iB.CLOSE:n.emit(nY.VIDEO_CLOSE),u1(v4.SKIP);break;case iB.PAUSE:case iB.PLAY:u1(t.event===iB.PAUSE?v4.PAUSE:v4.RESUME);break;case iB.ERROR:u2(t)}};const u5=(e,t)=>{if(t===eT.iOS)return"0.0.0";switch(e){case nY.REWARD_GRANTED:return"6.12.0";case nY.VIDEO_LENGTH:return"6.9.0";default:return"0.0.0"}};var u4=(e,t,n=R().getMraidBridgeExt(),i=G())=>{let r=i.getSdkVersion(),a=u5(t.event,i.getOperatingSystem());r.isGreaterThanOrEqualTo(new w(a))&&(null==n||n.notifyTPAT(t.event))},u6=(e,t,n=t7(),i=t6(),r=ot)=>{if(t.event===Q.MINIMIZED)n.standby(),i.pauseAll();else if(t.event===Q.MAXIMIZED){let e=r();if(null==e?void 0:e.state.matches(_L.AUTO_PLAY_FAIL))return;n.wake(),i.startAll()}};let u8=null;var u7=(e,t,n=R())=>{if(t.event===nc.START){if(u8)return;let t=n.getMraidBridgeExt();t&&(u8=window.setInterval((()=>{t.creativeHeartbeat(),e.getLogger("heartbeat").info("Heartbeat")}),4e3))}else t.event===nc.STOP&&u8&&(window.clearInterval(u8),u8=null)};(vz=T5||(T5={})).OVERLAY_PREPARED="vungle.events.storeoverlay.success",vz.OVERLAY_VISIBLE="vungle.events.storeoverlay.visible",vz.OVERLAY_FINISHED="vungle.events.storeoverlay.finished",vz.OVERLAY_FAILED="vungle.events.storeoverlay.failed",(v$=T4||(T4={})).STORE_VIEW_PREPARED="vungle.events.preparestore.success",v$.STORE_VIEW_CLOSED="vungle.events.preparestore.finished",(vZ=T6||(T6={})).VISIBLE="vungle.events.storekit.visible",vZ.FAILED="vungle.events.storekit.failed",vZ.FINISHED="vungle.events.storekit.finished";var u9=(e=t2(),t=uH)=>cA(e,t);(vq=T8||(T8={}))[vq.PRODUCT_VIEW_MODE=0]="PRODUCT_VIEW_MODE",vq[vq.OVERLAY_MODE=1]="OVERLAY_MODE";const Ee=e=>{var t;if(0===e){let e=nl();(null==e?void 0:e.isOpen())&&(null==e||e.close())}else 1===e&&(null===(t=u9())||void 0===t||t.send({type:v9.SET_VISIBLE}))},Et=e=>{var t,n;0===e?null===(t=nh())||void 0===t||t.close():1===e&&(null===(n=nl())||void 0===n||n.finish())},En=e=>{var t,n;0===e?null===(t=nh())||void 0===t||t.fallback():1===e&&(null===(n=nl())||void 0===n||n.fallback())};var Ei=(e,t)=>{var n;if(!Object.values(T6).includes(t.event))return;let i=null===(n=t.data)||void 0===n?void 0:n.mode;switch(t.event){case T6.VISIBLE:Ee(i);break;case T6.FINISHED:Et(i);break;case T6.FAILED:En(i)}},Er=(e,t,n=G(),i=or())=>{t.data.isFatal&&(n.getSdkVersion().isGreaterThanOrEqualTo(M.sdkSeven)?i.notifyFatalError(t):nv())},Ea=(e,t)=>{na()&&Object.values(T4).includes(t.event)&&{[T4.STORE_VIEW_PREPARED]:()=>{var e;null===(e=cf())||void 0===e||e.send({type:_s.PREPARE_SUCCESS})},[T4.STORE_VIEW_CLOSED]:()=>{var e;null===(e=cf())||void 0===e||e.send({type:_s.CLOSE})}}[t.event]()},Eo=(e,t)=>{var n;if(!nI())return;let i=nl();null===(n={[T5.OVERLAY_PREPARED]:()=>{var e;null===(e=u9())||void 0===e||e.send({type:v9.SET_PREPARED})},[T5.OVERLAY_FINISHED]:()=>{var e;null===(e=u9())||void 0===e||e.send({type:v9.FINISH})},[T5.OVERLAY_FAILED]:()=>{let e=u9();(null==e?void 0:e.state.matches(_e.PREPARING))?e.send({type:v9.SET_ERROR}):null==i||i.fallback()},[T5.OVERLAY_VISIBLE]:()=>{var e;null===(e=u9())||void 0===e||e.send({type:v9.SET_VISIBLE})}}[t.event])||void 0===n||n.call(void 0)},Es=(e,t)=>{if(t.event===oZ.CLOSE){let{sendAdEvent:n,isVideoState:i,isCloseButtonVisible:r}=t.data;if(!r)return;e.getLogger("custom-mraid").info(oZ.CLOSE);let a=lt();if((null==a?void 0:a.state.value)===hg.SHOWING)return void a.send({type:hC.HIDE});if(!oj().state.context.isPrivacyButtonVisible){if(ia()&&i)return void lF(n)({type:v2.NEXT});n({type:v2.NEXT})}}};const El=(e,t)=>e.getActivityEvents().filter((e=>"error-logging"===e.activity.eventType&&e.activity.data.error.message===t.message&&e.activity.data.error.error_source===t.error_source)).length>1;var Ed=(e,t)=>{var n;let i=ch();if("error-logging"===t.type&&(null===(n=t.data)||void 0===n?void 0:n.error)&&!El(e,t.data.error))i.pushError(t.data.error);else if("cta"===t.type||"fsc"===t.type){let e=z.getValue().scene,n={type:t.type,value:t.event,scene_type:null==e?void 0:e.getSceneType()},r=d({name:eg.CTA},n);i.pushEvent(r)}},Ec=(e,t)=>{let n=ch();t.event===ep.EVENT&&t.data.name?n.pushEvent(d({name:t.data.name},t.data)):t.event===ep.ERROR&&t.data.error&&n.pushError(t.data.error)},Eu=(e,t,n=on())=>{t.event===aY.SILENT?n.mute():t.event===aY.UN_SILENT&&n.unmute()},EE=(e,t,n=R())=>{var i;t.event===oU.DECODING_ERROR&&(null===(i=n.getMraid())||void 0===i||i.close())},Ev=(e,t,n=R(),i=aC(),r=cs(),a=oQ())=>am((()=>a.haveAllCompleted()),aN.MAX_WAIT_TIME+100,Error("error waiting for all event streams to finish")).catch((()=>{})).finally((()=>{i.emit(eg.AD_CLOSE),null==r||r.addRecord(),n.getMraid().close()}));const E_=(e,t=aj())=>t.find((t=>t.getId()===e))||t.filter((e=>e.getSceneType()===v3.composite)).map((t=>E_(e,t.getScenes()))).find(Boolean);var Eh=E_,ET=(e,t,n=Eh,i=aj,r=oQ(),a=aC())=>{let o=n(t.data.scene_id);if(o&&t.event===ip.SCENE_END){let e=i().indexOf(o);r.subscribeAll(o).then((n=>{Object.keys(n).length>0&&a.emit({type:"observability",event:ep.EVENT,data:d({name:eg.SCENE_END,scene_id:t.data.scene_id,scene_type:t.data.scene_type,scene_index:e},o.getObservabilityData(),n)})}))}},ES=(e,t,n=R(),i=nz(),r=aC())=>{t.event===io.GRANT_REWARD&&(n.getMraidBridgeExt().notifySuccessfulViewAd(),i.emit(nY.REWARD_GRANTED),r.emit(eg.GRANT_REWARD))},Ep=(e,t,n=sy(),i=nl(),r=nh(),a=G(),o=j())=>{if(t.event===cR.SKPV_FALLBACK_TO_SKO){var s;let t=null!==(s=null==i?void 0:i.getState().matches(_e.FALLBACK))&&void 0!==s&&s;if(nI(a,o)&&!t)return void(null==i||i.open({fallback:_n.APP_STORE}));e.emit({type:"store-kit-orchestration",event:cR.STORE_KIT_FALLBACK_TO_MRAID})}t.event===cR.SKO_FALLBACK_TO_SKPV&&(null==r||r.open()),t.event===cR.STORE_KIT_FALLBACK_TO_MRAID&&n.invoke({url:void 0,target:v5.OFF,fireMMPEvents:!1})},Eg=(e,t,n=aC())=>{if(t.event===eM.APP_STORE_CLOSE){let t=e.getActivityEventPairs("store-kit-product-view",eM.APP_STORE_OPEN,eM.APP_STORE_CLOSE);if(n.getEventCount(eg.APP_STORE_DURATION)<t.length){let e={name:eg.APP_STORE_DURATION,duration:Date.now()-t[t.length-1][0].timestamp};n.emit(e)}}},EC=(e,t,n=oi(),i=oj)=>{i().state.context.shouldRenderPictureInPicture&&(n.closeVideo(),i().send({type:v2.CLOSE_PICTURE_IN_PICTURE}))},EI=(e,t,n=aC())=>{t.event===nY.CHECKPOINT_0&&n.emit(eg.IMPRESSION)};(T7||(T7={})).INACTIVITY="INACTIVITY";var EO=T7,EA=(e=$,t=oD)=>{let n=e();if(!n)return!1;let i=t(n.getId());return null==i?void 0:i.state.matches(_x.SHOWING)},Ef=(e,t,n=aC(),i=EA,r=$,a=aj)=>{if(t.event===EO.INACTIVITY){let e=r(),t=a().findIndex((t=>t.getId()===(null==e?void 0:e.getId())));n.emit({name:eg.INACTIVITY_OBSERVED,scene_id:null==e?void 0:e.getId(),scene_type:null==e?void 0:e.getSceneType(),scene_index:t,last_chance_endcard_visible:i()})}},Em=()=>{let e=q();e.addEventHandler("*",Ed),e.addEventHandler("close",Ev),e.addEventHandler("observability",Ec),e.addEventHandler("heartbeat",u7),e.addEventHandler("storekit-mraid",Ei),e.addEventHandler("storekit-mraid",Ea),e.addEventHandler("storekit-mraid",Eo),e.addEventHandler("tpat",u4),e.addEventHandler("tpat",EI),e.addEventHandler("video",u3),e.addEventHandler("video",lY),e.addEventHandler("viewability",u6),e.addEventHandler("error-logging",Er),e.addEventHandler("custom-mraid",Es),e.addEventHandler("videoViewed",iX),e.addEventHandler("silent",Eu),e.addEventHandler("free-form",EE),e.addEventHandler("scene-event",ET),e.addEventHandler("incentivized-event",ES),e.addEventHandler("store-kit-product-view",Eg),e.addEventHandler("store-kit-orchestration",Ep),e.addEventHandler("picture-in-picture",EC),e.addEventHandler("inactivity",Ef)},EN=(e=R(),t=y())=>{let n=e.getMraidBridgeExt();n&&(t.replacementTokens=n.getReplacementTokens())},ED=()=>Z(),ER=(e=G(),t=j(),n=ED(),i=o$())=>{nI(e,t)&&!dg(e)&&Object.values(T5).forEach((e=>{null==i||i.addEventListener(e,(()=>{n.emit({type:"storekit-mraid",event:e})}))}))},Ey=(e=G(),t=ED(),n=o$())=>{na(e)&&!dg(e)&&Object.values(T4).forEach((e=>{null==n||n.addEventListener(e,(()=>{t.emit({type:"storekit-mraid",event:e})}))}))},EL=(e=G(),t=ED(),n=o$())=>{e.getOperatingSystem()===eT.iOS&&Object.values(T6).forEach((e=>{null==n||n.addEventListener(e,(n=>{t.emit({type:"storekit-mraid",event:e,data:n.detail})}))}))},EP=()=>Z();const Eb=new w("7");var Ew,EV,EM,Ek,EU,EB,EH,EW,Ex,EF,EK,EY,EG,Ej,EX,Ez,E$,EZ,Eq,EQ,EJ,E0,E1,E2,E3,E5,E4,E6,E8,E7,E9,ve,vt,vn,vi,vr,va,vo,vs,vl,vd,vc,vu,vE,vv,v_,vh,vT,vS,vp,vg,vC,vI,vO,vA,vf,vm,vN,vD,vR,vy,vL,vP,vb,vw,vV,vM,vk,vU,vB,vH,vW,vx,vF,vK,vY,vG,vj,vX,vz,v$,vZ,vq,vQ,vJ,v0,v1,v2,v3,v5,v4,v6,v8,v7,v9,_e,_t,_n,_i,_r,_a,_o,_s,_l,_d,_c,_u,_E,_v,__,_h,_T,_S,_p,_g,_C,_I,_O,_A,_f,_m,_N,_D,_R,_y,_L,_P,_b,_w,_V,_M,_k,_U,_B,_H,_W,_x,_F,_K,_Y,_G,_j,_X,_z,_$,_Z,_q,_Q,_J,_0,_1,_2,_3,_5,_4,_6,_8,_7,_9,he,ht,hn,hi,hr,ha,ho,hs,hl,hd,hc,hu,hE,hv,h_,hh,hT,hS,hp,hg,hC,hI,hO,hA,hf,hm,hN,hD,hR,hy,hL,hP,hb,hw,hV,hM,hk,hU,hB,hH,hW,hx,hF,hK,hY,hG,hj,hX,hz,h$,hZ,hq,hQ,hJ,h0,h1,h2,h3,h5,h4,h6,h8,h7,h9,Te,Tt,Tn,Ti,Tr,Ta,To,Ts,Tl,Td,Tc,Tu,TE,Tv,T_,Th,TT,TS,Tp,Tg,TC,TI,TO,TA,Tf,Tm,TN,TD,TR,Ty,TL,TP,Tb,Tw,TV,TM,Tk,TU,TB,TH,TW,Tx,TF,TK,TY,TG,Tj,TX,Tz,T$,TZ,Tq,TQ,TJ,T0,T1,T2,T3,T5,T4,T6,T8,T7,T9,Se,St,Sn,Si,Sr=(e=R(),t=EP(),n=G())=>{var i;let r=void 0!==(null===(i=e.getMraidBridgeExt())||void 0===i?void 0:i.creativeHeartbeat);n.getSdkVersion().isGreaterThanOrEqualTo(Eb)&&r&&t.emit({type:"heartbeat",event:nc.START})},Sa=-1,So=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Sa=t.timeStamp,e(t))}),!0)},Ss=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Sl=function(){var e=Ss();return e&&e.activationStart||0},Sd=function(e,t){var n=Ss(),i="navigate";return Sa>=0?i="back-forward-cache":n&&(document.prerendering||Sl()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},Sc=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch(e){}},Su=function(e,t,n,i){var r,a;return function(o){var s;t.value>=0&&(o||i)&&((a=t.value-(r||0))||void 0===r)&&(r=t.value,t.delta=a,t.rating=(s=t.value)>n[1]?"poor":s>n[0]?"needs-improvement":"good",e(t))}},SE=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Sv=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},S_=function(e){var t=!1;return function(){t||(e(),t=!0)}},Sh=-1,ST=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},SS=function(e){"hidden"===document.visibilityState&&Sh>-1&&(Sh="visibilitychange"===e.type?e.timeStamp:0,Sg())},Sp=function(){addEventListener("visibilitychange",SS,!0),addEventListener("prerenderingchange",SS,!0)},Sg=function(){removeEventListener("visibilitychange",SS,!0),removeEventListener("prerenderingchange",SS,!0)},SC=function(){return Sh<0&&(Sh=ST(),Sp(),So((function(){setTimeout((function(){Sh=ST(),Sp()}),0)}))),{get firstHiddenTime(){return Sh}}},SI=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},SO=[1800,3e3],SA=function(e,t){t=t||{},SI((function(){var n,i=SC(),r=Sd("FCP"),a=Sc("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Sl(),0),r.entries.push(e),n(!0)))}))}));a&&(n=Su(e,r,SO,t.reportAllChanges),So((function(i){n=Su(e,r=Sd("FCP"),SO,t.reportAllChanges),SE((function(){r.value=performance.now()-i.timeStamp,n(!0)}))})))}))},Sf=0,Sm=1/0,SN=0,SD=function(e){e.forEach((function(e){e.interactionId&&(Sm=Math.min(Sm,e.interactionId),Sf=(SN=Math.max(SN,e.interactionId))?(SN-Sm)/7+1:0)}))},SR=function(){return T9?Sf:performance.interactionCount||0},Sy=function(){"interactionCount"in performance||T9||(T9=Sc("event",SD,{type:"event",buffered:!0,durationThreshold:0}))},SL=[],SP=new Map,Sb=0,Sw=function(){var e=Math.min(SL.length-1,Math.floor((SR()-Sb)/50));return SL[e]},SV=[],SM=function(e){if(SV.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=SL[SL.length-1],n=SP.get(e.interactionId);if(n||SL.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};SP.set(i.id,i),SL.push(i)}SL.sort((function(e,t){return t.latency-e.latency})),SL.length>10&&SL.splice(10).forEach((function(e){return SP.delete(e.id)}))}}},Sk=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=S_(e),"hidden"===document.visibilityState?e():(n=t(e),Sv(e)),n},SU=[200,500],SB=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},SI((function(){Sy();var n,i,r=Sd("INP"),a=function(e){Sk((function(){e.forEach(SM);var t=Sw();t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())}))},o=Sc("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});i=Su(e,r,SU,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Sv((function(){a(o.takeRecords()),i(!0)})),So((function(){Sb=SR(),SL.length=0,SP.clear(),i=Su(e,r=Sd("INP"),SU,t.reportAllChanges)})))})))},SH=[2500,4e3],SW={},Sx=function(e,t){t=t||{},SI((function(){var n,i=SC(),r=Sd("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-Sl(),0),r.entries=[e],n())}))},o=Sc("largest-contentful-paint",a);if(o){n=Su(e,r,SH,t.reportAllChanges);var s=S_((function(){SW[r.id]||(a(o.takeRecords()),o.disconnect(),SW[r.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Sk(s)}),{once:!0,capture:!0})})),Sv(s),So((function(i){n=Su(e,r=Sd("LCP"),SH,t.reportAllChanges),SE((function(){r.value=performance.now()-i.timeStamp,SW[r.id]=!0,n(!0)}))}))}}))},SF=[800,1800],SK=function e(t){document.prerendering?SI((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},SY=function(e,t){t=t||{};var n=Sd("TTFB"),i=Su(e,n,SF,t.reportAllChanges);SK((function(){var r=Ss();r&&(n.value=Math.max(r.responseStart-Sl(),0),n.entries=[r],i(!0),So((function(){(i=Su(e,n=Sd("TTFB",0),SF,t.reportAllChanges))(!0)})))}))},SG={passive:!0,capture:!0},Sj=new Date,SX=function(e,t){Se||(Se=t,St=e,Sn=new Date,SZ(removeEventListener),Sz())},Sz=function(){if(St>=0&&St<Sn-Sj){var e={entryType:"first-input",name:Se.type,target:Se.target,cancelable:Se.cancelable,startTime:Se.timeStamp,processingStart:Se.timeStamp+St};Si.forEach((function(t){t(e)})),Si=[]}},S$=function(e){if(e.cancelable){var t,n,i,r=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(t=function(){SX(r,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",t,SG),removeEventListener("pointercancel",n,SG)},addEventListener("pointerup",t,SG),addEventListener("pointercancel",n,SG)):SX(r,e)}},SZ=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,S$,SG)}))};const Sq=e=>t=>{let n={FCP:eg.WEB_VITALS_FIRST_CONTENTFUL_PAINT,INP:eg.WEB_VITALS_INTERACTION_TO_NEXT_PAINT,LCP:eg.WEB_VITALS_LARGEST_CONTENTFUL_PAINT,TTFB:eg.WEB_VITALS_TIME_TO_FIRST_BYTE};e.emit({name:n[t.name],value:Math.round(t.value),rating:t.rating})};var SQ=(e=aC(),t=SA,n=SB,i=Sx,r=SY)=>{let a=Sq(e);t(a),n(a),i(a),r(a)},SJ=(e=aj())=>{let t=e.filter((e=>e.getSceneType()===v3.endcard));t.length&&t.forEach((e=>{e.initIframeContentData()}))},S0=(e,t)=>iv(e,"observability").pipe(iE((e=>e.data.name===t))),S1=(e=t7(),t=q(),n=aC(),i=1e4,r=S0)=>{r(n,eg.AD_START).pipe(iA((()=>iv(t,"*").pipe(function(e,t=t7()){return n=>new iu((i=>{let r,a=()=>{r&&(r.destroy(),r=void 0)},o=n.subscribe({next:n=>{a(),(r=t.getNewTimer(e,(()=>(e=>{i.next(e),r=void 0})(n)))).start()},error:e=>{var t;a(),null===(t=i.error)||void 0===t||t.call(i,e)},complete:()=>{var e;a(),null===(e=i.complete)||void 0===e||e.call(i)}});return{unsubscribe:()=>{a(),o.unsubscribe()}}}))}(i,e),iT(iL(iv(t,"inactivity"),r(n,eg.AD_CLOSE))))))).subscribe({next:()=>{t.emit({type:"inactivity",event:EO.INACTIVITY,fireOnlyOnce:!0})},error:e=>{t.emit({type:"error-logging",event:n4.EXCEPTION,data:{error:e}})},complete:()=>{}})},S2=(e=R(),t=G())=>{var n;let i=e.getMraid();t.getOperatingSystem()===eT.Windows&&(null==i||null===(n=i.useCustomClose)||void 0===n||n.call(i,!0))};const S3=async()=>{EN(),Em(),cC();let e=aC();e.emit(eg.AD_LOAD),uz(),cE(),cQ(),uX(),uw(),cc(),Ey(),ER(),EL(),ub(),SJ(),c_(),await uJ(),Sr(),SQ(),S2(),cu(),S1(),e.emit(eg.AD_LOAD_COMPLETE)};(()=>{let e=r.getInstance(),t=new o,n=new A,i=new b(t,n);e.bind(o.getServiceIdentifier(),t),e.bind(l.getServiceIdentifier(),new l),e.bind(g.getServiceIdentifier(),new g),e.bind(A.getServiceIdentifier(),n),e.bind(D.getServiceIdentifier(),new D),e.bind(m.getServiceIdentifier(),new m),e.bind(b.getServiceIdentifier(),i),e.bind(M.getServiceIdentifier(),new M(t,n)),e.bind(eU.getServiceIdentifier(),new eU),e.bind(eB.getServiceIdentifier(),new eB),e.bind(t1.getServiceIdentifier(),new t1),e.bind(aS.getServiceIdentifier(),new aS),e.bind(aI.getServiceIdentifier(),new aI(n)),e.bind(aN.getServiceIdentifier(),new aN),e.bind(ab.getServiceIdentifier(),new ab),e.bind(aH.getServiceIdentifier(),new aH),e.bind(r2.getServiceIdentifier(),new r2),e.bind(r5.getServiceIdentifier(),new r5),e.bind(ak.getServiceIdentifier(),new ak),e.bind(aW.getServiceIdentifier(),new aW)})(),R().init(),window.omidBridge={init:(...e)=>{u$.options=e},setLastActivity:(...e)=>{u$.lastActivity=e},setDeviceVolume:(...e)=>{u$.volume=e},startSession:(...e)=>{u$.sessionContent=e},setState:(...e)=>{u$.state=e},setNativeViewHierarchy:(...e)=>{u$.nativeView=e}},((e=R())=>new Promise((t=>{let n=e.getMraid();(null==n?void 0:n.getState())===eE.LOADING?null==n||n.addEventListener("ready",(()=>{t(!0)})):t(!0)})))().then(S3).then((()=>new Promise((e=>{var t;let n=R();if(null===(t=n.getMraid())||void 0===t?void 0:t.isViewable())e(!0);else{let t=window.setInterval((()=>{var i;(null===(i=n.getMraid())||void 0===i?void 0:i.isViewable())&&(window.clearInterval(t),e(!0))}),100)}})))).then((()=>{var e,t,n,i,r;cd(),co(),e=aF(ca,{}),(t=document.getElementById("dynamic"))==document&&(t=document.documentElement),ef.__&&ef.__(e,t),n=t.__k,i=[],r=[],e2(t,e=t.__k=eG(eX,null,[e]),n||eH,eH,t.namespaceURI,n?null:t.firstChild?eA.call(t.childNodes):null,i,n?n.__e:t.firstChild,!1,r),e3(i,e,r)}));</script> </body></html>